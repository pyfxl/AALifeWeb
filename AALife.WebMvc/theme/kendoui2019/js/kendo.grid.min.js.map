{"version":3,"sources":["kendo.grid.js"],"names":["f","define","$","normalizeText","text","String","replace","REPLACE_REGEX","SPACE","objectKey","object","key","parts","push","sort","join","hashKey","str","i","hash","length","charCodeAt","zeroSize","width","height","baseline","measureText","style","measureBox","TextMetrics","current","measure","LRUCache","DEFAULT_OPTIONS","defaultMeasureBox","window","kendo","util","Class","extend","init","size","this","_size","_length","_map","put","value","map","entry","_head","_tail","newer","older","get","baselineMarkerSize","document","createElement","cssText","options","_cache","styleKey","cacheKey","cachedResult","baselineMarker","textStr","box","_baselineMarker","cloneNode","textContent","appendChild","body","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","deepExtend","jQuery","amd","a1","a2","a3","undefined","attrEquals","attrName","attrValue","attr","groupCells","count","Array","stringifyAttributes","attributes","result","STRING","cursor","context","add","css","reorder","selector","source","dest","before","idx","sourceIndex","eq","appendTo","elements","lockedContent","content","filter","find","attachCustomCommandEvent","container","commands","command","commandName","isArray","isPlainObject","click","name","on","CLICK","NS","proxy","normalizeColumns","columns","encoded","hide","parentIds","column","hidden","uid","field","isVisible","addHiddenStyle","footerAttributes","headerAttributes","guid","headers","id","columnParent","parents","columnParents","inserted","splice","setColumnVisibility","visible","setVisibility","show","method","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","hideByMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","display","isElementVisible","element","visibleColumns","grep","columnsWithMedia","minScreenWidth","Error","concat","toJQuery","toArray","updateCellRowSpan","cell","sourceLockedColumnsCount","lockedColumnDepth","depth","lockedColumns","nonLockedColumnDepth","nonLockedColumns","rowSpan","moveCellsBetweenContainers","sources","target","leafs","destination","groups","action","rows","sourcesDepth","targetDepth","children","insertAfter","last","addRowSpanValue","moveCells","updateCellIndex","thead","offset","position","allColumns","cells","leafColumns","el","hasClass","columnPosition","row","temp","max","sourcePosition","columnVisiblePosition","ths","t","cellCounts","findParentColumnWithChildren","index","rtl","targetLocked","locked","findReorderTarget","masterColumns","parent","parentColumns","targetIndex","inArray","flatColumnsInDomOrder","flatColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","parseInt","columnsWidth","colWidth","indexOf","removeRowSpanValue","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","rowIndex","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","childColumns","getColumnsFields","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","parentCellsWithChildren","prevCells","parentCell","closest","headerRows","level","prevAll","colSpan","Math","getAttribute","childColumnsCells","child","colSpanAttr","next","appendContent","tbody","table","html","empty","placeholder","tmp","tbodySupportsInnerHtml","innerHTML","firstChild","replaceChild","match","hasHiddenStyle","normalizeCols","hasDetails","colgroup","format","is","append","prepend","browser","msie","version","setTimeout","normalizeHeaderCells","len","lastIndex","th","insertBefore","convertToObject","array","item","formatGroupValue","columnValues","isForeignKey","groupValue","htmlEncode","setCellVisibility","state","pad","nonDataCellsRegExp","test","className","hideColumnCells","columnIndex","groupRows","data","hasSubgroups","items","groupFooters","aggregates","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","syncTableHeight","table1","table2","lockedHeigth","tableHeigth","diff","filterRowRegExp","adjustRowHeight","row1","row2","offsetHeight1","offsetHeight2","getCommand","focusTable","direct","scrollLeft","focusElement","one","e","preventDefault","focus","isColumnGroupable","grid","groupable","isGroupedBy","isColumnEditable","model","selectable","editable","isInputElement","tableClick","currentTarget","isHeader","lockedTable","headerTable","lockedHeader","isInput","preventScroll","currentTable","roleSelector","_setCurrent","navigatable","isIE8","_activeElement","CHECKBOXINPUT","contains","support","touch","leftMostPosition","webkit","parseVirtualSettings","asLowerString","toLowerCase","isElementVisibleInWrapper","wrapper","halfHeight","top","outerHeight","math","abs","floor","isInEdit","groupCellBuilder","headerTemplateIndex","ARIALABEL","COLLAPSE","groupCellLockedContentBuilder","groupRowBuilder","colspan","expanded","includeAdditionalData","EXPAND","groupRowLockedContentBuilder","ui","DataSource","ObservableObject","tbodyInnerHtml","activeElement","Widget","outerWidth","_outerWidth","_outerHeight","keys","prototype","isFunction","isEmptyObject","DOT","PROGRESS","ERROR","HIERARCHY_CELL_CLASS","DATA_CELL","SELECTION_CELL_SELECTOR","NAVROW","NAVCELL","ITEMROW","FIRSTITEMROW","LASTITEMROW","FIRSTNAVITEM","HEADERCELLS","CONTENTRLOCKEDCONTAINER","GROUPCELLCLASS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","SCROLL","SYNC","FOCUSED","FOCUSABLE","SELECTED","CHECKBOX","NORECORDSCLASS","LINK_CLASS","ICON_CLASS","ORDER_CLASS","HEADER_COLUMN_MENU_CLASS","FILTER_MENU_CLASS","RESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","NAVIGATE","MOUSEDOWN","HEIGHT","TABINDEX","FUNCTION","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","UNIQUE_ID","MINCOLSPANVALUE","COLSPAN","OVERFLOW","HIDDEN","SORT","GROUP_SORT","DELETECONFIRM","NORECORDS","CONFIRMDELETE","CANCELDELETE","formatRegExp","templateHashRegExp","whitespaceRegExp","RegExp","COMMANDBUTTONTMPL","SELECTCOLUMNTMPL","SELECTCOLUMNHEADERTMPL","isRtl","isIE7","isIE11","isMac","navigator","userAgent","classNames","widget","scrollContainer","GroupsPager","Pager","fn","call","dataSource","useRanges","_omitPrefetch","totalPages","that","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","_refreshHandler","refresh","setDataSource","wrap","unbind","bind","itemHeight","noop","prefetch","maxScrollHeight","events","destroy","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","overflow","first","_wheelScroll","_wrapper","kineticScrollNeeded","UserEvents","global","allowSelection","start","sender","capture","move","scrollTop","y","delta","x","_scroll","overflow-y","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","rowHeight","skip","_rangeStart","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","trigger","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","itemIndex","rangeStart","scrollIntoView","containerHeight","containerScroll","elementOffset","elementHeight","scrollingUp","currentSkip","fetching","prefetchAt","webkitCorrection","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","progress","range","repaintScrollbar","shouldScrollWrapper","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","totalHeight","cancel","page","defaultCommands","create","iconClass","save","edit","update","canceledit","excel","pdf","search","Grid","DataBoundWidget","_events","_element","_aria","_columns","_dataSource","_tbody","_thead","_groupable","_toolbar","_pageable","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","addClass","_resizeHandler","resize","notify","scrollableContent","scrollable","virtual","virtualScrollable","toolbar","filterable","sortable","allowCopy","pageable","persistSelection","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","messages","cancelDelete","confirmation","confirmDelete","expandCollapseColumnHeader","groupHeader","ungroupHeader","_angularItems","_destroyColumnAttachments","_navigatableTables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","initialData","_data","group","aggregate","transport","$angular","setOptions","mobileWrapper","currentOptions","after","removeClass","_setEvents","_items","tr","dataItems","n","resizeHandle","angular","each","filterMenu","_cellId","_hasDetails","_createResizeHandle","headerWrap","ieCorrection","firefoxCorrection","leftMargin","invisibleSpace","leftBorderWidth","left","indicatorWidth","halfResizeHandle","rtlCorrection","parseFloat","mozilla","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","col","constrain","totalWidth","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_draggable","kendoDraggable","autoScroll","dragstart","not","dragend","title","_reorderable","kendoReorderable","draggable","dragOverContainers","lockable","inSameContainer","change","oldIndex","newIndex","reorderColumn","_reorderHeader","sourceLockedColumns","targetLockedColumns","destPosition","_reorderContent","footerCol","beforeVisibleColumn","columnsArray","lockedRows","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","headerCol","_findClosestVisibleColumnIndex","slice","prev","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","minWidth","contentDiv","footerTable","j","tables","oldColumnWidth","newColumnWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","safari","lockChanged","sourceColumns","destColumn","virtualScroll","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unlockColumn","cellIndex","td","lockedColumnOffset","_modelForContainer","_editMode","getByUid","mode","handler","_editContainer","end","closeCell","_scrollVirtualWrapper","editContainer","_mousedownOnEditCell","tap","isLockedCell","has","blur","editCell","shouldCloseCell","_virtualColScroll","editRow","_isVirtualInlineEditable","stopPropagation","removeRow","_confirmation","virtualCols","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","editor","values","skipFocus","_isVirtualIncellEditable","_editableState","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","type","_displayCell","ns","dataItem","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","modelId","schema","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","currentIndex","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","editMenuGuid","unescape","_createButton","kendoWindow","modal","userTriggered","clearContainer","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","angularElements","angularData","isSelected","isAlt","replaceWith","_checkBoxSelection","select","_showMessage","confirmDialog","Confirm","closable","okText","done","fail","confirm","_isVirtualEditable","_virtualPageToTop","saveChanges","addRow","createAt","view","createAtBottom","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_toolbarTmpl","prependTo","saveAsExcel","saveAsPDF","input","_searchTimeOut","searchFields","expression","filters","logic","endless","_endlessPageSize","operator","searchText","attributeClassMatch","split","_hasFooters","groupRow","collapseGroup","expandGroup","_isLocked","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","_skip","_pageSize","_take","_addGroupableOptionsToHeader","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","cellFieldAttr","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","apply","multi","notString","Selectable","parseOptions","multiple","aria","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","useAllItems","relatedTarget","continuousItems","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","stopImmediatePropagation","copySelection","areaClipBoard","val","getTSV","Event","metaKey","getSelection","selection","createRange","opacity","cellsOffset","lockedCols","inLockedArea","rowsOffset","selected","delimeter","onlyVisible","cellText","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","showColumn","initiallyHidden","hideColumn","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","any","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","_relatedCell","clearSelection","selectableoptions","checked","prop","allRows","dataSourceOptions","selectedViewIds","selectedKeyNames","property","ids","_updateCurrentAttr","headerId","removeAttr","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","siblings","_virtualCellIndex","_lastCellIndex","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","offsetLeft","bottomDistance","edge","dataTables","headerTables","_openHeaderMenu","_tableFocus","_tableBlur","_tableKeyDown","altKey","_setTabIndex","_findCellIndex","startIndex","reversed","_scrollToColumn","leafsCols","HOME","END","handled","requestInProgress","canHandle","isDefaultPrevented","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","isInCell","_handleEditing","active","_toggleCurrent","descriptors","label","_canDrag","dir","link","focusable","originalIndex","_currentDataIndex","lockedColumnsCount","tmpIndex","currentRowCells","hiddenColumns","up","step","right","back","switchRow","isEdited","isIE","oldIE","opera","triggerHandler","_initMobile","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","originalPageSize","hasVirtualScroll","_createVirtualScrollable","_scrollLeft","isScrollingLeft","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","_averageRowHeight","scroll","_focusEditable","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","isGridHeightSet","scrollableHeight","initialHeight","newHeight","currentRowHeight","itemsCount","_rowHeight","_sum","_measures","_sortHandler","_requestStart","_error","_progress","relatedRow","selectableRow","childCells","originalCells","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menu","menuOptions","hasMultiColumnHeaders","initCallback","openCallback","closeCallback","sortHandler","filterHandler","compare","forceUnique","checkSource","owner","filtering","kendoColumnMenu","_filterable","columnFilterable","filterInit","filterOpen","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","suggestDataSource","operators","customDataSource","cellOptions","_updateHeader","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","initialColumns","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","checkBox","parentGrid","getKendoGrid","isSelecting","_tmpl","alt","skipGroupCells","paramName","fieldAttr","dirtyCellTemplate","expr","_dirtyCellTemplate","dirtyField","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","stringify","useWithBlock","_virtualCols","considerNext","widths","c","sumOfWidths","colsToRender","firstColspan","lastColspan","widthOfHiddenColumns","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","defaultTemplate","scrollableNoGridHeightStyles","templateName","rowClass","scope","fieldsMap","_emptyAggregates","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","detailRow","expanding","masterRow","ariaLabelText","ariaExpandText","toggleClass","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","trFilter","hasFilterRow","filterCellOffset","filterCells","leafColumnsCount","filtercellCells","filterRow","existingFilterRow","syncHeight","hasLockedColumns","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_rowsHtml","templates","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","_groupsState","isNew","excludeHeader","_skippedGroups","shift","groupUid","groupObject","currentGroupCount","groupCountAfterCollapse","toHide","groupToCollapse","showFooter","footerCount","relatedGroup","_getGroupByUid","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","_groupToCollapse","footersVisibility","groupsCount","groupCount","groupCountAfterExpand","toggleVisibility","pop","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_resize","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_muteAngularRebind","_restoreSelection","selectedRows","dataItemKey","cmd","_cleanupDetailItems","_angularGroupItems","_angularGroupFooterItems","flatViewLength","endlessAppend","flatView","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","currentRow","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","startingPage","draw","cont","_destructive","pageNumber","pageNum","drawing","drawDOM","clone","always","then","err","renderPage","origBody","paddingRight","_initPDFProgress","_drawPDF","exportPage","doc","_drawPDFShadow","avoidLinks","args","paperSize","Group","pb","loading","kendoProgressBar","chunkCount","plugin"],"mappings":"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","file":"kendo.grid.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/text-metrics', ['kendo.core'], f);\n}(function () {\n    (function ($) {\n        window.kendo.util = window.kendo.util || {};\n        var LRUCache = kendo.Class.extend({\n            init: function (size) {\n                this._size = size;\n                this._length = 0;\n                this._map = {};\n            },\n            put: function (key, value) {\n                var map = this._map;\n                var entry = {\n                    key: key,\n                    value: value\n                };\n                map[key] = entry;\n                if (!this._head) {\n                    this._head = this._tail = entry;\n                } else {\n                    this._tail.newer = entry;\n                    entry.older = this._tail;\n                    this._tail = entry;\n                }\n                if (this._length >= this._size) {\n                    map[this._head.key] = null;\n                    this._head = this._head.newer;\n                    this._head.older = null;\n                } else {\n                    this._length++;\n                }\n            },\n            get: function (key) {\n                var entry = this._map[key];\n                if (entry) {\n                    if (entry === this._head && entry !== this._tail) {\n                        this._head = entry.newer;\n                        this._head.older = null;\n                    }\n                    if (entry !== this._tail) {\n                        if (entry.older) {\n                            entry.older.newer = entry.newer;\n                            entry.newer.older = entry.older;\n                        }\n                        entry.older = this._tail;\n                        entry.newer = null;\n                        this._tail.newer = entry;\n                        this._tail = entry;\n                    }\n                    return entry.value;\n                }\n            }\n        });\n        var REPLACE_REGEX = /\\r?\\n|\\r|\\t/g;\n        var SPACE = ' ';\n        function normalizeText(text) {\n            return String(text).replace(REPLACE_REGEX, SPACE);\n        }\n        function objectKey(object) {\n            var parts = [];\n            for (var key in object) {\n                parts.push(key + object[key]);\n            }\n            return parts.sort().join('');\n        }\n        function hashKey(str) {\n            var hash = 2166136261;\n            for (var i = 0; i < str.length; ++i) {\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n                hash ^= str.charCodeAt(i);\n            }\n            return hash >>> 0;\n        }\n        function zeroSize() {\n            return {\n                width: 0,\n                height: 0,\n                baseline: 0\n            };\n        }\n        var DEFAULT_OPTIONS = { baselineMarkerSize: 1 };\n        var defaultMeasureBox;\n        if (typeof document !== 'undefined') {\n            defaultMeasureBox = document.createElement('div');\n            defaultMeasureBox.style.cssText = 'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: pre!important;';\n        }\n        var TextMetrics = kendo.Class.extend({\n            init: function (options) {\n                this._cache = new LRUCache(1000);\n                this.options = $.extend({}, DEFAULT_OPTIONS, options);\n            },\n            measure: function (text, style, options) {\n                if (options === void 0) {\n                    options = {};\n                }\n                if (!text) {\n                    return zeroSize();\n                }\n                var styleKey = objectKey(style);\n                var cacheKey = hashKey(text + styleKey);\n                var cachedResult = this._cache.get(cacheKey);\n                if (cachedResult) {\n                    return cachedResult;\n                }\n                var size = zeroSize();\n                var measureBox = options.box || defaultMeasureBox;\n                var baselineMarker = this._baselineMarker().cloneNode(false);\n                for (var key in style) {\n                    var value = style[key];\n                    if (typeof value !== 'undefined') {\n                        measureBox.style[key] = value;\n                    }\n                }\n                var textStr = options.normalizeText !== false ? normalizeText(text) : String(text);\n                measureBox.textContent = textStr;\n                measureBox.appendChild(baselineMarker);\n                document.body.appendChild(measureBox);\n                if (textStr.length) {\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n                    size.height = measureBox.offsetHeight;\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n                }\n                if (size.width > 0 && size.height > 0) {\n                    this._cache.put(cacheKey, size);\n                }\n                measureBox.parentNode.removeChild(measureBox);\n                return size;\n            },\n            _baselineMarker: function () {\n                var marker = document.createElement('div');\n                marker.style.cssText = 'display: inline-block; vertical-align: baseline;width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;overflow: hidden;';\n                return marker;\n            }\n        });\n        TextMetrics.current = new TextMetrics();\n        function measureText(text, style, measureBox) {\n            return TextMetrics.current.measure(text, style, measureBox);\n        }\n        kendo.deepExtend(kendo.util, {\n            LRUCache: LRUCache,\n            TextMetrics: TextMetrics,\n            measureText: measureText,\n            objectKey: objectKey,\n            hashKey: hashKey,\n            normalizeText: normalizeText\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.grid', [\n        'kendo.data',\n        'kendo.columnsorter',\n        'kendo.editable',\n        'kendo.window',\n        'kendo.filtermenu',\n        'kendo.columnmenu',\n        'kendo.groupable',\n        'kendo.pager',\n        'kendo.selectable',\n        'kendo.sortable',\n        'kendo.reorderable',\n        'kendo.resizable',\n        'kendo.ooxml',\n        'kendo.excel',\n        'kendo.pane',\n        'kendo.progressbar',\n        'kendo.pdf',\n        'kendo.dialog',\n        'kendo.pane',\n        'kendo.switch'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'grid',\n        name: 'Grid',\n        category: 'web',\n        description: 'The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.',\n        depends: [\n            'data',\n            'columnsorter',\n            'sortable'\n        ],\n        features: [\n            {\n                id: 'grid-editing',\n                name: 'Editing',\n                description: 'Support for record editing',\n                depends: [\n                    'editable',\n                    'window'\n                ]\n            },\n            {\n                id: 'grid-filtering',\n                name: 'Filtering',\n                description: 'Support for record filtering',\n                depends: ['filtermenu']\n            },\n            {\n                id: 'grid-columnmenu',\n                name: 'Column menu',\n                description: 'Support for header column menu',\n                depends: ['columnmenu']\n            },\n            {\n                id: 'grid-grouping',\n                name: 'Grouping',\n                description: 'Support for grid grouping',\n                depends: ['groupable']\n            },\n            {\n                id: 'grid-filtercell',\n                name: 'Row filter',\n                description: 'Support for grid header filtering',\n                depends: ['filtercell']\n            },\n            {\n                id: 'grid-paging',\n                name: 'Paging',\n                description: 'Support for grid paging',\n                depends: ['pager']\n            },\n            {\n                id: 'grid-selection',\n                name: 'Selection',\n                description: 'Support for row selection',\n                depends: ['selectable']\n            },\n            {\n                id: 'grid-column-reorder',\n                name: 'Column reordering',\n                description: 'Support for column reordering',\n                depends: ['reorderable']\n            },\n            {\n                id: 'grid-column-resize',\n                name: 'Column resizing',\n                description: 'Support for column resizing',\n                depends: ['resizable']\n            },\n            {\n                id: 'grid-mobile',\n                name: 'Grid adaptive rendering',\n                description: 'Support for adaptive rendering',\n                depends: [\n                    'dialog',\n                    'pane',\n                    'switch'\n                ]\n            },\n            {\n                id: 'grid-excel-export',\n                name: 'Excel export',\n                description: 'Export grid data as Excel spreadsheet',\n                depends: ['excel']\n            },\n            {\n                id: 'grid-pdf-export',\n                name: 'PDF export',\n                description: 'Export grid data as PDF',\n                depends: [\n                    'pdf',\n                    'drawing',\n                    'progressbar'\n                ]\n            }\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, DataSource = kendo.data.DataSource, ObservableObject = kendo.data.ObservableObject, tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml, activeElement = kendo._activeElement, Widget = ui.Widget, outerWidth = kendo._outerWidth, outerHeight = kendo._outerHeight, keys = kendo.keys, isPlainObject = $.isPlainObject, extend = $.extend, map = $.map, grep = $.grep, isArray = $.isArray, inArray = $.inArray, push = Array.prototype.push, proxy = $.proxy, isFunction = kendo.isFunction, isEmptyObject = $.isEmptyObject, contains = $.contains, math = Math, DOT = '.', PROGRESS = 'progress', ERROR = 'error', HIERARCHY_CELL_CLASS = 'k-hierarchy-cell', DATA_CELL = ':not(.k-group-cell):not([' + kendo.attr('virtual') + ']):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible', SELECTION_CELL_SELECTOR = 'tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)', NAVROW = 'tr:not(.k-footer-template):visible', NAVCELL = ':not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible', ITEMROW = 'tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible', FIRSTITEMROW = ITEMROW + ':first', LASTITEMROW = ITEMROW + ':last', FIRSTNAVITEM = NAVROW + ':first>' + NAVCELL + ':first', HEADERCELLS = 'th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)', NS = '.kendoGrid', CONTENTRLOCKEDCONTAINER = 'k-grid-content-locked', GROUPCELLCLASS = 'k-group-cell', EDIT = 'edit', BEFOREEDIT = 'beforeEdit', SAVE = 'save', REMOVE = 'remove', DETAILINIT = 'detailInit', FILTERMENUINIT = 'filterMenuInit', COLUMNMENUINIT = 'columnMenuInit', FILTERMENUOPEN = 'filterMenuOpen', COLUMNMENUOPEN = 'columnMenuOpen', CELLCLOSE = 'cellClose', CHANGE = 'change', COLUMNHIDE = 'columnHide', COLUMNSHOW = 'columnShow', SAVECHANGES = 'saveChanges', DATABOUND = 'dataBound', DETAILEXPAND = 'detailExpand', DETAILCOLLAPSE = 'detailCollapse', ITEM_CHANGE = 'itemchange', PAGE = 'page', PAGING = 'paging', SCROLL = 'scroll', SYNC = 'sync', FOCUSED = 'k-state-focused', FOCUSABLE = ':kendoFocusable', SELECTED = 'k-state-selected', CHECKBOX = 'k-checkbox', CHECKBOXINPUT = 'input[data-role=\\'checkbox\\'].' + CHECKBOX, NORECORDSCLASS = 'k-grid-norecords', LINK_CLASS = 'k-link', ICON_CLASS = 'k-icon', ORDER_CLASS = 'k-sort-order', HEADER_COLUMN_MENU_CLASS = 'k-header-column-menu', FILTER_MENU_CLASS = 'k-grid-filter', RESIZE = 'resize', COLUMNRESIZE = 'columnResize', COLUMNREORDER = 'columnReorder', COLUMNLOCK = 'columnLock', COLUMNUNLOCK = 'columnUnlock', NAVIGATE = 'navigate', CLICK = 'click', MOUSEDOWN = 'mousedown', HEIGHT = 'height', TABINDEX = 'tabIndex', FUNCTION = 'function', STRING = 'string', BOTTOM = 'bottom', CONTAINER_FOR = 'container-for', FIELD = 'field', INPUT = 'input', INCELL = 'incell', INLINE = 'inline', UNIQUE_ID = 'uid', MINCOLSPANVALUE = 1, COLSPAN = 'colSpan', OVERFLOW = 'overflow', HIDDEN = 'hidden', SORT = 'sort', GROUP_SORT = 'group-sort', DELETECONFIRM = 'Are you sure you want to delete this record?', NORECORDS = 'No records available.', CONFIRMDELETE = 'Delete', CANCELDELETE = 'Cancel', COLLAPSE = 'Collapse', EXPAND = 'Expand', ARIALABEL = 'aria-label', formatRegExp = /(\\}|\\#)/gi, templateHashRegExp = /#/gi, whitespaceRegExp = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', nonDataCellsRegExp = new RegExp('(^|' + whitespaceRegExp + ')' + '(k-group-cell|k-hierarchy-cell)' + '(' + whitespaceRegExp + '|$)'), filterRowRegExp = new RegExp('(^|' + whitespaceRegExp + ')' + '(k-filter-row)' + '(' + whitespaceRegExp + '|$)'), COMMANDBUTTONTMPL = '# if (iconClass) {#' + '<a role=\"button\" class=\"k-button k-button-icontext #=className#\" #=attr# href=\"\\\\#\"><span class=\"#=iconClass#\"></span>#=text#</a>' + '# } else { #' + '<a role=\"button\" class=\"k-button k-button-icontext #=className#\" #=attr# href=\"\\\\#\">#=text#</a>' + '# } #', SELECTCOLUMNTMPL = '<input class=\"' + CHECKBOX + '\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\">', SELECTCOLUMNHEADERTMPL = '<input class=\"' + CHECKBOX + '\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\">', isRtl = false, browser = kendo.support.browser, isIE7 = browser.msie && browser.version == 7, isIE8 = browser.msie && browser.version == 8;\n        var isIE11 = browser.msie && browser.version === 11;\n        var isMac = /Mac OS/.test(navigator.userAgent);\n        var classNames = {\n            content: 'k-content',\n            widget: 'k-widget',\n            scrollContainer: 'k-scroll-container'\n        };\n        var GroupsPager = ui.Pager.extend({\n            init: function (element, options) {\n                ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                this.dataSource.options.useRanges = true;\n                this.dataSource._omitPrefetch = true;\n            },\n            options: { name: 'GroupsPager' },\n            totalPages: function () {\n                var that = this;\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _collapsedTotal: function () {\n                var dataSource = this.dataSource;\n                return dataSource ? dataSource.groupsTotal(true) || 0 : 0;\n            }\n        });\n        var VirtualScrollable = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                that._refreshHandler = proxy(that.refresh, that);\n                that.setDataSource(options.dataSource);\n                that.wrap();\n            },\n            setDataSource: function (dataSource) {\n                var that = this;\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n                that.dataSource = dataSource;\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n                that.dataSource.options.useRanges = true;\n            },\n            options: {\n                name: 'VirtualScrollable',\n                itemHeight: $.noop,\n                prefetch: true,\n                maxScrollHeight: 250000\n            },\n            events: [\n                PAGING,\n                PAGE,\n                SCROLL\n            ],\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(that);\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.wrapper.add(that.verticalScrollbar).off(NS);\n                clearTimeout(that._timeout);\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n                if (that.drag) {\n                    that.drag.destroy();\n                    that.drag = null;\n                }\n                that.wrapper = that.element = that.verticalScrollbar = null;\n                that._refreshHandler = null;\n            },\n            wrap: function () {\n                var that = this, scrollbar = kendo.support.scrollbar() + 1, element = that.element, wrapper;\n                element.css({\n                    width: 'auto',\n                    overflow: 'hidden'\n                }).css(isRtl ? 'padding-left' : 'padding-right', scrollbar);\n                that.content = element.children().first();\n                wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>').parent().bind('DOMMouseScroll' + NS + ' mousewheel' + NS, proxy(that._wheelScroll, that));\n                that._wrapper();\n                if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                    that.wrapper.css('touch-action', 'none');\n                    that.drag = new kendo.UserEvents(that.wrapper, {\n                        global: true,\n                        allowSelection: true,\n                        start: function (e) {\n                            e.sender.capture();\n                        },\n                        move: function (e) {\n                            that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                            wrapper.scrollLeft(wrapper.scrollLeft() - e.x.delta);\n                            e.preventDefault();\n                        }\n                    });\n                }\n                that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />').css({ width: scrollbar }).appendTo(element).bind('scroll' + NS, proxy(that._scroll, that));\n            },\n            _wrapper: function () {\n                var that = this;\n                if (isIE11) {\n                    that.wrapper.css({ 'overflow-y': SCROLL });\n                    that.element.css(isRtl ? 'padding-left' : 'padding-right', 0);\n                }\n            },\n            _wheelScroll: function (e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n                var scrollbar = this.verticalScrollbar, scrollTop = scrollbar.scrollTop(), delta = kendo.wheelDeltaY(e);\n                if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                    e.preventDefault();\n                    this.verticalScrollbar.scrollTop(scrollTop + -delta);\n                }\n            },\n            _scroll: function (e) {\n                var that = this, delayLoading = !that.options.prefetch, scrollTop = e.currentTarget.scrollTop, dataSource = that.dataSource, rowHeight = that.itemHeight, skip = dataSource.skip() || 0, start = that._rangeStart || skip, height = that.element.innerHeight(), isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop), firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0), lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight), lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n                if (that._preventScroll) {\n                    that._preventScroll = false;\n                    return;\n                }\n                that._prevScrollTop = that._scrollTop;\n                that._scrollTop = scrollTop - start * rowHeight;\n                that._scrollbarTop = scrollTop;\n                that._scrolling = delayLoading;\n                if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                    that.wrapper[0].scrollTop = that._scrollTop;\n                }\n                that.trigger(SCROLL);\n                if (delayLoading) {\n                    if (that._scrollingTimeout) {\n                        clearTimeout(that._scrollingTimeout);\n                    }\n                    that._scrollingTimeout = setTimeout(function () {\n                        that._scrolling = false;\n                        that._page(that._rangeStart, that.dataSource.take());\n                    }, 100);\n                }\n            },\n            scrollToTop: function () {\n                this._scrollTo(0);\n            },\n            scrollToBottom: function () {\n                var scrollbar = this.verticalScrollbar;\n                this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n            },\n            _scrollWrapperToTop: function () {\n                this.wrapper.scrollTop(0);\n            },\n            _scrollWrapperToBottom: function () {\n                this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n            },\n            _scrollWrapperOnColumnResize: function () {\n                var that = this;\n                var wrapper = this.wrapper;\n                var initialScrollTop = wrapper.scrollTop();\n                if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                    if (!that._wrapperScrolled && initialScrollTop || that._isScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                        that._wrapperScrolled = true;\n                    }\n                } else if (that._wrapperScrolled) {\n                    if (!that._isWrapperScrolledToBottom()) {\n                        wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                        that._scrollTop = wrapper.scrollTop();\n                    }\n                    that._wrapperScrolled = false;\n                }\n            },\n            _scrollTo: function (scrollTop) {\n                var that = this;\n                var scrollbar = that.verticalScrollbar;\n                if (scrollbar.scrollTop() !== scrollTop) {\n                    that._preventScroll = true;\n                }\n                that.wrapper.scrollTop(scrollTop);\n                that._scrollTop = that.wrapper.scrollTop();\n                scrollbar.scrollTop(scrollTop);\n                that._scrollbarTop = scrollbar.scrollTop();\n            },\n            _isScrolledToTop: function () {\n                return this.verticalScrollbar.scrollTop() === 0;\n            },\n            _isScrolledToBottom: function () {\n                var scrollbar = this.verticalScrollbar;\n                var scrollTop = scrollbar.scrollTop();\n                return scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10);\n            },\n            _isWrapperScrolledToBottom: function () {\n                var wrapper = this.wrapper;\n                return wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10);\n            },\n            itemIndex: function (rowIndex) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                return rangeStart + rowIndex;\n            },\n            position: function (index) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                var pageSize = this.dataSource.pageSize();\n                var result;\n                if (index > rangeStart) {\n                    result = index - rangeStart;\n                } else {\n                    result = rangeStart - index - 1;\n                }\n                return result > pageSize ? pageSize : result;\n            },\n            scrollIntoView: function (row) {\n                var container = this.wrapper[0];\n                var containerHeight = container.clientHeight;\n                var containerScroll = !this._isScrolledToBottom() ? this._scrollTop || container.scrollTop : container.scrollTop;\n                var elementOffset = row[0].offsetTop;\n                var elementHeight = row[0].offsetHeight;\n                if (containerScroll > elementOffset) {\n                    this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n                } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                    this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n                }\n            },\n            _fetch: function (firstItemIndex, lastItemIndex, scrollingUp) {\n                var that = this, dataSource = that.dataSource, itemHeight = that.itemHeight, take = dataSource.take(), rangeStart = that._rangeStart || dataSource.skip() || 0, currentSkip = math.floor(firstItemIndex / take) * take, fetching = false, prefetchAt = 0.33;\n                var scrollbar = that.verticalScrollbar;\n                var webkitCorrection = browser.webkit ? 1 : 0;\n                var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n                if (firstItemIndex < rangeStart) {\n                    fetching = true;\n                    rangeStart = math.max(0, lastItemIndex - take);\n                    that._scrollTop = scrollbar.scrollTop() - rangeStart * itemHeight;\n                    that._page(rangeStart, take);\n                } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n                    fetching = true;\n                    rangeStart = math.min(firstItemIndex, total - take);\n                    if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                    } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                        that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                    } else {\n                        that._scrollTop = itemHeight;\n                    }\n                    that._page(rangeStart, take);\n                } else if (!that._fetching && that.options.prefetch) {\n                    if (firstItemIndex < currentSkip + take - take * prefetchAt && firstItemIndex > take) {\n                        dataSource.prefetch(currentSkip - take, take, $.noop);\n                    }\n                    if (lastItemIndex > currentSkip + take * prefetchAt) {\n                        dataSource.prefetch(currentSkip + take, take, $.noop);\n                    }\n                }\n                return fetching;\n            },\n            fetching: function () {\n                return this._fetching;\n            },\n            _page: function (skip, take, callback) {\n                var that = this, delayLoading = !that.options.prefetch, dataSource = that.dataSource, isGroupPaged = dataSource._isGroupPaged();\n                callback = isFunction(callback) ? callback : $.noop;\n                if (that.trigger(PAGING, {\n                        skip: skip,\n                        take: take\n                    })) {\n                    return;\n                }\n                clearTimeout(that._timeout);\n                that._fetching = true;\n                that._rangeStart = skip;\n                if (isGroupPaged && dataSource._groupRangeExists() || !isGroupPaged && dataSource.inRange(skip, take)) {\n                    kendo.ui.progress($(that.wrapper).parent(), true);\n                    dataSource.range(skip, take, function () {\n                        kendo.ui.progress($(that.wrapper).parent(), false);\n                        callback();\n                        that.trigger(PAGE);\n                    }, 'page');\n                } else {\n                    if (!delayLoading) {\n                        kendo.ui.progress(that.wrapper.parent(), true);\n                    }\n                    that._timeout = setTimeout(function () {\n                        if (!that._scrolling) {\n                            if (delayLoading) {\n                                kendo.ui.progress(that.wrapper.parent(), true);\n                            }\n                            dataSource.range(skip, take, function () {\n                                kendo.ui.progress(that.wrapper.parent(), false);\n                                callback();\n                                that.trigger(PAGE);\n                            });\n                        }\n                    }, 100);\n                }\n            },\n            repaintScrollbar: function (shouldScrollWrapper) {\n                var that = this, html = '', maxHeight = that.options.maxScrollHeight, dataSource = that.dataSource, scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0, wrapperElement = that.wrapper[0], totalHeight, idx, itemHeight;\n                var wasScrolledToBottom = that._isScrolledToBottom();\n                itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n                var addScrollBarHeight = wrapperElement.scrollWidth > wrapperElement.offsetWidth ? scrollbar : 0;\n                totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n                for (idx = 0; idx < math.floor(totalHeight / maxHeight); idx++) {\n                    html += '<div style=\"width:1px;height:' + maxHeight + 'px\"></div>';\n                }\n                if (totalHeight % maxHeight) {\n                    html += '<div style=\"width:1px;height:' + totalHeight % maxHeight + 'px\"></div>';\n                }\n                that.verticalScrollbar.html(html);\n                if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                    that.scrollToBottom();\n                }\n                if (typeof that._scrollTop !== 'undefined' && !!shouldScrollWrapper) {\n                    wrapperElement.scrollTop = that._scrollTop;\n                    that._scrollWrapperOnColumnResize();\n                }\n            },\n            refresh: function (e) {\n                var that = this, dataSource = that.dataSource, rangeStart = that._rangeStart;\n                var action = (e || {}).action;\n                var shouldScrollWrapper = that._isScrolledToBottom() || !action || action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC;\n                kendo.ui.progress(that.wrapper.parent(), false);\n                clearTimeout(that._timeout);\n                that.repaintScrollbar(shouldScrollWrapper);\n                if (that.drag) {\n                    that.drag.cancel();\n                }\n                if (typeof rangeStart !== 'undefined' && !that._fetching) {\n                    if (!action || action !== SYNC && action !== ITEM_CHANGE && action !== 'expandGroup') {\n                        that._rangeStart = dataSource.skip();\n                    }\n                    if (dataSource.page() === 1 && (!action || action !== SYNC && action !== ITEM_CHANGE && action !== 'expandGroup' && action !== 'collapseGroup')) {\n                        that.verticalScrollbar[0].scrollTop = 0;\n                    }\n                }\n                that._fetching = false;\n            }\n        });\n        function attrEquals(attrName, attrValue) {\n            return '[' + kendo.attr(attrName) + '=' + attrValue + ']';\n        }\n        function groupCells(count) {\n            return new Array(count + 1).join('<td class=\"k-group-cell\">&nbsp;</td>');\n        }\n        function stringifyAttributes(attributes) {\n            var attr, result = ' ';\n            if (attributes) {\n                if (typeof attributes === STRING) {\n                    return attributes;\n                }\n                for (attr in attributes) {\n                    if (attributes[attr] !== '') {\n                        result += attr + '=\"' + attributes[attr] + '\"';\n                    }\n                }\n            }\n            return result;\n        }\n        var defaultCommands = {\n            create: {\n                text: 'Add new record',\n                className: 'k-grid-add',\n                iconClass: 'k-icon k-i-plus'\n            },\n            cancel: {\n                text: 'Cancel changes',\n                className: 'k-grid-cancel-changes',\n                iconClass: 'k-icon k-i-cancel'\n            },\n            save: {\n                text: 'Save changes',\n                className: 'k-grid-save-changes',\n                iconClass: 'k-icon k-i-check'\n            },\n            destroy: {\n                text: 'Delete',\n                className: 'k-grid-delete',\n                iconClass: 'k-icon k-i-close'\n            },\n            edit: {\n                text: 'Edit',\n                className: 'k-grid-edit',\n                iconClass: 'k-icon k-i-edit'\n            },\n            update: {\n                text: 'Update',\n                className: 'k-primary k-grid-update',\n                iconClass: 'k-icon k-i-check'\n            },\n            canceledit: {\n                text: 'Cancel',\n                className: 'k-grid-cancel',\n                iconClass: 'k-icon k-i-cancel'\n            },\n            excel: {\n                text: 'Export to Excel',\n                className: 'k-grid-excel',\n                iconClass: 'k-icon k-i-file-excel'\n            },\n            pdf: {\n                text: 'Export to PDF',\n                className: 'k-grid-pdf',\n                iconClass: 'k-icon k-i-file-pdf'\n            },\n            search: {\n                text: 'Search...',\n                className: 'k-grid-search'\n            }\n        };\n        function cursor(context, value) {\n            $('th, th .k-grid-filter, th .k-link', context).add(document.body).css('cursor', value);\n        }\n        function reorder(selector, source, dest, before, count) {\n            var sourceIndex = source;\n            source = $();\n            count = count || 1;\n            for (var idx = 0; idx < count; idx++) {\n                source = source.add(selector.eq(sourceIndex + idx));\n            }\n            if (typeof dest == 'number') {\n                source[before ? 'insertBefore' : 'insertAfter'](selector.eq(dest));\n            } else {\n                source.appendTo(dest);\n            }\n        }\n        function elements(lockedContent, content, filter) {\n            return $(lockedContent).add(content).find(filter);\n        }\n        function attachCustomCommandEvent(context, container, commands) {\n            var idx, length, command, commandName;\n            commands = !isArray(commands) ? [commands] : commands;\n            for (idx = 0, length = commands.length; idx < length; idx++) {\n                command = commands[idx];\n                if (isPlainObject(command) && command.click) {\n                    commandName = command.name || command.text;\n                    container.on(CLICK + NS, 'a.k-grid-' + (commandName || '').replace(/\\s/g, ''), { commandName: commandName }, proxy(command.click, context));\n                }\n            }\n        }\n        function normalizeColumns(columns, encoded, hide, parentIds) {\n            return map(columns, function (column) {\n                column = typeof column === STRING ? { field: column } : column;\n                var hidden;\n                column.parentIds = parentIds;\n                if (!isVisible(column) || hide) {\n                    column.attributes = addHiddenStyle(column.attributes);\n                    column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                    column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                    hidden = true;\n                }\n                var uid = kendo.guid();\n                column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n                if (!column.headerAttributes.id) {\n                    column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                } else {\n                    uid = column.headerAttributes.id;\n                }\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, encoded, hidden, parentIds ? parentIds + ' ' + uid : uid);\n                }\n                return extend({\n                    encoded: encoded,\n                    hidden: hidden\n                }, column);\n            });\n        }\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n        function setColumnVisibility(column, visible) {\n            setVisibility(column, visible, visible);\n        }\n        function setVisibility(column, visible, show) {\n            var method = show ? removeHiddenStyle : addHiddenStyle;\n            column.hidden = !visible;\n            column.attributes = method(column.attributes);\n            column.footerAttributes = method(column.footerAttributes);\n            column.headerAttributes = method(column.headerAttributes);\n        }\n        function setColumnMediaVisibility(column, visible) {\n            setColumnMatchesMedia(column);\n            var hideByMedia = column._hideByMedia;\n            setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n        }\n        function setColumnMatchesMedia(column) {\n            column.matchesMedia = columnMatchesMedia(column);\n        }\n        function columnMatchesMedia(column) {\n            return column && (isUndefined(column.media) || !isUndefined(column.media) && kendo.matchesMedia(column.media));\n        }\n        function isCellVisible() {\n            return this.style.display !== 'none';\n        }\n        function isElementVisible(element) {\n            return $(element)[0].style.display !== 'none';\n        }\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n        function visibleColumns(columns) {\n            return grep(columns, function (column) {\n                var result = !column.hidden && column.matchesMedia !== false;\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n        function columnsWithMedia(columns) {\n            var result = [];\n            var column;\n            for (var i = 0; i < columns.length; i++) {\n                column = columns[i];\n                if (!isUndefined(column.media)) {\n                    if (!isUndefined(column.minScreenWidth)) {\n                        throw new Error('Using \\'media\\' and \\'minScreenWidth\\' options at the same time is not supported.');\n                    }\n                    result.push(column);\n                }\n                if (column.columns) {\n                    result = result.concat(columnsWithMedia(column.columns));\n                }\n            }\n            return result;\n        }\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        function toJQuery(elements) {\n            return $(elements).map(function () {\n                return this.toArray();\n            });\n        }\n        function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n            var lockedColumnDepth = depth(lockedColumns(columns));\n            var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n            var rowSpan = cell.rowSpan;\n            if (sourceLockedColumnsCount) {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan - (lockedColumnDepth - nonLockedColumnDepth) || 1;\n                } else {\n                    cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n                }\n            } else {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n                } else {\n                    cell.rowSpan = rowSpan - (nonLockedColumnDepth - lockedColumnDepth) || 1;\n                }\n            }\n        }\n        function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n            var sourcesDepth = depth(sources);\n            var targetDepth = depth([target]);\n            if (sourcesDepth > targetDepth) {\n                var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>');\n                var rows = destination.children(':not(.k-filter-row)');\n                $(new Array(sourcesDepth - targetDepth + 1).join('<tr>' + groupCells + '</tr>')).insertAfter(rows.last());\n            }\n            addRowSpanValue(destination, sourcesDepth - targetDepth);\n            moveCells(leafs, columns, container, destination, action);\n        }\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n            var cells = {};\n            var rows = thead.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row).find('.k-header').filter(filter);\n                }\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr('index'), offset + idx);\n            }\n            return columns.length;\n        }\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n        function moveCells(leafs, columns, container, destination, action) {\n            var sourcePosition = columnVisiblePosition(leafs[0], columns);\n            var ths = container.find('>tr:not(.k-filter-row):eq(' + sourcePosition.row + ')>th.k-header');\n            var t = $();\n            var sourceIndex = sourcePosition.cell;\n            var idx;\n            for (idx = 0; idx < leafs.length; idx++) {\n                t = t.add(ths.eq(sourceIndex + idx));\n            }\n            destination.find('>tr:not(.k-filter-row)').eq(sourcePosition.row)[action](t);\n            var children = [];\n            for (idx = 0; idx < leafs.length; idx++) {\n                if (leafs[idx].columns) {\n                    children = children.concat(leafs[idx].columns);\n                }\n            }\n            if (children.length) {\n                moveCells(children, columns, container, destination, action);\n            }\n        }\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n            for (idx = 0; idx < columns.length; idx++) {\n                if (columns[idx] == column) {\n                    result = {\n                        cell: cellCounts[row],\n                        row: row\n                    };\n                    break;\n                } else if (columns[idx].columns) {\n                    result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                    if (result) {\n                        break;\n                    }\n                }\n                cellCounts[row]++;\n            }\n            return result;\n        }\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = !!source.locked;\n            var targetLocked;\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n                targetLocked = !!target.locked;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n            return target;\n        }\n        function findReorderTarget(columns, target, source, before, masterColumns) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before) {\n                    index++;\n                } else if (index == parentColumns.length - 1 && !before || !source.locked && !target.columns && !before) {\n                    index--;\n                } else if (index > 0 || index === 0 && !before) {\n                    index++;\n                }\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                var targetIndex = inArray(target, masterColumns);\n                if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                    return null;\n                }\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before, masterColumns);\n                }\n            }\n            return null;\n        }\n        function columnVisiblePosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n            for (idx = 0; idx < columns.length; idx++) {\n                if (columns[idx] == column) {\n                    result = {\n                        cell: cellCounts[row],\n                        row: row\n                    };\n                    break;\n                } else if (columns[idx].columns) {\n                    result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n                    if (result) {\n                        break;\n                    }\n                }\n                if (!columns[idx].hidden) {\n                    cellCounts[row]++;\n                }\n            }\n            return result;\n        }\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n        function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n            var column = flatColumns[sourceIndex];\n            var target = flatColumns[targetIndex];\n            var parent = columnParent(column, columns);\n            columns = parent ? parent.columns : columns;\n            return inArray(target, columns);\n        }\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n        function hiddenLeafColumnsCount(columns) {\n            var counter = 0;\n            var column;\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.columns) {\n                    counter += hiddenLeafColumnsCount(column.columns);\n                } else if (column.hidden) {\n                    counter++;\n                }\n            }\n            return counter;\n        }\n        function sumWidths(cols) {\n            var width = 0;\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                if (!cols[idx].hidden) {\n                    width += parseInt(cols[idx].width, 10);\n                }\n            }\n            return width;\n        }\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf('%') == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n            return width;\n        }\n        function removeRowSpanValue(container, count) {\n            var cells = container.find('tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)');\n            var rowSpan;\n            for (var idx = 0; idx < cells.length; idx++) {\n                rowSpan = cells[idx].rowSpan;\n                if (rowSpan > 1) {\n                    cells[idx].rowSpan = rowSpan - count || 1;\n                }\n            }\n        }\n        function addRowSpanValue(container, count) {\n            var cells = container.find('tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)');\n            for (var idx = 0; idx < cells.length; idx++) {\n                cells[idx].rowSpan += count;\n            }\n        }\n        function removeEmptyRows(container) {\n            var rows = container.find('tr:not(.k-filter-row)');\n            var emptyRowsCount = rows.filter(function () {\n                return !$(this).children().length;\n            }).remove().length;\n            var cells = rows.find('th:not(.k-group-cell,.k-hierarchy-cell)');\n            for (var idx = 0; idx < cells.length; idx++) {\n                if (cells[idx].rowSpan > 1) {\n                    cells[idx].rowSpan -= emptyRowsCount;\n                }\n            }\n            return rows.length - emptyRowsCount;\n        }\n        function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n            var idx, row, length, children = [];\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                row = rows[rowIndex] || [];\n                row.push(cells.eq(offset + idx));\n                rows[rowIndex] = row;\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n            if (children.length) {\n                mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n            }\n        }\n        function lockedColumns(columns) {\n            return grep(columns, function (column) {\n                return column.locked;\n            });\n        }\n        function nonLockedColumns(columns) {\n            return grep(columns, function (column) {\n                return !column.locked;\n            });\n        }\n        function visibleNonLockedColumns(columns) {\n            return grep(columns, function (column) {\n                return !column.locked && isVisible(column);\n            });\n        }\n        function visibleLockedColumns(columns) {\n            return grep(columns, function (column) {\n                return column.locked && isVisible(column);\n            });\n        }\n        function visibleLeafColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push(columns[idx]);\n                }\n            }\n            return result;\n        }\n        function childColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    result = result.concat(columns[idx].columns);\n                }\n            }\n            return result;\n        }\n        function leafColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n            return result;\n        }\n        function getColumnsFields(columns) {\n            var result = [];\n            columns = leafColumns(columns);\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (typeof columns[idx] === 'string') {\n                    result.push(columns[idx]);\n                } else if (columns[idx].field) {\n                    result.push(columns[idx].field);\n                }\n            }\n            return result;\n        }\n        function leafDataCells(container) {\n            var rows = container.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find('th').filter(filter).filter(function () {\n                    return this.rowSpan > 1;\n                });\n            }\n            cells = cells.add(rows.last().find('th').filter(filter));\n            var indexAttr = kendo.attr('index');\n            cells.sort(function (a, b) {\n                a = $(a);\n                b = $(b);\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n                if (indexA === undefined) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined) {\n                    indexB = $(b).index();\n                }\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : indexA < indexB ? -1 : 0;\n            });\n            return cells;\n        }\n        function parentColumnsCells(cell) {\n            var container = cell.closest('table');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr:not(.k-filter-row)');\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find('th:not(.k-group-cell,.k-hierarchy-cell)').filter(function () {\n                    return !$(this).attr('rowspan');\n                });\n                var offset = 0;\n                var index = row.find('th:not(.k-group-cell,.k-hierarchy-cell)').index(cell);\n                var prevCells = cell.prevAll(':not(.k-group-cell,.k-hierarchy-cell)').filter(function () {\n                    return this.colSpan > 1;\n                });\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n                index += Math.max(offset - 1, 0);\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr('data-colspan')) {\n                        offset += parentCell[0].getAttribute('data-colspan');\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n        function childColumnsCells(cell) {\n            var container = cell.closest('thead');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr:not(.k-filter-row)');\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr('colspan');\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll(':not(.k-group-cell,.k-hierarchy-cell)');\n                var idx;\n                prevCells = prevCells.filter(function () {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n                var offset = 0;\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n                var cells = child.find('th:not(.k-group-cell,.k-hierarchy-cell)');\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n                idx = 0;\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n            return result;\n        }\n        function appendContent(tbody, table, html, empty) {\n            var placeholder, tmp = tbody;\n            if (empty) {\n                tbody.empty();\n            }\n            if (tbodySupportsInnerHtml) {\n                tbody[0].innerHTML = html;\n            } else {\n                placeholder = document.createElement('div');\n                placeholder.innerHTML = '<table><tbody>' + html + '</tbody></table>';\n                tbody = placeholder.firstChild.firstChild;\n                table[0].replaceChild(tbody, tmp[0]);\n                tbody = $(tbody);\n            }\n            return tbody;\n        }\n        function addHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style;\n            if (!style) {\n                style = 'display:none';\n            } else {\n                style = style.replace(/display:[^;]*/i, 'display:none');\n                if (!style.match(/display:/i)) {\n                    style = style.replace(/(.*)?/i, 'display:none;$1');\n                }\n            }\n            return extend({}, attr, { style: style });\n        }\n        function hasHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style || '';\n            return style.indexOf('display:none') !== -1;\n        }\n        function removeHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style;\n            if (style) {\n                attr.style = style.replace(/(display\\s*:\\s*none\\s*;?)*/gi, '');\n            }\n            return attr;\n        }\n        function normalizeCols(table, visibleColumns, hasDetails, groups) {\n            var colgroup = table.find('>colgroup'), width, cols = map(visibleColumns, function (column) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}\"/>', typeof width === STRING ? width : width + 'px');\n                    }\n                    return '<col />';\n                });\n            if (hasDetails || colgroup.find('.k-hierarchy-col').length) {\n                cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n            }\n            if (colgroup.length) {\n                colgroup.remove();\n            }\n            colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(''));\n            if (!colgroup.is('colgroup')) {\n                colgroup = $('<colgroup/>').append(colgroup);\n            }\n            table.prepend(colgroup);\n            if (browser.msie && browser.version == 8) {\n                table.css('display', 'inline-table');\n                window.setTimeout(function () {\n                    table.css('display', '');\n                }, 1);\n            }\n        }\n        function normalizeHeaderCells(container, columns) {\n            var lastIndex = 0;\n            var idx, len;\n            var th = container.find('th:not(.k-group-cell)');\n            for (idx = 0, len = columns.length; idx < len; idx++) {\n                if (columns[idx].locked) {\n                    th.eq(idx).insertBefore(th.eq(lastIndex));\n                    th = container.find('th:not(.k-group-cell)');\n                    lastIndex++;\n                }\n            }\n        }\n        function convertToObject(array) {\n            var result = {}, item, idx, length;\n            for (idx = 0, length = array.length; idx < length; idx++) {\n                item = array[idx];\n                result[item.value] = item.text;\n            }\n            return result;\n        }\n        function formatGroupValue(value, format, columnValues, encoded) {\n            var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && 'value' in columnValues[0], groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n            groupValue = groupValue != null ? groupValue : '';\n            return format ? kendo.format(format, groupValue) : encoded === false ? groupValue : kendo.htmlEncode(groupValue);\n        }\n        function setCellVisibility(cells, index, visible) {\n            var pad = 0, state, cell = cells[pad];\n            while (cell) {\n                state = visible ? true : cell.style.display !== 'none';\n                if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                    cell.style.display = visible ? '' : 'none';\n                    break;\n                }\n                cell = cells[++pad];\n            }\n        }\n        function hideColumnCells(rows, columnIndex) {\n            var idx = 0, length = rows.length, cell, row;\n            for (; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is('.k-grouping-row,.k-detail-row')) {\n                    cell = row.children(':not(.k-group-cell):first,.k-detail-cell').last();\n                    cell.attr('colspan', parseInt(cell.attr('colspan'), 10) - 1);\n                } else {\n                    if (row.hasClass('k-grid-edit-row') && (cell = row.children('.k-edit-container')[0])) {\n                        cell = $(cell);\n                        cell.attr('colspan', parseInt(cell.attr('colspan'), 10) - 1);\n                        cell.find('col').eq(columnIndex).remove();\n                        row = cell.find('tr:first');\n                    }\n                    setCellVisibility(row[0].cells, columnIndex, false);\n                }\n            }\n        }\n        function groupRows(data) {\n            var result = [];\n            var item;\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!('field' in item && 'value' in item && 'items' in item)) {\n                    break;\n                }\n                result.push(item);\n                if (item.hasSubgroups) {\n                    result = result.concat(groupRows(item.items));\n                }\n            }\n            return result;\n        }\n        function groupFooters(data) {\n            var result = [];\n            var item;\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!('field' in item && 'value' in item && 'items' in item)) {\n                    break;\n                }\n                if (item.hasSubgroups) {\n                    result = result.concat(groupFooters(item.items));\n                }\n                result.push(item.aggregates);\n            }\n            return result;\n        }\n        function showColumnCells(rows, columnIndex) {\n            var idx = 0, length = rows.length, cell, row, columns;\n            for (; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is('.k-grouping-row,.k-detail-row')) {\n                    cell = row.children(':not(.k-group-cell):first,.k-detail-cell').last();\n                    cell.attr('colspan', parseInt(cell.attr('colspan'), 10) + 1);\n                } else {\n                    if (row.hasClass('k-grid-edit-row') && (cell = row.children('.k-edit-container')[0])) {\n                        cell = $(cell);\n                        cell.attr('colspan', parseInt(cell.attr('colspan'), 10) + 1);\n                        normalizeCols(cell.find('>form>table'), visibleColumns(columns), false, 0);\n                        row = cell.find('tr:first');\n                    }\n                    setCellVisibility(row[0].cells, columnIndex, true);\n                }\n            }\n        }\n        function updateColspan(toAdd, toRemove, num) {\n            num = num || 1;\n            var item, idx, length;\n            for (idx = 0, length = toAdd.length; idx < length; idx++) {\n                item = toAdd.eq(idx).children().last();\n                item.attr('colspan', parseInt(item.attr('colspan'), 10) + num);\n                item = toRemove.eq(idx).children().last();\n                item.attr('colspan', parseInt(item.attr('colspan'), 10) - num);\n            }\n        }\n        function tableWidth(table) {\n            var idx, length, width = 0;\n            var cols = table.find('>colgroup>col');\n            for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                width += parseInt(cols[idx].style.width, 10);\n            }\n            return width;\n        }\n        var Grid = kendo.ui.DataBoundWidget.extend({\n            init: function (element, options, events) {\n                var that = this;\n                options = isArray(options) ? { dataSource: options } : options;\n                Widget.fn.init.call(that, element, options);\n                if (events) {\n                    that._events = events;\n                }\n                isRtl = kendo.support.isRtl(element);\n                that._element();\n                that._aria();\n                that._columns($.extend(true, [], that.options.columns));\n                that._dataSource();\n                that._tbody();\n                that._thead();\n                that._groupable();\n                that._toolbar();\n                that._pageable();\n                that._setContentHeight();\n                that._templates();\n                that._navigatable();\n                that._selectable();\n                that._clipboard();\n                that._details();\n                that._editable();\n                that._attachCustomCommandsEvent();\n                that._adaptiveColumns();\n                that._minScreenSupport();\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._group = that._groups() > 0;\n                    that._footer();\n                }\n                if (that.lockedContent) {\n                    that.wrapper.addClass('k-grid-lockedcolumns');\n                    that._resizeHandler = function () {\n                        that.resize();\n                    };\n                    $(window).on('resize' + NS, that._resizeHandler);\n                }\n                kendo.notify(that);\n            },\n            events: [\n                CHANGE,\n                'dataBinding',\n                'cancel',\n                DATABOUND,\n                DETAILEXPAND,\n                DETAILCOLLAPSE,\n                DETAILINIT,\n                FILTERMENUINIT,\n                FILTERMENUOPEN,\n                COLUMNMENUINIT,\n                COLUMNMENUOPEN,\n                EDIT,\n                BEFOREEDIT,\n                SAVE,\n                REMOVE,\n                SAVECHANGES,\n                CELLCLOSE,\n                COLUMNRESIZE,\n                COLUMNREORDER,\n                COLUMNSHOW,\n                COLUMNHIDE,\n                COLUMNLOCK,\n                COLUMNUNLOCK,\n                NAVIGATE,\n                'page',\n                'sort',\n                'filter',\n                'group',\n                'groupExpand',\n                'groupCollapse',\n                'kendoKeydown'\n            ],\n            setDataSource: function (dataSource) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                var scrollableContent;\n                that.options.dataSource = dataSource;\n                that._dataSource();\n                that._pageable();\n                that._thead();\n                if (scrollable) {\n                    if (scrollable.virtual) {\n                        scrollableContent = that.content.find('>.k-virtual-scrollable-wrap');\n                        scrollableContent.scrollLeft(leftMostPosition(scrollableContent, isRtl));\n                    } else {\n                        scrollableContent = that.tbody;\n                        that.content.scrollLeft(leftMostPosition(scrollableContent, isRtl));\n                    }\n                }\n                if (that.options.groupable) {\n                    that._groupable();\n                }\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.setDataSource(that.options.dataSource);\n                }\n                if (that.options.navigatable) {\n                    that._navigatable();\n                }\n                if (that.options.selectable) {\n                    that._selectable();\n                }\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                }\n            },\n            options: {\n                name: 'Grid',\n                columns: [],\n                toolbar: null,\n                autoBind: true,\n                filterable: false,\n                scrollable: true,\n                sortable: false,\n                selectable: false,\n                allowCopy: false,\n                navigatable: false,\n                pageable: false,\n                persistSelection: false,\n                editable: false,\n                groupable: false,\n                rowTemplate: '',\n                altRowTemplate: '',\n                search: false,\n                noRecords: false,\n                dataSource: {},\n                height: null,\n                resizable: false,\n                reorderable: false,\n                columnMenu: false,\n                detailTemplate: null,\n                columnResizeHandleWidth: 3,\n                mobile: '',\n                messages: {\n                    editable: {\n                        cancelDelete: CANCELDELETE,\n                        confirmation: DELETECONFIRM,\n                        confirmDelete: CONFIRMDELETE\n                    },\n                    commands: {\n                        create: defaultCommands.create.text,\n                        cancel: defaultCommands.cancel.text,\n                        save: defaultCommands.save.text,\n                        destroy: defaultCommands.destroy.text,\n                        edit: defaultCommands.edit.text,\n                        update: defaultCommands.update.text,\n                        canceledit: defaultCommands.canceledit.text,\n                        excel: defaultCommands.excel.text,\n                        pdf: defaultCommands.pdf.text,\n                        search: defaultCommands.search.text\n                    },\n                    noRecords: NORECORDS,\n                    expandCollapseColumnHeader: '',\n                    groupHeader: 'Press ctrl + space to group',\n                    ungroupHeader: 'Press ctrl + space to ungroup'\n                },\n                width: null\n            },\n            destroy: function () {\n                var that = this, element;\n                that._angularItems('cleanup');\n                that._destroyColumnAttachments();\n                Widget.fn.destroy.call(that);\n                if (this._navigatableTables) {\n                    this._navigatableTables.off(NS);\n                    this._navigatableTables = null;\n                }\n                if (that._resizeHandler) {\n                    $(window).off('resize' + NS, that._resizeHandler);\n                }\n                if (that.pager && that.pager.element) {\n                    that.pager.destroy();\n                }\n                if (that.timer) {\n                    clearTimeout(that.timer);\n                }\n                if (that._progressTimeOut) {\n                    clearTimeout(that._progressTimeOut);\n                }\n                if (that._collapseGroupsTimeOut) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                }\n                if (that._endlessFetchTimeOut) {\n                    clearTimeout(that._endlessFetchTimeOut);\n                }\n                that.pager = null;\n                that._destroyGroupable();\n                if (that.options.reorderable) {\n                    that.wrapper.data('kendoReorderable').destroy();\n                }\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n                    that.clearArea();\n                    that._selectedIds = null;\n                    if (that.copyHandler) {\n                        that.wrapper.off('keydown', that.copyHandler);\n                        that.unbind(that.copyHandler);\n                    }\n                    if (that.updateClipBoardState) {\n                        that.unbind(that.updateClipBoardState);\n                        that.updateClipBoardState = null;\n                    }\n                    if (that.clearAreaHandler) {\n                        that.wrapper.off('keyup', that.clearAreaHandler);\n                    }\n                }\n                that.selectable = null;\n                if (that.resizable) {\n                    that.resizable.destroy();\n                    if (that._resizeUserEvents) {\n                        if (that._resizeHandleDocumentClickHandler) {\n                            $(document).off('click', that._resizeHandleDocumentClickHandler);\n                        }\n                        that._resizeUserEvents.destroy();\n                        that._resizeUserEvents = null;\n                    }\n                    that.resizable = null;\n                }\n                that._destroyVirtualScrollable();\n                if (that.editableUserEvents) {\n                    that.editableUserEvents.destroy();\n                    that.editableUserEvents = null;\n                }\n                if (that._lockedContentUserEvents) {\n                    that._lockedContentUserEvents.destroy();\n                    that._lockedContentUserEvents = null;\n                }\n                that._destroyEditable();\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler).unbind(SORT, that._clearSortClasses);\n                    that._refreshHandler = that._progressHandler = that._errorHandler = that._clearSortClasses = null;\n                }\n                element = that.element.add(that.wrapper).add(that.table).add(that.thead).add(that.wrapper.find('>.k-grid-toolbar'));\n                if (that.content) {\n                    element = element.add(that.content).add(that.content.find('>.k-virtual-scrollable-wrap'));\n                }\n                if (that.lockedHeader) {\n                    that._removeLockedContainers();\n                }\n                if (that.pane) {\n                    that.pane.destroy();\n                }\n                if (that._isMobile) {\n                    that.wrapper.off('transitionend' + NS);\n                    that.wrapper.off('contextmenu' + NS);\n                }\n                if (that.minScreenResizeHandler) {\n                    $(window).off('resize', that.minScreenResizeHandler);\n                }\n                that._detachColumnMediaResizeHandler();\n                if (that._draggableInstance && that._draggableInstance.element) {\n                    that._draggableInstance.destroy();\n                }\n                that._draggableInstance = null;\n                element.off(NS);\n                kendo.destroy(that.wrapper);\n                that.rowTemplate = that.altRowTemplate = that.lockedRowTemplate = that.lockedAltRowTemplate = that.detailTemplate = that.footerTemplate = that.groupFooterTemplate = that.lockedGroupFooterTemplate = that.noRecordsTemplate = null;\n                that.scrollables = that.thead = that.tbody = that.element = that.table = that.content = that.footer = that.wrapper = that.lockedTable = that.lockedContent = that.lockedHeader = that.lockedFooter = that._groupableClickHandler = that._groupRows = that._setContentWidthHandler = null;\n            },\n            getOptions: function () {\n                var options = this.options;\n                options.dataSource = null;\n                var result = extend(true, {}, this.options);\n                result.columns = kendo.deepExtend([], this.columns);\n                var dataSource = this.dataSource;\n                var initialData = dataSource.options.data && dataSource._data;\n                dataSource.options.data = null;\n                result.dataSource = $.extend(true, {}, dataSource.options);\n                dataSource.options.data = initialData;\n                result.dataSource.data = initialData;\n                result.dataSource.page = dataSource.page();\n                result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n                result.dataSource.pageSize = dataSource.pageSize();\n                result.dataSource.sort = dataSource.sort();\n                result.dataSource.group = dataSource.group();\n                result.dataSource.aggregate = dataSource.aggregate();\n                if (result.dataSource.transport) {\n                    result.dataSource.transport.dataSource = null;\n                }\n                if (result.pageable && result.pageable.pageSize) {\n                    result.pageable.pageSize = dataSource.pageSize();\n                }\n                result.$angular = undefined;\n                return result;\n            },\n            setOptions: function (options) {\n                var currentOptions = this.getOptions();\n                kendo.deepExtend(currentOptions, options);\n                if (!options.dataSource) {\n                    currentOptions.dataSource = this.dataSource;\n                }\n                var wrapper = this.wrapper;\n                var events = this._events;\n                var element = this.element;\n                this.destroy();\n                this.options = null;\n                if (this._isMobile) {\n                    var mobileWrapper = wrapper.closest(kendo.roleSelector('pane')).parent();\n                    mobileWrapper.after(wrapper);\n                    mobileWrapper.remove();\n                    wrapper.removeClass('k-grid-mobile');\n                }\n                if (wrapper[0] !== element[0]) {\n                    wrapper.before(element);\n                    wrapper.remove();\n                }\n                element.empty();\n                this.init(element, currentOptions, events);\n                this._setEvents(currentOptions);\n            },\n            items: function () {\n                if (this.lockedContent) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable.children('tbody')));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n            _items: function (container) {\n                var that = this;\n                return container.children().filter(function () {\n                    var tr = $(this);\n                    return (that.dataSource._isGroupPaged() ? true : !tr.hasClass('k-grouping-row')) && !tr.hasClass('k-detail-row') && !tr.hasClass('k-group-footer');\n                });\n            },\n            dataItems: function () {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this.lockedContent) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n                return dataItems;\n            },\n            _destroyColumnAttachments: function () {\n                var that = this;\n                that.resizeHandle = null;\n                if (!that.thead) {\n                    return;\n                }\n                this.angular('cleanup', function () {\n                    return { elements: that.thead.get() };\n                });\n                that.thead.add(that.lockedHeader).find('th').each(function () {\n                    var th = $(this), filterMenu = th.data('kendoFilterMenu'), sortable = th.data('kendoColumnSorter'), columnMenu = th.data('kendoColumnMenu');\n                    if (filterMenu) {\n                        filterMenu.destroy();\n                    }\n                    if (sortable) {\n                        sortable.destroy();\n                    }\n                    if (columnMenu) {\n                        columnMenu.destroy();\n                    }\n                });\n            },\n            _attachCustomCommandsEvent: function () {\n                var that = this, columns = leafColumns(that.columns || []), command, idx, length;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    command = columns[idx].command;\n                    if (command) {\n                        attachCustomCommandEvent(that, that.wrapper, command);\n                    }\n                }\n            },\n            _aria: function () {\n                var id = this.element.attr('id') || 'aria';\n                if (id) {\n                    this._cellId = id + '_active_cell';\n                }\n            },\n            _element: function () {\n                var that = this, table = that.element;\n                if (!table.is('table')) {\n                    if (that.options.scrollable) {\n                        table = that.element.find('> .k-grid-content > table');\n                    } else {\n                        table = that.element.children('table');\n                    }\n                    if (!table.length) {\n                        table = $('<table />').appendTo(that.element);\n                    }\n                }\n                if (isIE7) {\n                    table.attr('cellspacing', 0);\n                }\n                that.table = table.attr('role', that._hasDetails() ? 'treegrid' : 'grid');\n                that._wrapper();\n            },\n            _createResizeHandle: function (container, th) {\n                var that = this;\n                var indicatorWidth = that.options.columnResizeHandleWidth;\n                var scrollable = that.options.scrollable;\n                var resizeHandle = that.resizeHandle;\n                var halfResizeHandle = indicatorWidth * 3 / 2;\n                var rtlCorrection = 0;\n                var headerWrap;\n                var ieCorrection;\n                var webkitCorrection;\n                var firefoxCorrection;\n                var leftMargin;\n                var invisibleSpace;\n                var leftBorderWidth;\n                var scrollLeft;\n                var left;\n                var top;\n                if (resizeHandle && that.lockedContent && resizeHandle.data('th')[0] !== th[0]) {\n                    resizeHandle.off(NS).remove();\n                    resizeHandle = null;\n                }\n                if (!resizeHandle) {\n                    resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                    container.append(resizeHandle);\n                }\n                scrollLeft = container.scrollLeft();\n                leftBorderWidth = parseFloat(container.css('borderLeftWidth'));\n                left = th.offset().left + scrollLeft - parseFloat(th.css('marginLeft')) - (container.offset().left + leftBorderWidth);\n                if (!isRtl) {\n                    left += th[0].offsetWidth;\n                } else {\n                    if (scrollable) {\n                        rtlCorrection = left <= scrollLeft ? halfResizeHandle : 0;\n                        headerWrap = th.closest('.k-grid-header-wrap, .k-grid-header-locked');\n                        invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth;\n                        leftMargin = parseFloat(headerWrap.css('marginLeft'));\n                        ieCorrection = browser.msie ? 2 * headerWrap.scrollLeft() + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                        webkitCorrection = browser.webkit ? invisibleSpace - rtlCorrection - leftMargin + leftBorderWidth : 0;\n                        firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n                        left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                    }\n                }\n                top = th.offset().top - parseFloat(th.css('marginTop')) - (container.offset().top + parseFloat(container.css('borderTopWidth')));\n                resizeHandle.css({\n                    top: top,\n                    left: left - halfResizeHandle,\n                    height: outerHeight(th),\n                    width: indicatorWidth * 3 - rtlCorrection\n                }).data('th', th).show();\n                resizeHandle.off('dblclick' + NS).on('dblclick' + NS, function () {\n                    that._autoFitLeafColumn(parseInt(th.attr(kendo.attr('index')), 10));\n                });\n            },\n            _positionColumnResizeHandle: function () {\n                var that = this, lockedHead = that.lockedHeader ? that.lockedHeader.find('thead:first') : $();\n                that.thead.add(lockedHead).on('mousemove' + NS, 'tr:not(.k-filter-row) > th', function (e) {\n                    var button = typeof e.buttons !== 'undefined' ? e.buttons : e.which || e.button;\n                    var th = $(this);\n                    if (th.hasClass('k-group-cell') || th.hasClass('k-hierarchy-cell')) {\n                        return;\n                    }\n                    if (typeof button !== 'undefined' && button !== 0) {\n                        return;\n                    }\n                    if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                        return;\n                    }\n                    that._createResizeHandle(th.closest('div'), th);\n                });\n            },\n            _resizeHandleDocumentClick: function (e) {\n                if ($(e.target).closest('.k-column-active').length) {\n                    return;\n                }\n                $(document).off(e);\n                this._resetResizeHandleHeader();\n                this._hideResizeHandle();\n            },\n            _resetResizeHandleHeader: function () {\n                var th;\n                if (!this.resizeHandle) {\n                    return;\n                }\n                th = $(this.resizeHandle).data('th');\n                if (th) {\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).show();\n                    th.find(DOT + ORDER_CLASS).show();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                    th.find(DOT + FILTER_MENU_CLASS).show();\n                }\n            },\n            _hideResizeHandle: function () {\n                if (this.resizeHandle) {\n                    this.resizeHandle.data('th').removeClass('k-column-active');\n                    if (this.lockedContent && !this._isMobile) {\n                        this.resizeHandle.off(NS).remove();\n                        this.resizeHandle = null;\n                    } else {\n                        this.resizeHandle.hide();\n                    }\n                }\n            },\n            _positionColumnResizeHandleTouch: function () {\n                var that = this, lockedHead = that.lockedHeader ? that.lockedHeader.find('thead:first') : $();\n                that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                    filter: 'th:not(.k-group-cell):not(.k-hierarchy-cell)',\n                    threshold: 10,\n                    minHold: 500,\n                    hold: function (e) {\n                        var th = $(e.target);\n                        e.preventDefault();\n                        if (that.resizeHandle) {\n                            that.resizeHandle.data('th').removeClass('k-column-active');\n                            that._resetResizeHandleHeader();\n                        }\n                        th.addClass('k-column-active');\n                        th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).hide();\n                        th.find(DOT + ORDER_CLASS).hide();\n                        th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                        th.find(DOT + FILTER_MENU_CLASS).hide();\n                        that._createResizeHandle(th.closest('div'), th);\n                        if (!that._resizeHandleDocumentClickHandler) {\n                            that._resizeHandleDocumentClickHandler = proxy(that._resizeHandleDocumentClick, that);\n                        }\n                        $(document).on('click', that._resizeHandleDocumentClickHandler);\n                    }\n                });\n            },\n            resizeColumn: function (column, columnWidth) {\n                var that = this;\n                var isLocked = !!column.locked;\n                var isHidden = !!column.hidden;\n                var options = this.options;\n                var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n                var index = isLocked ? inArray(column, visibleLockedColumns(that.columns)) : inArray(column, visibleNonLockedColumns(that.columns));\n                var contentTable = isLocked ? that.lockedTable : that.table;\n                var footer = that.footer || $();\n                var header = isLocked ? that.lockedHeader.find('table') : that.thead.closest('table');\n                var columnMinWidth = column.minResizableWidth || 10;\n                var gridWidth = isLocked ? outerWidth(contentTable.find('tbody')) : outerWidth(that.tbody);\n                var col;\n                if (isHidden) {\n                    column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                    return;\n                }\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                }\n                if (options.scrollable) {\n                    col = header.find('col:not(.k-group-col,.k-hierarchy-col):eq(' + index + ')').add(contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')')).add(footer.find('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')'));\n                } else {\n                    col = contentTable.find('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')');\n                }\n                if (options.scrollable) {\n                    var constrain = false;\n                    var totalWidth = that.wrapper.width() - scrollbar;\n                    var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                    if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                        width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                        if (width < 0) {\n                            width = columnWidth;\n                        }\n                        constrain = true;\n                    }\n                    if (width > 10 && width >= columnMinWidth) {\n                        col.css('width', width);\n                        if (gridWidth) {\n                            if (constrain) {\n                                width = totalWidth - scrollbar * 2;\n                            } else {\n                                width = gridWidth + (columnWidth - column.width);\n                            }\n                            contentTable.add(header).add(footer).css('width', width);\n                            if (!isLocked) {\n                                that._footerWidth = width;\n                            }\n                        }\n                    }\n                    that._scrollVirtualWrapperOnColumnResize();\n                } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                    col.css('width', columnWidth);\n                }\n                column.width = columnWidth;\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            },\n            _resizable: function () {\n                var that = this, options = that.options, container, columnStart, columnWidth, columnMinWidth, gridWidth, isMobile = this._isMobile, scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0, isLocked, col, th;\n                if (options.resizable) {\n                    container = options.scrollable ? that.wrapper.find('.k-grid-header-wrap:first') : that.wrapper;\n                    if (isMobile) {\n                        that._positionColumnResizeHandleTouch(container);\n                    } else {\n                        that._positionColumnResizeHandle(container);\n                    }\n                    if (that.resizable) {\n                        that.resizable.destroy();\n                    }\n                    that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                        handle: (!!options.scrollable ? '' : '>') + '.k-resize-handle',\n                        hint: function (handle) {\n                            return $('<div class=\"k-grid-resize-indicator\" />').css({ height: outerHeight(handle.data('th')) + that.tbody.attr('clientHeight') });\n                        },\n                        start: function (e) {\n                            th = $(e.currentTarget).data('th');\n                            if (isMobile) {\n                                that._hideResizeHandle();\n                            }\n                            var header = th.closest('table'), index = $.inArray(th[0], leafDataCells(th.closest('thead')).filter(':visible'));\n                            isLocked = header.parent().hasClass('k-grid-header-locked');\n                            var contentTable = isLocked ? that.lockedTable : that.table, footer = that.footer || $();\n                            if (that.footer && that.lockedContent) {\n                                footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                            }\n                            cursor(that.wrapper, 'col-resize');\n                            if (options.scrollable) {\n                                col = header.find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')').add(contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')')).add(footer.find('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')'));\n                            } else {\n                                col = contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')');\n                            }\n                            var columns = $.map(that.columns, function (a) {\n                                return !a.hidden && (isLocked && a.locked || !isLocked && !a.locked) ? a : null;\n                            });\n                            columnStart = e.x.location;\n                            columnWidth = outerWidth(th);\n                            columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                            gridWidth = isLocked ? outerWidth(contentTable.children('tbody')) : outerWidth(that.tbody);\n                            if (browser.webkit) {\n                                that.wrapper.addClass('k-grid-column-resizing');\n                            }\n                        },\n                        resize: function (e) {\n                            var rtlMultiplier = isRtl ? -1 : 1, currentWidth = columnWidth + e.x.location * rtlMultiplier - columnStart * rtlMultiplier;\n                            if (options.scrollable) {\n                                var footer;\n                                if (isLocked && that.lockedFooter) {\n                                    footer = that.lockedFooter.children('table');\n                                } else if (that.footer) {\n                                    footer = that.footer.find('>.k-grid-footer-wrap>table');\n                                }\n                                if (!footer || !footer[0]) {\n                                    footer = $();\n                                }\n                                var header = th.closest('table');\n                                var contentTable = isLocked ? that.lockedTable : that.table;\n                                var constrain = false;\n                                var totalWidth = that.wrapper.width() - scrollbar;\n                                var width = currentWidth;\n                                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                    if (width < 0) {\n                                        width = currentWidth;\n                                    }\n                                    constrain = true;\n                                }\n                                if (width > 10 && width >= columnMinWidth) {\n                                    col.css('width', width);\n                                    if (gridWidth) {\n                                        if (constrain) {\n                                            width = totalWidth - scrollbar * 2;\n                                        } else {\n                                            width = gridWidth + e.x.location * rtlMultiplier - columnStart * rtlMultiplier;\n                                        }\n                                        contentTable.add(header).add(footer).css('width', width);\n                                        if (!isLocked) {\n                                            that._footerWidth = width;\n                                        }\n                                    }\n                                }\n                                that._scrollVirtualWrapperOnColumnResize();\n                            } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                                col.css('width', currentWidth);\n                            }\n                        },\n                        resizeend: function () {\n                            var newWidth = outerWidth(th), column, header;\n                            cursor(that.wrapper, '');\n                            if (browser.webkit) {\n                                that.wrapper.removeClass('k-grid-column-resizing');\n                            }\n                            if (columnWidth != newWidth) {\n                                header = that.lockedHeader ? that.lockedHeader.find('thead:first tr:first').add(that.thead.find('tr:first')) : th.parent();\n                                var index = th.attr(kendo.attr('index'));\n                                if (!index) {\n                                    index = header.find('th:not(.k-group-cell):not(.k-hierarchy-cell)').index(th);\n                                }\n                                column = leafColumns(that.columns)[index];\n                                column.width = newWidth;\n                                that.trigger(COLUMNRESIZE, {\n                                    column: column,\n                                    oldWidth: columnWidth,\n                                    newWidth: newWidth\n                                });\n                                that._applyLockedContainersWidth();\n                                that._syncLockedContentHeight();\n                                that._syncLockedHeaderHeight();\n                            }\n                            that._resetResizeHandleHeader();\n                            that._hideResizeHandle();\n                            th = null;\n                        }\n                    });\n                }\n            },\n            _draggable: function () {\n                var that = this;\n                if (that.options.reorderable) {\n                    if (that._draggableInstance) {\n                        that._draggableInstance.destroy();\n                    }\n                    var header = that.wrapper.children('.k-grid-header');\n                    that._draggableInstance = that.wrapper.kendoDraggable({\n                        group: kendo.guid(),\n                        autoScroll: true,\n                        filter: that.content ? '.k-grid-header:first ' + HEADERCELLS : 'table:first>.k-grid-header ' + HEADERCELLS,\n                        dragstart: function () {\n                            header.children('.k-grid-header-wrap').unbind('scroll' + NS + 'scrolling').bind('scroll' + NS + 'scrolling', function (e) {\n                                if (that.virtualScrollable) {\n                                    that.content.find('>.k-virtual-scrollable-wrap').scrollLeft(this.scrollLeft);\n                                } else {\n                                    that.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft);\n                                }\n                            });\n                        },\n                        dragend: function () {\n                            that._resetResizeHandleHeader();\n                            header.children('.k-grid-header-wrap').unbind('scroll' + NS + 'scrolling');\n                        },\n                        drag: function () {\n                            that._hideResizeHandle();\n                        },\n                        hint: function (target) {\n                            var title = target.attr(kendo.attr('title'));\n                            if (title) {\n                                title = kendo.htmlEncode(title);\n                            }\n                            return $('<div class=\"k-header k-reorder-clue k-drag-clue\" />').html(title || target.attr(kendo.attr('field')) || target.text()).prepend('<span class=\"k-icon k-drag-status k-i-cancel\"></span>');\n                        }\n                    }).data('kendoDraggable');\n                }\n            },\n            _reorderable: function () {\n                var that = this;\n                if (that.options.reorderable) {\n                    if (that.wrapper.data('kendoReorderable')) {\n                        that.wrapper.data('kendoReorderable').destroy();\n                    }\n                    that.wrapper.kendoReorderable({\n                        draggable: that._draggableInstance,\n                        dragOverContainers: function (sourceIndex, targetIndex) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                        },\n                        inSameContainer: function (e) {\n                            return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                        },\n                        change: function (e) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            var column = columns[e.oldIndex];\n                            var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n                            that.trigger(COLUMNREORDER, {\n                                newIndex: newIndex,\n                                oldIndex: inArray(column, columns),\n                                column: column\n                            });\n                            that.reorderColumn(newIndex, column, e.position === 'before');\n                        }\n                    });\n                }\n            },\n            _reorderHeader: function (sources, target, before, container) {\n                var that = this;\n                var sourcePosition = columnPosition(sources[0], that.columns);\n                var destPosition = columnPosition(target, that.columns);\n                var action;\n                var ths;\n                var leafs = [];\n                for (var idx = 0; idx < sources.length; idx++) {\n                    if (sources[idx].columns) {\n                        leafs = leafs.concat(sources[idx].columns);\n                    }\n                }\n                if (container) {\n                    ths = elements(container, container, 'tr:eq(' + sourcePosition.row + ')>th.k-header:not(.k-group-cell,.k-hierarchy-cell)');\n                } else {\n                    ths = elements(that.lockedHeader, that.thead, 'tr:eq(' + sourcePosition.row + ')>th.k-header:not(.k-group-cell,.k-hierarchy-cell)');\n                }\n                var sourceLockedColumns = lockedColumns(sources).length;\n                var targetLockedColumns = lockedColumns([target]).length;\n                if (leafs.length) {\n                    if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                        action = 'prepend';\n                        moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find('thead'), that.thead, this._groups(), action);\n                    } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                        action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? 'prepend' : 'append';\n                        moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find('thead'), this._groups(), action);\n                    }\n                    if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                        target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                        if (target) {\n                            if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                                that._reorderHeader(leafs, target, before, that.thead);\n                            } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                                that._reorderHeader(leafs, target, before, that.lockedHead);\n                            } else {\n                                that._reorderHeader(leafs, target, before);\n                            }\n                        }\n                    }\n                } else if (sourceLockedColumns !== targetLockedColumns) {\n                    updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n                }\n                reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n            },\n            _reorderContent: function (sources, destination, before) {\n                var that = this;\n                var lockedRows = $();\n                var source = sources[0];\n                var visibleSources = visibleColumns(sources);\n                var sourceIndex = inArray(source, leafColumns(that.columns));\n                var destIndex = inArray(destination, leafColumns(that.columns));\n                var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n                var colDest = inArray(destination, visibleLeafColumns(that.columns));\n                var lockedCount = lockedColumns(that.columns).length;\n                var isLocked = !!destination.locked;\n                var footer = that.footer || that.wrapper.find('.k-grid-footer');\n                var headerCol, footerCol, beforeVisibleColumn;\n                headerCol = footerCol = colDest;\n                if (destination.hidden) {\n                    var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n                    if (visibleColumns(columnsArray).length > 0) {\n                        headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                        beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                    } else {\n                        if (isLocked) {\n                            colDest = that.lockedTable.find('colgroup');\n                            headerCol = that.lockedHeader.find('colgroup');\n                            footerCol = $(that.lockedFooter).find('>table>colgroup');\n                        } else {\n                            colDest = that.tbody.prev();\n                            headerCol = that.thead.prev();\n                            footerCol = footer.find('.k-grid-footer-wrap').find('>table>colgroup');\n                        }\n                    }\n                }\n                if (that._hasFilterRow()) {\n                    reorder(that.wrapper.find('.k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)'), sourceIndex, destIndex, before, sources.length);\n                }\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedHeader, that.thead.prev(), 'col:not(.k-group-col,.k-hierarchy-col)'), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n                if (that.options.scrollable) {\n                    if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                        reorder(elements(that.lockedTable, that.tbody.prev(), 'col:not(.k-group-col,.k-hierarchy-col)'), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                }\n                if (footer && footer.length) {\n                    if (colSourceIndex >= 0) {\n                        reorder(elements(that.lockedFooter, footer.find('.k-grid-footer-wrap'), '>table>colgroup>col:not(.k-group-col,.k-hierarchy-col)'), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                    }\n                    reorder(footer.find('.k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)'), sourceIndex, destIndex, before, sources.length);\n                }\n                var rows = that.tbody.children(':not(.k-grouping-row,.k-detail-row)');\n                if (that.lockedTable) {\n                    if (lockedCount > destIndex) {\n                        if (lockedCount <= sourceIndex) {\n                            updateColspan(that.lockedTable.find('>tbody>tr.k-grouping-row'), that.table.find('>tbody>tr.k-grouping-row'), sources.length);\n                        }\n                    } else if (lockedCount > sourceIndex) {\n                        updateColspan(that.table.find('>tbody>tr.k-grouping-row'), that.lockedTable.find('>tbody>tr.k-grouping-row'), sources.length);\n                    }\n                    lockedRows = that.lockedTable.find('>tbody>tr:not(.k-grouping-row,.k-detail-row)');\n                }\n                for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                    reorder(elements(lockedRows[idx], rows[idx], '>td:not(.k-group-cell,.k-hierarchy-cell)'), sourceIndex, destIndex, before, sources.length);\n                }\n            },\n            _findClosestVisibleColumnIndex: function (columns, columnIndex) {\n                var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(), closestVisibleColumn = visibleColumns(columnsArray)[0];\n                return inArray(closestVisibleColumn, visibleColumns(this.columns));\n            },\n            _autoFitLeafColumn: function (leafIndex) {\n                this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n            },\n            autoFitColumn: function (column) {\n                var that = this, options = that.options, columns = that.columns, index, th, headerTable, isLocked, visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).filter(isCellVisible).length : 0, col, minWidth, contentDiv, scrollLeft, notGroupOrHierarchyCol = 'col:not(.k-group-col):not(.k-hierarchy-col)', notGroupOrHierarchyVisibleCell = 'td:visible:not(.k-group-cell):not(.k-hierarchy-cell)';\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n                minWidth = column.minResizableWidth;\n                index = inArray(column, leafColumns(columns));\n                isLocked = column.locked;\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children('table');\n                } else {\n                    headerTable = that.thead.parent();\n                }\n                th = headerTable.find('[data-index=\\'' + index + '\\']');\n                var contentTable = isLocked ? that.lockedTable : that.table, footer = that.footer || $();\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                }\n                var footerTable = footer.find('table').first();\n                if (that.lockedHeader && !isLocked) {\n                    index -= visibleLocked;\n                }\n                for (var j = 0; j < columns.length; j++) {\n                    if (columns[j] === column) {\n                        break;\n                    } else {\n                        if (columns[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n                if (options.scrollable) {\n                    col = headerTable.find(notGroupOrHierarchyCol).eq(index).add(contentTable.children('colgroup').find(notGroupOrHierarchyCol).eq(index)).add(footerTable.find('colgroup').find(notGroupOrHierarchyCol).eq(index));\n                    if (!isLocked) {\n                        contentDiv = contentTable.parent();\n                        scrollLeft = contentDiv.scrollLeft();\n                    }\n                } else {\n                    col = contentTable.children('colgroup').find(notGroupOrHierarchyCol).eq(index);\n                }\n                var tables = headerTable.add(contentTable).add(footerTable);\n                if (browser.safari) {\n                    th.css('white-space', 'initial');\n                }\n                var oldColumnWidth = outerWidth(th);\n                col.width('');\n                tables.css('table-layout', 'fixed');\n                col.width('auto');\n                tables.addClass('k-autofitting');\n                tables.css('table-layout', '');\n                var newColumnWidth = Math.ceil(Math.max(outerWidth(th), outerWidth(contentTable.find('tr:not(.k-grouping-row)').eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)), outerWidth(footerTable.find('tr').eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)))) + 1;\n                if (minWidth && minWidth > newColumnWidth) {\n                    newColumnWidth = minWidth;\n                }\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n                if (browser.safari) {\n                    th.css('white-space', '');\n                }\n                if (options.scrollable) {\n                    var cols = headerTable.find('col'), colWidth, totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf('%') == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else if (cols.eq(idx).hasClass('k-group-col')) {\n                            totalWidth += parseInt(cols.eq(idx).width(), 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n                    if (totalWidth) {\n                        tables.each(function () {\n                            this.style.width = totalWidth + 'px';\n                        });\n                    }\n                }\n                if (browser.msie && browser.version == 8) {\n                    tables.css('display', 'inline-table');\n                    setTimeout(function () {\n                        tables.css('display', 'table');\n                    }, 1);\n                }\n                tables.removeClass('k-autofitting');\n                if (scrollLeft) {\n                    contentDiv.scrollLeft(scrollLeft);\n                }\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            },\n            reorderColumn: function (destIndex, column, before) {\n                var that = this, parent = columnParent(column, that.columns), columns = parent ? parent.columns : that.columns, sourceIndex = inArray(column, columns), destColumn = columns[destIndex], virtualScroll = that.virtualScroll || {}, lockChanged, isLocked = !!destColumn.locked, lockedCount = lockedColumns(that.columns).length, groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                        return column.groupHeaderColumnTemplate;\n                    });\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n                if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                    return;\n                }\n                if (column.locked && !isLocked && lockedCount == 1) {\n                    return;\n                }\n                that._hideResizeHandle();\n                if (before === undefined) {\n                    before = destIndex < sourceIndex;\n                }\n                var sourceColumns = [column];\n                that._reorderHeader(sourceColumns, destColumn, before);\n                if (that.lockedHeader) {\n                    removeEmptyRows(that.thead);\n                    removeEmptyRows(that.lockedHeader);\n                }\n                if (destColumn.columns) {\n                    destColumn = leafColumns(destColumn.columns);\n                    destColumn = destColumn[before ? 0 : destColumn.length - 1];\n                }\n                if (column.columns) {\n                    sourceColumns = leafColumns(column.columns);\n                }\n                that._reorderContent(sourceColumns, destColumn, before);\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n                column.locked = isLocked;\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n                that._updateLockedCols();\n                that._updateCols();\n                that._templates();\n                that._updateColumnCellIndex();\n                that._updateColumnSorters();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedHeaderHeight();\n                that._syncLockedContentHeight();\n                that._updateFirstColumnClass();\n                if (virtualScroll.columns) {\n                    that.refresh();\n                }\n                if (!lockChanged) {\n                    return;\n                }\n                if (isLocked) {\n                    that.trigger(COLUMNLOCK, { column: column });\n                } else {\n                    that.trigger(COLUMNUNLOCK, { column: column });\n                }\n            },\n            _updateColumnCellIndex: function () {\n                var header;\n                var offset = 0;\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find('thead');\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n            lockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.locked || column.hidden) {\n                    return;\n                }\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n            unlockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !column.locked || column.hidden) {\n                    return;\n                }\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n            cellIndex: function (td) {\n                var lockedColumnOffset = 0;\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n                return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n            },\n            _modelForContainer: function (container) {\n                container = $(container);\n                if (!container.is('tr') && this._editMode() !== 'popup') {\n                    container = container.closest('tr');\n                }\n                var id = container.attr(kendo.attr('uid'));\n                return this.dataSource.getByUid(id);\n            },\n            _editable: function () {\n                var that = this, editable = that.options.editable, handler = function () {\n                        var target = activeElement(), cell = that._editContainer;\n                        if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest('.k-animation-container').length) {\n                            if (that.editable.end()) {\n                                that.closeCell();\n                            } else {\n                                that._scrollVirtualWrapper();\n                            }\n                        }\n                    };\n                if (editable) {\n                    this.wrapper.addClass('k-editable');\n                    var mode = that._editMode();\n                    if (mode === 'incell') {\n                        that.table.add(that.lockedTable).on('mousedown' + NS, NAVROW + '>' + NAVCELL, function (e) {\n                            var target = $(e.target);\n                            if (that._editMode() === 'incell' && target.hasClass('k-checkbox') && target.prev().attr(kendo.attr('bind'))) {\n                                e.preventDefault();\n                            }\n                        });\n                        if (editable.update !== false) {\n                            if (isMac) {\n                                that.wrapper.on(CLICK + NS, '.k-edit-cell > input[type=\\'checkbox\\']', function (e) {\n                                    $(e.target).focus();\n                                }).on(CLICK + NS, '.k-edit-cell', function (e) {\n                                    if (!$(e.target).is('input')) {\n                                        $(e.currentTarget).find('input[type=\\'checkbox\\']').focus();\n                                    }\n                                }).on(MOUSEDOWN + NS, 'tr:not(.k-grouping-row) > td', function (e) {\n                                    var editContainer = that._editContainer;\n                                    if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                        that._mousedownOnEditCell = true;\n                                    } else {\n                                        that._mousedownOnEditCell = false;\n                                    }\n                                });\n                            }\n                            that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                                filter: 'tr:not(.k-grouping-row) > td',\n                                allowSelection: true,\n                                tap: function (e) {\n                                    var td = $(e.target), isLockedCell = that.lockedTable && td.closest('table')[0] === that.lockedTable[0];\n                                    that._mousedownOnEditCell = false;\n                                    if (td.hasClass('k-hierarchy-cell') || td.hasClass('k-detail-cell') || td.hasClass('k-group-cell') || td.hasClass('k-edit-cell') || td.has('a.k-grid-delete').length || td.has('button.k-grid-delete').length || td.closest('tbody')[0] !== that.tbody[0] && !isLockedCell || $(e.target).is(':input')) {\n                                        return;\n                                    }\n                                    if (that.editable) {\n                                        if (that.editable.end()) {\n                                            $(activeElement()).blur();\n                                            that.closeCell();\n                                            that.editCell(td);\n                                        } else {\n                                            that._scrollVirtualWrapper();\n                                        }\n                                    } else {\n                                        that.editCell(td);\n                                    }\n                                }\n                            });\n                            that.wrapper.on('focusin' + NS, function () {\n                                if (!$.contains(this, activeElement())) {\n                                    clearTimeout(that.timer);\n                                    that.timer = null;\n                                }\n                            }).on('focusout' + NS, function (e) {\n                                var shouldCloseCell = true;\n                                if (isMac && that._mousedownOnEditCell || that._virtualColScroll) {\n                                    shouldCloseCell = false;\n                                }\n                                that._mousedownOnEditCell = false;\n                                if (shouldCloseCell) {\n                                    that.timer = setTimeout(function () {\n                                        handler(e);\n                                    }, 1);\n                                }\n                            });\n                        }\n                    } else {\n                        if (editable.update !== false) {\n                            that.wrapper.on(CLICK + NS, 'tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit', function (e) {\n                                e.preventDefault();\n                                that.editRow($(this).closest('tr'));\n                            });\n                            if (that._isVirtualInlineEditable()) {\n                                that.wrapper.on('focusout' + NS, 'tr:not(.k-grouping-row) > td', function () {\n                                    if (that.editable && !that.editable.end()) {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                });\n                            }\n                        }\n                    }\n                    if (editable.destroy !== false) {\n                        that.wrapper.on(CLICK + NS, 'tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete', function (e) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            that.removeRow($(this).closest('tr'));\n                        });\n                    } else {\n                        that.wrapper.on(CLICK + NS, 'tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete', function (e) {\n                            e.stopPropagation();\n                            if (!that._confirmation()) {\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                }\n            },\n            editCell: function (cell) {\n                cell = $(cell);\n                var that = this, column = (that.virtualScroll || {}).columns ? that.virtualCols[that.cellIndex(cell)] : leafColumns(that.columns)[that.cellIndex(cell)], model = that._modelForContainer(cell);\n                that.closeCell();\n                if (model && isColumnEditable(column, model) && !column.command) {\n                    if (that.trigger(BEFOREEDIT, { model: model })) {\n                        return;\n                    }\n                    that._attachModelChange(model);\n                    that._editContainer = cell;\n                    if (that._shouldClearEditableState) {\n                        that._clearEditableState();\n                    }\n                    that.editable = cell.addClass('k-edit-cell').kendoEditable({\n                        fields: {\n                            field: column.field,\n                            format: column.format,\n                            editor: column.editor,\n                            values: column.values\n                        },\n                        model: model,\n                        target: that,\n                        change: function (e) {\n                            if (that.trigger(SAVE, {\n                                    values: e.values,\n                                    container: cell,\n                                    model: model\n                                })) {\n                                e.preventDefault();\n                            }\n                        },\n                        skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n                    }).data('kendoEditable');\n                    var tr = cell.parent().addClass('k-grid-edit-row');\n                    if (that.lockedContent) {\n                        adjustRowHeight(tr[0], that._relatedRow(tr).addClass('k-grid-edit-row')[0]);\n                        that._syncLockedScroll();\n                    }\n                    that.trigger(EDIT, {\n                        container: cell,\n                        model: model\n                    });\n                }\n            },\n            _adjustLockedHorizontalScrollBar: function () {\n                var table = this.table, content = table.parent();\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(content[0].offsetHeight - scrollbar);\n            },\n            _syncLockedScroll: function () {\n                this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n                if (this.virtualScrollable) {\n                    this.lockedContent[0].scrollTop = this.wrapper.find('.k-virtual-scrollable-wrap')[0].scrollTop;\n                }\n            },\n            _syncLockedContentHeight: function () {\n                if (this.lockedTable) {\n                    if (!this.touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                }\n            },\n            _syncLockedHeaderHeight: function () {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children('table');\n                    var table = this.thead.parent();\n                    this._adjustRowsHeight(lockedTable, table);\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n            _syncLockedFooterHeight: function () {\n                if (this.lockedFooter && this.footer && this.footer.length) {\n                    this._adjustRowsHeight(this.lockedFooter.children('table'), this.footer.find('.k-grid-footer-wrap > table'));\n                }\n            },\n            _destroyEditable: function () {\n                var that = this;\n                var destroy = function () {\n                    if (that.editable) {\n                        var container = that.editView ? that.editView.element : that._editContainer;\n                        if (container) {\n                            container.off(CLICK + NS, 'a.k-grid-cancel', that._editCancelClickHandler);\n                            container.off(CLICK + NS, 'a.k-grid-update', that._editUpdateClickHandler);\n                        }\n                        that._detachModelChange();\n                        that.editable.destroy();\n                        that.editable = null;\n                        that._editContainer = null;\n                        that._destroyEditView();\n                        that._editableIsClosing = null;\n                    }\n                };\n                if (that.editable) {\n                    if (that._editMode() === 'popup' && !that._isMobile) {\n                        if (that._editableIsClosing) {\n                            that._editContainer.data('kendoWindow').bind('deactivate', destroy);\n                        } else {\n                            that._editableIsClosing = true;\n                            that._editContainer.data('kendoWindow').bind('deactivate', destroy).close();\n                        }\n                    } else {\n                        destroy();\n                    }\n                }\n                if (that._confirmDialog) {\n                    that._confirmDialog.close();\n                    that._confirmDialog.destroy();\n                    that._confirmDialog = null;\n                }\n            },\n            _destroyEditView: function () {\n                if (this.editView) {\n                    this.editView.purge();\n                    this.editView = null;\n                    this.pane.navigate('');\n                }\n            },\n            _attachModelChange: function (model) {\n                var that = this;\n                that._modelChangeHandler = function (e) {\n                    that._modelChange({\n                        field: e.field,\n                        model: this\n                    });\n                };\n                model.bind('change', that._modelChangeHandler);\n            },\n            _detachModelChange: function () {\n                var that = this, container = that._editContainer, model = that._modelForContainer(container);\n                if (model) {\n                    model.unbind(CHANGE, that._modelChangeHandler);\n                }\n            },\n            closeCell: function (isCancel) {\n                var that = this, cell = that._editContainer, column, tr, model;\n                if (!cell) {\n                    return;\n                }\n                model = that._modelForContainer(cell);\n                if (isCancel && that.trigger('cancel', {\n                        container: cell,\n                        model: model\n                    })) {\n                    return;\n                }\n                that.trigger(CELLCLOSE, {\n                    type: isCancel ? 'cancel' : 'save',\n                    model: model,\n                    container: cell\n                });\n                cell.removeClass('k-edit-cell');\n                column = (that.virtualScroll || {}).columns ? that.virtualCols[that.cellIndex(cell)] : leafColumns(that.columns)[that.cellIndex(cell)];\n                tr = cell.parent().removeClass('k-grid-edit-row');\n                if (that.lockedContent) {\n                    that._relatedRow(tr).removeClass('k-grid-edit-row');\n                }\n                that._destroyEditable();\n                that._displayCell(cell, column, model);\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.trigger('itemChange', {\n                    item: tr,\n                    data: model,\n                    ns: ui\n                });\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css('height', '')[0], that._relatedRow(tr).css('height', '')[0]);\n                }\n            },\n            _displayCell: function (cell, column, dataItem) {\n                var that = this, state = {\n                        storage: {},\n                        count: 0\n                    }, settings = extend({}, kendo.Template, that.options.templateSettings), tmpl = kendo.template(that._cellTmpl(column, state), settings);\n                if (state.count > 0) {\n                    tmpl = proxy(tmpl, state.storage);\n                }\n                cell.empty().html(tmpl(dataItem));\n                that.angular('compile', function () {\n                    return {\n                        elements: cell,\n                        data: [{ dataItem: dataItem }]\n                    };\n                });\n            },\n            removeRow: function (row) {\n                if (!this._confirmation(row)) {\n                    return;\n                }\n                this._removeRow(row);\n            },\n            _removeRow: function (row) {\n                var that = this, model, modelId, key, schema, mode = that._editMode();\n                if (mode !== 'incell') {\n                    that.cancelRow();\n                }\n                row = $(row);\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n                row = row.hide();\n                if (that.dataSource._isGroupPaged()) {\n                    that._removeGroupIfEmpty(row);\n                }\n                model = that._modelForContainer(row);\n                if (model && !that.trigger(REMOVE, {\n                        row: row,\n                        model: model\n                    })) {\n                    schema = that.dataSource.options.schema;\n                    if (that._selectedIds && schema && schema.model) {\n                        modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                        key = model[modelId];\n                        delete that._selectedIds[key];\n                    }\n                    that.dataSource.remove(model);\n                    if (mode === 'inline' || mode === 'popup') {\n                        that.dataSource.sync();\n                    }\n                } else if (mode === 'incell') {\n                    that._destroyEditable();\n                }\n            },\n            _editMode: function () {\n                var mode = 'incell', editable = this.options.editable;\n                if (editable !== true) {\n                    if (typeof editable == 'string') {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n                return mode;\n            },\n            editRow: function (row) {\n                var model;\n                var that = this;\n                if (row instanceof ObservableObject) {\n                    model = row;\n                } else {\n                    row = $(row);\n                    model = that._modelForContainer(row);\n                }\n                var mode = that._editMode();\n                var container;\n                that.cancelRow();\n                if (model) {\n                    row = that.tbody.children('[' + kendo.attr('uid') + '=' + model.uid + ']');\n                    that._attachModelChange(model);\n                    if (mode === 'popup') {\n                        that._createPopupEditor(model);\n                    } else if (mode === 'inline') {\n                        that._createInlineEditor(row, model);\n                    } else if (mode === 'incell') {\n                        $(row).children(DATA_CELL).each(function () {\n                            var cell = $(this);\n                            var column = leafColumns(that.columns)[that.cellIndex(cell)];\n                            model = that._modelForContainer(cell);\n                            if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                                that.editCell(cell);\n                                return false;\n                            }\n                        });\n                    }\n                    container = that.editView ? that.editView.element : that._editContainer;\n                    if (container) {\n                        if (!this._editCancelClickHandler) {\n                            this._editCancelClickHandler = proxy(this._editCancelClick, this);\n                        }\n                        container.on(CLICK + NS, 'a.k-grid-cancel', this._editCancelClickHandler);\n                        if (!this._editUpdateClickHandler) {\n                            this._editUpdateClickHandler = proxy(this._editUpdateClick, this);\n                        }\n                        container.on(CLICK + NS, 'a.k-grid-update', this._editUpdateClickHandler);\n                    }\n                }\n            },\n            _editUpdateClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.saveRow();\n            },\n            _editCancelClick: function (e) {\n                var that = this;\n                var navigatable = that.options.navigatable;\n                var model = that.editable.options.model;\n                var container = that.editView ? that.editView.element : that._editContainer;\n                e.preventDefault();\n                e.stopPropagation();\n                if (that.trigger('cancel', {\n                        container: container,\n                        model: model\n                    })) {\n                    return;\n                }\n                var currentIndex = that.items().index($(that.current()).parent());\n                that.cancelRow();\n                if (navigatable) {\n                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(that.table, true);\n                }\n            },\n            _createPopupEditor: function (model) {\n                var that = this;\n                var html = '<div ' + kendo.attr('uid') + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n                var column;\n                var command;\n                var fields = [];\n                var idx;\n                var length;\n                var tmpl;\n                var updateText;\n                var cancelText;\n                var updateIconClass;\n                var cancelIconClass;\n                var tempCommand;\n                var columns = leafColumns(that.columns);\n                var attr;\n                var editMenuGuid = kendo.guid();\n                var editable = that.options.editable;\n                var template = editable.template;\n                var options = isPlainObject(editable) ? editable.window : {};\n                var settings = extend({}, kendo.Template, that.options.templateSettings);\n                var state;\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n                options = options || {};\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = kendo.unescape(template);\n                    }\n                    html += kendo.template(template, settings)(model);\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.command) {\n                            tempCommand = getCommand(column.command, 'edit');\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                } else {\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.selectable) {\n                            continue;\n                        }\n                        if (!column.command) {\n                            if (!that._isMobile) {\n                                html += '<div class=\"k-edit-label\"><label for=\"' + column.field + '\">' + (column.title || column.field || '') + '</label></div>';\n                                if (isColumnEditable(column, model)) {\n                                    fields.push({\n                                        field: column.field,\n                                        title: column.title,\n                                        format: column.format,\n                                        editor: column.editor,\n                                        values: column.values\n                                    });\n                                    html += '<div ' + kendo.attr('container-for') + '=\"' + column.field + '\" class=\"k-edit-field\"></div>';\n                                } else {\n                                    state = {\n                                        storage: {},\n                                        count: 0\n                                    };\n                                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n                                    if (state.count > 0) {\n                                        tmpl = proxy(tmpl, state.storage);\n                                    }\n                                    html += '<div class=\"k-edit-field k-no-editor\">' + tmpl(model) + '</div>';\n                                }\n                            } else {\n                                html += '<li class=\"k-item k-listgroup-item\">';\n                                if (isColumnEditable(column, model)) {\n                                    fields.push({\n                                        field: column.field,\n                                        title: column.title,\n                                        format: column.format,\n                                        editor: column.editor,\n                                        values: column.values\n                                    });\n                                    html += '<label class=\"k-label k-listgroup-form-row\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title || column.field || '') + '</span>';\n                                    html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr('container-for') + '=\"' + column.field + '\"></div>';\n                                    html += '</label>';\n                                } else {\n                                    state = {\n                                        storage: {},\n                                        count: 0\n                                    };\n                                    tmpl = kendo.template(that._cellTmpl(column, state), settings);\n                                    if (state.count > 0) {\n                                        tmpl = proxy(tmpl, state.storage);\n                                    }\n                                    html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title || column.field || '') + '</span>';\n                                    html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                    html += '</label>';\n                                }\n                                html += '</li>';\n                            }\n                        } else if (column.command) {\n                            tempCommand = getCommand(column.command, 'edit');\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                }\n                if (command) {\n                    if (isPlainObject(command)) {\n                        if (isPlainObject(command.text)) {\n                            updateText = command.text.update;\n                            cancelText = command.text.cancel;\n                        }\n                        if (isPlainObject(command.iconClass)) {\n                            updateIconClass = command.iconClass.update;\n                            cancelIconClass = command.iconClass.cancel;\n                        }\n                        if (command.attr) {\n                            attr = command.attr;\n                        }\n                    }\n                }\n                var container;\n                if (!that._isMobile) {\n                    html += '<div class=\"k-edit-buttons k-state-default\">';\n                    html += that._createButton({\n                        name: 'update',\n                        text: updateText,\n                        attr: attr,\n                        iconClass: updateIconClass\n                    }) + that._createButton({\n                        name: 'canceledit',\n                        text: cancelText,\n                        attr: attr,\n                        iconClass: cancelIconClass\n                    });\n                    html += '</div></div></div>';\n                    container = that._editContainer = $(html).appendTo(that.wrapper).eq(0).kendoWindow(extend({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: that.options.messages.commands.edit || 'Edit',\n                        visible: false,\n                        close: function (e) {\n                            if (e.userTriggered) {\n                                e.sender.element.focus();\n                                if (that.trigger('cancel', {\n                                        container: container,\n                                        model: model\n                                    })) {\n                                    e.preventDefault();\n                                    return;\n                                }\n                                var currentIndex = that.items().index($(that.current()).parent());\n                                that._editableIsClosing = true;\n                                that.cancelRow();\n                                if (that.options.navigatable) {\n                                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                    focusTable(that.table, true);\n                                }\n                            }\n                        }\n                    }, options));\n                } else {\n                    html += '</ul></div>';\n                    that.editView = that.pane.append('<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' + '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' + '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel\" title=\"#=messages.cancel#\" ' + 'aria-label=\"#=messages.cancel#\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' + (that.options.messages.commands.edit || 'Edit') + '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-update\" title=\"#=messages.done#\" ' + 'aria-label=\"#=messages.done#\"><span class=\"k-icon k-i-check\"></span></a>' + '</div>' + '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' + html + '</div>' + '</div>');\n                    container = that._editContainer = that.editView.element.find('.k-popup-edit-form');\n                }\n                that.editable = that._editContainer.kendoEditable({\n                    fields: fields,\n                    model: model,\n                    clearContainer: false,\n                    target: that\n                }).data('kendoEditable');\n                that._openPopUpEditor();\n                that.trigger(EDIT, {\n                    container: container,\n                    model: model\n                });\n            },\n            _openPopUpEditor: function () {\n                var that = this;\n                var windowEditor = that._editContainer ? that._editContainer.data('kendoWindow') : null;\n                var windowOptions = (that.options.editable || {}).window || {};\n                if (!this._isMobile) {\n                    if (windowEditor) {\n                        if (!windowOptions.position) {\n                            windowEditor.center();\n                        }\n                        windowEditor.open();\n                    }\n                } else {\n                    this.pane.navigate(this.editView, this._editAnimation);\n                }\n            },\n            _createInlineEditor: function (row, model) {\n                var that = this;\n                var column;\n                var cell;\n                var command;\n                var fields = [];\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n                row.children(':not(.k-group-cell,.k-hierarchy-cell)').each(function () {\n                    cell = $(this);\n                    column = that._hasVirtualColumns() ? that.virtualCols[that.cellIndex(cell)] : leafColumns(that.columns)[that.cellIndex(cell)];\n                    if (!column.command && isColumnEditable(column, model)) {\n                        fields.push({\n                            field: column.field,\n                            title: column.title,\n                            format: column.format,\n                            editor: column.editor,\n                            values: column.values\n                        });\n                        cell.attr(kendo.attr('container-for'), column.field);\n                        cell.empty();\n                    } else if (column.command) {\n                        command = getCommand(column.command, 'edit');\n                        if (command) {\n                            cell.empty();\n                            var updateText, cancelText, updateIconClass, cancelIconClass, attr;\n                            if (isPlainObject(command)) {\n                                if (isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (isPlainObject(command.iconClass)) {\n                                    updateIconClass = command.iconClass.update;\n                                    cancelIconClass = command.iconClass.cancel;\n                                }\n                                if (command.attr) {\n                                    attr = command.attr;\n                                }\n                            }\n                            $(that._createButton({\n                                name: 'update',\n                                text: updateText,\n                                attr: attr,\n                                iconClass: updateIconClass\n                            }) + that._createButton({\n                                name: 'canceledit',\n                                text: cancelText,\n                                attr: attr,\n                                iconClass: cancelIconClass\n                            })).appendTo(cell);\n                        }\n                    }\n                });\n                that._editContainer = row;\n                that._editContainer.addClass('k-grid-edit-row');\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.editable = new kendo.ui.Editable(that._editContainer, {\n                    target: that,\n                    fields: fields,\n                    model: model,\n                    skipFocus: that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false) || that._hasVirtualColumns(),\n                    clearContainer: false\n                });\n                if (row.length > 1) {\n                    adjustRowHeight(row[0], row[1]);\n                    that._applyLockedContainersWidth();\n                }\n                that.trigger(EDIT, {\n                    container: row,\n                    model: model\n                });\n            },\n            cancelRow: function (notify) {\n                var that = this, container = that._editContainer, model;\n                if (container) {\n                    model = that._modelForContainer(container);\n                    if (!model || notify && that.trigger('cancel', {\n                            container: container,\n                            model: model\n                        })) {\n                        return;\n                    }\n                    that._destroyEditable();\n                    that.dataSource.cancelChanges(model);\n                    that._clearEditableState();\n                    if (that._editMode() !== 'popup') {\n                        that._displayRow(container);\n                    } else {\n                        that._displayRow(that.tbody.find('[' + kendo.attr('uid') + '=' + model.uid + ']'));\n                    }\n                }\n            },\n            saveRow: function () {\n                var that = this;\n                var container = this._editContainer;\n                var model = this._modelForContainer(container);\n                var deferred = $.Deferred();\n                var valid;\n                if (!container || !this.editable) {\n                    return deferred.resolve().promise();\n                }\n                valid = that.editable && that.editable.end();\n                if (!valid || this.trigger(SAVE, {\n                        container: container,\n                        model: model\n                    })) {\n                    if (!valid) {\n                        that._scrollVirtualWrapper();\n                    }\n                    return deferred.reject().promise();\n                }\n                that._clearEditableState();\n                return this.dataSource.sync();\n            },\n            _displayRow: function (row) {\n                var that = this, model = that._modelForContainer(row), related, newRow, nextRow, isSelected = row.hasClass('k-state-selected'), isAlt = row.hasClass('k-alt');\n                if (model) {\n                    if (that.lockedContent) {\n                        related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                        that._relatedRow(row.last()).replaceWith(related);\n                    }\n                    that.angular('cleanup', function () {\n                        return { elements: row.get() };\n                    });\n                    newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                    if (!row.is(':visible')) {\n                        newRow.hide();\n                    }\n                    row.replaceWith(newRow);\n                    that.trigger('itemChange', {\n                        item: newRow,\n                        data: model,\n                        ns: ui\n                    });\n                    if (related && related.length) {\n                        that.trigger('itemChange', {\n                            item: related,\n                            data: model,\n                            ns: ui\n                        });\n                    }\n                    var angularElements = newRow;\n                    var angularData = [{ dataItem: model }];\n                    if (related && related.length) {\n                        angularElements = newRow.add(related);\n                        angularData.push({ dataItem: model });\n                    }\n                    that.angular('compile', function () {\n                        return {\n                            elements: angularElements.get(),\n                            data: angularData\n                        };\n                    });\n                    if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                        that.select(newRow.add(related));\n                    }\n                    if (related) {\n                        adjustRowHeight(newRow[0], related[0]);\n                    }\n                    nextRow = newRow.next();\n                    if (nextRow.hasClass('k-detail-row') && nextRow.is(':visible')) {\n                        newRow.find('.k-hierarchy-cell .k-icon').removeClass('k-i-expand').addClass('k-i-collapse');\n                    }\n                }\n            },\n            _showMessage: function (messages, row) {\n                var that = this;\n                if (!that._isMobile) {\n                    return window.confirm(messages.title);\n                }\n                var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($('<div />').appendTo(document.body), {\n                    modal: { preventScroll: true },\n                    closable: false,\n                    title: false,\n                    content: messages.title,\n                    messages: {\n                        okText: messages.confirmDelete,\n                        cancel: messages.cancelDelete\n                    },\n                    open: function () {\n                        that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                        that.content.css(OVERFLOW, HIDDEN);\n                    },\n                    close: function () {\n                        that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                    }\n                });\n                confirmDialog.result.done(function () {\n                    that._removeRow(row);\n                }).fail(function () {\n                    var confirmDialog = that._confirmDialog;\n                    if (confirmDialog) {\n                        confirmDialog.close();\n                        confirmDialog.destroy();\n                    }\n                });\n                return false;\n            },\n            _confirmation: function (row) {\n                var that = this, editable = that.options.editable, confirmation = editable === true || typeof editable === STRING ? that.options.messages.editable.confirmation : editable.confirmation;\n                if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                    confirmation = that.options.messages.editable.confirmation;\n                }\n                if (confirmation !== false && confirmation != null) {\n                    if (typeof confirmation === FUNCTION) {\n                        confirmation = confirmation(that._modelForContainer(row));\n                    }\n                    return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n                }\n                return true;\n            },\n            cancelChanges: function () {\n                var that = this;\n                that.dataSource.cancelChanges();\n                if (that._isVirtualEditable()) {\n                    that._virtualPageToTop(function () {\n                        that.virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n            saveChanges: function () {\n                var that = this;\n                var valid = that.editable && that.editable.end();\n                if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                    that.dataSource.sync();\n                } else if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n            },\n            addRow: function () {\n                var that = this, index, dataSource = that.dataSource, mode = that._editMode(), createAt = that.options.editable.createAt || '', pageSize = dataSource.pageSize(), view = dataSource.view() || [];\n                var createAtBottom = createAt.toLowerCase() === BOTTOM;\n                var model;\n                var virtualEditable = that._isVirtualEditable();\n                if (that.editable && that.editable.end() || !that.editable) {\n                    if (mode != 'incell') {\n                        that.cancelRow();\n                    }\n                    index = dataSource.indexOf(view[0]);\n                    if (createAtBottom) {\n                        index += view.length;\n                        if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                            index -= 1;\n                        }\n                    }\n                    if (index < 0) {\n                        if (dataSource.page() > dataSource.totalPages()) {\n                            index = (dataSource.page() - 1) * pageSize;\n                        } else {\n                            index = 0;\n                        }\n                    }\n                    if (that.options.navigatable && mode == 'incell') {\n                        that._removeCurrent();\n                    }\n                    if (virtualEditable) {\n                        that._virtualAddRow();\n                    } else {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                    }\n                } else {\n                    that._scrollVirtualWrapper();\n                }\n            },\n            _editModel: function (model) {\n                var that = this;\n                var createAt = that.options.editable.createAt || '';\n                var mode = that._editMode();\n                if (model) {\n                    var id = model.uid, table = that.lockedContent ? that.lockedTable : that.table, row = table.find('tr[' + kendo.attr('uid') + '=' + id + ']'), cell = row.children('td:not(.k-group-cell,.k-hierarchy-cell)').eq(that._firstEditableColumnIndex(row));\n                    if (mode === 'inline' && row.length) {\n                        that.editRow(row);\n                    } else if (mode === 'popup') {\n                        that.editRow(model);\n                    } else if (cell.length) {\n                        that.editCell(cell);\n                    }\n                    if (createAt.toLowerCase() == 'bottom' && that.lockedContent) {\n                        that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                    }\n                }\n            },\n            _virtualAddRow: function () {\n                var that = this;\n                var createAtBottom = (that.options.editable.createAt || '').toLowerCase() === BOTTOM;\n                that._clearEditableState();\n                if (createAtBottom) {\n                    that._virtualAddRowAtBottom();\n                } else {\n                    that._virtualAddRowAtTop();\n                }\n            },\n            _virtualAddRowAtTop: function () {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var model;\n                if (dataSource.page() === 1) {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                } else {\n                    that._virtualPageToTop(function () {\n                        model = dataSource.insert(0, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToTop();\n                    });\n                }\n            },\n            _virtualAddRowAtBottom: function () {\n                var that = this;\n                var dataSource = that.dataSource;\n                var virtualScrollable = that.virtualScrollable;\n                var index = dataSource.total();\n                var model;\n                if (dataSource.at(index - 1) instanceof ObservableObject) {\n                    model = dataSource.insert(index, {});\n                    that._virtualPageToBottom(function () {\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                } else {\n                    that._virtualPageToBottom(function () {\n                        model = dataSource.insert(index, {});\n                        that._editModel(model);\n                        virtualScrollable.scrollToBottom();\n                    });\n                }\n            },\n            _virtualPageToTop: function (callback) {\n                var that = this;\n                that._virtualPage(0, that.dataSource.take(), function () {\n                    callback();\n                });\n            },\n            _virtualPageToBottom: function (callback) {\n                var that = this;\n                var dataSource = that.dataSource;\n                var take = dataSource.take();\n                var total = dataSource.total();\n                var skip = total > take ? total - take : 0;\n                that._virtualPage(skip, take, function () {\n                    callback();\n                });\n            },\n            _virtualPage: function (skip, take, callback) {\n                var that = this;\n                if (that._isVirtualEditable()) {\n                    that.virtualScrollable._preventScroll = true;\n                    that.virtualScrollable._page(skip, take, callback);\n                }\n            },\n            _firstEditableColumnIndex: function (container) {\n                var that = this, column, columns = leafColumns(that.columns), idx, length, model = that._modelForContainer(container);\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n                return -1;\n            },\n            _toolbar: function () {\n                var that = this, wrapper = that.wrapper, toolbar = that.options.toolbar, editable = that.options.editable, container;\n                if (toolbar) {\n                    container = that.wrapper.find('.k-grid-toolbar');\n                    if (!container.length) {\n                        if (!isFunction(toolbar)) {\n                            toolbar = typeof toolbar === STRING ? toolbar : that._toolbarTmpl(toolbar).replace(templateHashRegExp, '\\\\#');\n                            toolbar = proxy(kendo.template(toolbar), that);\n                        }\n                        container = $('<div class=\"k-header k-grid-toolbar\" />').html(toolbar({})).prependTo(wrapper);\n                        that.angular('compile', function () {\n                            return { elements: container.get() };\n                        });\n                    }\n                    if (editable && editable.create !== false) {\n                        container.on(CLICK + NS, '.k-grid-add', function (e) {\n                            e.preventDefault();\n                            that.addRow();\n                        }).on(CLICK + NS, '.k-grid-cancel-changes', function (e) {\n                            e.preventDefault();\n                            that.cancelChanges();\n                        }).on(CLICK + NS, '.k-grid-save-changes', function (e) {\n                            e.preventDefault();\n                            that.saveChanges();\n                        });\n                    }\n                    container.on(CLICK + NS, '.k-grid-excel', function (e) {\n                        e.preventDefault();\n                        that.saveAsExcel();\n                    });\n                    container.on(CLICK + NS, '.k-grid-pdf', function (e) {\n                        e.preventDefault();\n                        that.saveAsPDF();\n                    });\n                    container.on(INPUT + NS, '.k-grid-search input', function (e) {\n                        var input = e.currentTarget;\n                        clearTimeout(that._searchTimeOut);\n                        that._searchTimeOut = setTimeout(function () {\n                            that._searchTimeOut = null;\n                            var options = that.options;\n                            var searchFields = options.search ? options.search.fields : null;\n                            var expression = {\n                                filters: [],\n                                logic: 'or'\n                            };\n                            var value = input.value;\n                            if (!searchFields) {\n                                searchFields = getColumnsFields(options.columns);\n                            }\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                            }\n                            if (value) {\n                                for (var i = 0; i < searchFields.length; i++) {\n                                    expression.filters.push({\n                                        field: searchFields[i],\n                                        operator: 'contains',\n                                        value: value\n                                    });\n                                }\n                            } else {\n                                expression = {};\n                            }\n                            that.dataSource.filter(expression);\n                        }, 300);\n                    });\n                }\n            },\n            _toolbarTmpl: function (commands) {\n                var that = this, idx, length, html = '', command, searchText = '', messages = that.options.messages.commands;\n                if (isArray(commands)) {\n                    for (idx = 0, length = commands.length; idx < length; idx++) {\n                        command = typeof commands[idx] === 'string' ? commands[idx].toLowerCase() : (commands[idx].name || '').toLowerCase();\n                        if (command === 'search') {\n                            if (typeof commands[idx] !== 'string') {\n                                searchText = commands[idx].text;\n                            }\n                            searchText = searchText || messages.search;\n                            html += '<span class=\\'k-textbox k-grid-search k-display-flex\\'>';\n                            html += '<input autocomplete=\\'off\\' placeholder=\\'' + searchText + '\\' title=\\'' + searchText + '\\' class=\\'k-input\\' />';\n                            html += '<span class=\\'k-input-icon\\'><span class=\\'k-icon k-i-search\\'></span></span>';\n                            html += '</span>';\n                        } else {\n                            html += that._createButton(commands[idx]);\n                        }\n                    }\n                }\n                return html;\n            },\n            _createButton: function (command) {\n                var template = command.template || COMMANDBUTTONTMPL, commandName = typeof command === STRING ? command : command.name || command.text, className = defaultCommands[commandName] ? defaultCommands[commandName].className : 'k-grid-' + (commandName || '').replace(/\\s/g, ''), options = {\n                        className: className,\n                        text: commandName,\n                        attr: '',\n                        iconClass: ''\n                    }, messages = this.options.messages.commands, attributeClassMatch;\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error('Custom commands should have name specified');\n                }\n                if (isPlainObject(command)) {\n                    command = extend(true, {}, command);\n                    if (command.className && inArray(options.className, command.className.split(' ')) < 0) {\n                        command.className += ' ' + options.className;\n                    } else if (command.className === undefined) {\n                        command.className = options.className;\n                    }\n                    if (commandName === 'edit') {\n                        command = extend(true, {}, command);\n                        command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                        command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                    }\n                    if (command.attr) {\n                        if (isPlainObject(command.attr)) {\n                            command.attr = stringifyAttributes(command.attr);\n                        }\n                        if (typeof command.attr === STRING) {\n                            attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n                            if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(' ')) < 0) {\n                                command.className += ' ' + attributeClassMatch[1];\n                            }\n                        }\n                    }\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n                }\n                return kendo.template(template)(options);\n            },\n            _hasFooters: function () {\n                return !!this.footerTemplate || !!this.groupFooterTemplate || this.footer && this.footer.length > 0 || this.wrapper.find('.k-grid-footer').length > 0;\n            },\n            _groupable: function () {\n                var that = this;\n                if (that._groupableClickHandler) {\n                    that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n                } else {\n                    that._groupableClickHandler = function (e) {\n                        var element = $(this), groupRow = element.closest('tr');\n                        var group = that._groupRows ? that._groupRows[that.wrapper.find('.k-grouping-row').index(groupRow)] : {};\n                        if (element.hasClass('k-i-collapse')) {\n                            if (!that.trigger('groupCollapse', {\n                                    group: group,\n                                    element: groupRow\n                                })) {\n                                that.collapseGroup(groupRow);\n                            }\n                        } else {\n                            if (!that.trigger('groupExpand', {\n                                    group: group,\n                                    element: groupRow\n                                })) {\n                                that.expandGroup(groupRow);\n                            }\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                }\n                if (that._isLocked()) {\n                    that.lockedTable.on(CLICK + NS, '.k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse', that._groupableClickHandler);\n                } else {\n                    that.table.on(CLICK + NS, '.k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse', that._groupableClickHandler);\n                }\n                that._attachGroupable();\n            },\n            _attachGroupable: function () {\n                var that = this, wrapper = that.wrapper, groupable = that.options.groupable, draggables = HEADERCELLS + '[' + kendo.attr('field') + ']', filter = that.content ? '.k-grid-header:first ' + draggables : 'table:first>.k-grid-header ' + draggables;\n                if (groupable && groupable.enabled !== false) {\n                    if (!wrapper.has('div.k-grouping-header')[0]) {\n                        $('<div>&nbsp;</div>').addClass('k-grouping-header').prependTo(wrapper);\n                    }\n                    if (that.groupable) {\n                        that._destroyGroupable();\n                    }\n                    if (browser.chrome) {\n                        wrapper.find('div.k-grouping-header').css('touch-action', 'none');\n                        wrapper.find(filter).css('touch-action', 'none');\n                    }\n                    that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                        draggable: that._draggableInstance,\n                        groupContainer: '>div.k-grouping-header',\n                        dataSource: that.dataSource,\n                        draggableElements: filter,\n                        filter: filter,\n                        allowDrag: that.options.reorderable,\n                        change: function (e) {\n                            if (that.trigger('group', { groups: e.groups })) {\n                                e.preventDefault();\n                            } else {\n                                that._clearEditableState();\n                                if (that.dataSource.options.endless) {\n                                    that.dataSource.options.endless = null;\n                                    that._endlessPageSize = that.dataSource.options.pageSize;\n                                    that.dataSource._skip = 0;\n                                    that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n                                    that.dataSource._page = 1;\n                                }\n                            }\n                        }\n                    }));\n                    that._addGroupableOptionsToHeader();\n                }\n            },\n            _addGroupableOptionsToHeader: function () {\n                var that = this;\n                var columns = flatColumns(that.columns);\n                var columnFieldMap = {};\n                var field = '';\n                var headerCells = that._headerCells();\n                var cellFieldAttr = '';\n                var headerCell;\n                var columnOptions;\n                var i;\n                for (i = 0; i < columns.length; i++) {\n                    field = columns[i].field;\n                    columnFieldMap[columns[i].field] = columns[i];\n                }\n                for (i = 0; i < headerCells.length; i++) {\n                    headerCell = headerCells.eq(i);\n                    cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                    columnOptions = columnFieldMap[cellFieldAttr];\n                    if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                        headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                    }\n                }\n            },\n            _destroyGroupable: function () {\n                var that = this;\n                if (that.groupable && that.groupable.element) {\n                    that.groupable.element.kendoGroupable('destroy');\n                }\n                that.groupable = null;\n                that._removeGroupableOptionsFromHeader();\n            },\n            _removeGroupableOptionsFromHeader: function () {\n                var that = this;\n                var headerCells = that._headerCells();\n                for (var i = 0; i < headerCells.length; i++) {\n                    headerCells.eq(i).removeData(GROUP_SORT);\n                }\n            },\n            _continuousItems: function (filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n                var that = this;\n                var elements = that.table.add(that.lockedTable);\n                var lockedItems = $(filter, elements[0]);\n                var nonLockedItems = $(filter, elements[1]);\n                var columns = cell ? lockedColumns(that.columns).length : 1;\n                var nonLockedColumns = cell ? that.columns.length - columns : 1;\n                var result = [];\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n                }\n                return result;\n            },\n            _selectable: function () {\n                var that = this, multi, cell, notString = [], isLocked = that._isLocked(), selectable = that.options.selectable;\n                if (selectable) {\n                    if (that.selectable) {\n                        that.selectable.destroy();\n                    }\n                    that._selectedIds = {};\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n                    multi = selectable.multiple;\n                    cell = selectable.cell;\n                    if (that._hasDetails()) {\n                        notString[notString.length] = '.k-detail-row';\n                    }\n                    if (that.options.groupable || that._hasFooters() || that._groups()) {\n                        notString[notString.length] = '.k-grouping-row,.k-group-footer';\n                    }\n                    notString = notString.join(',');\n                    if (notString !== '') {\n                        notString = ':not(' + notString + ')';\n                    }\n                    var elements = that.table;\n                    if (isLocked) {\n                        elements = elements.add(that.lockedTable);\n                    }\n                    var filter = '>' + (cell ? SELECTION_CELL_SELECTOR : 'tbody>tr' + notString);\n                    that.selectable = new kendo.ui.Selectable(elements, {\n                        filter: filter,\n                        aria: true,\n                        multiple: multi,\n                        change: function () {\n                            var selectedValues;\n                            if (!cell) {\n                                that._persistSelectedRows();\n                            }\n                            if (that._checkBoxSelection) {\n                                selectedValues = that.selectable.value();\n                                that._uncheckCheckBoxes();\n                                that._checkRows(selectedValues);\n                                if (selectedValues.length && selectedValues.length === that.items().length) {\n                                    that._toggleHeaderCheckState(true);\n                                } else {\n                                    that._toggleHeaderCheckState(false);\n                                }\n                            }\n                            that.trigger(CHANGE);\n                        },\n                        useAllItems: isLocked && multi && cell,\n                        relatedTarget: function (items) {\n                            if (cell || !isLocked) {\n                                return;\n                            }\n                            var related;\n                            var result = $();\n                            for (var idx = 0, length = items.length; idx < length; idx++) {\n                                related = that._relatedRow(items[idx]);\n                                if (inArray(related[0], items) < 0) {\n                                    result = result.add(related);\n                                }\n                            }\n                            return result;\n                        },\n                        continuousItems: function () {\n                            return that._continuousItems(filter, cell);\n                        }\n                    });\n                    if (that.options.navigatable) {\n                        elements.on('keydown' + NS, function (e) {\n                            var current = that.current();\n                            var target = e.target;\n                            if (!current) {\n                                return;\n                            }\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 && !current.is('.k-edit-cell,.k-header') && current.parent().is(':not(.k-grouping-row,.k-detail-row,.k-group-footer)')) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            that._deselectCheckRows(current);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                            } else if (!cell && ($(target).is('td') || $(target).is('table') && inArray(target, this._navigatableTables)) && (e.shiftKey && e.keyCode == keys.LEFT || e.shiftKey && e.keyCode == keys.RIGHT || e.shiftKey && e.keyCode == keys.UP || e.shiftKey && e.keyCode == keys.DOWN || e.keyCode === keys.SPACEBAR && e.shiftKey)) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n                                } else {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                }\n                            }\n                        });\n                    }\n                }\n            },\n            _clipboard: function () {\n                var options = this.options;\n                var selectable = options.selectable;\n                if (selectable && options.allowCopy) {\n                    var grid = this;\n                    if (!options.navigatable) {\n                        grid.table.add(grid.lockedTable).attr('tabindex', 0).on('mousedown' + NS + ' keydown' + NS, '.k-detail-cell', function (e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        }).on('mousedown' + NS, NAVROW + '>' + NAVCELL, proxy(tableClick, grid));\n                    }\n                    grid.copyHandler = proxy(grid.copySelection, grid);\n                    grid.updateClipBoardState = function () {\n                        if (grid.areaClipBoard) {\n                            grid.areaClipBoard.val(grid.getTSV()).focus().select();\n                        }\n                    };\n                    grid.bind('change', grid.updateClipBoardState);\n                    grid.wrapper.on('keydown', grid.copyHandler);\n                    grid.clearAreaHandler = proxy(grid.clearArea, grid);\n                    grid.wrapper.on('keyup', grid.clearAreaHandler);\n                }\n            },\n            copySelection: function (e) {\n                if (e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey) || $(e.target).is('input:visible,textarea:visible') || window.getSelection && window.getSelection().toString() || document.selection && document.selection.createRange().text) {\n                    return;\n                }\n                if (!this.areaClipBoard) {\n                    this.areaClipBoard = $('<textarea />').css({\n                        position: 'fixed',\n                        top: '50%',\n                        left: '50%',\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    }).appendTo(this.wrapper);\n                }\n                this.areaClipBoard.val(this.getTSV()).focus().select();\n            },\n            getTSV: function () {\n                var grid = this;\n                var selected = grid.select();\n                var delimeter = '\\t';\n                var allowCopy = grid.options.allowCopy;\n                var onlyVisible = true;\n                if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                    delimeter = allowCopy.delimeter;\n                }\n                var text = '';\n                if (selected.length) {\n                    if (selected.eq(0).is('tr')) {\n                        selected = selected.find('td:not(.k-group-cell)');\n                    }\n                    if (onlyVisible) {\n                        selected.filter(':visible');\n                    }\n                    var result = [];\n                    var cellsOffset = this.columns.length;\n                    var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                    var inLockedArea = true;\n                    $.each(selected, function (idx, cell) {\n                        cell = $(cell);\n                        var tr = cell.closest('tr');\n                        var rowIndex = tr.index();\n                        var cellIndex = cell.index();\n                        if (onlyVisible) {\n                            cellIndex -= cell.prevAll(':hidden').length;\n                        }\n                        if (lockedCols && inLockedArea) {\n                            inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                        }\n                        if (grid._groups() && inLockedArea) {\n                            cellIndex -= grid._groups();\n                        }\n                        cellIndex = inLockedArea ? cellIndex : cellIndex + lockedCols;\n                        if (cellsOffset > cellIndex) {\n                            cellsOffset = cellIndex;\n                        }\n                        var cellText = cell.text();\n                        if (!result[rowIndex]) {\n                            result[rowIndex] = [];\n                        }\n                        result[rowIndex][cellIndex] = cellText;\n                    });\n                    var rowsOffset = result.length;\n                    result = $.each(result, function (idx, val) {\n                        if (val) {\n                            result[idx] = val.slice(cellsOffset);\n                            if (rowsOffset > idx) {\n                                rowsOffset = idx;\n                            }\n                        }\n                    });\n                    $.each(result.slice(rowsOffset), function (idx, val) {\n                        if (val) {\n                            text += val.join(delimeter) + '\\r\\n';\n                        } else {\n                            text += '\\r\\n';\n                        }\n                    });\n                }\n                return text;\n            },\n            clearArea: function (e) {\n                var table;\n                if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                    if (this.options.navigatable) {\n                        table = $(this.current()).closest('table');\n                    } else {\n                        table = this.table;\n                    }\n                    focusTable(table, true);\n                }\n                if (this.areaClipBoard) {\n                    this.areaClipBoard.remove();\n                    this.areaClipBoard = null;\n                }\n            },\n            _adaptiveColumns: function () {\n                var that = this;\n                if (that._anyColumnHasMediaQuery()) {\n                    that._setColumnsMediaVisibility(that.columns);\n                    that._attachColumnMediaResizeHandler();\n                }\n            },\n            _anyColumnHasMediaQuery: function () {\n                return this._columnsWithMediaQuery().length;\n            },\n            _columnsWithMediaQuery: function () {\n                return columnsWithMedia(this.columns);\n            },\n            _attachColumnMediaResizeHandler: function () {\n                var that = this;\n                that._detachColumnMediaResizeHandler();\n                that._columnMediaResizeHandler = proxy(that._onColumnMediaResize, that);\n                $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n            },\n            _detachColumnMediaResizeHandler: function () {\n                var that = this;\n                if (that._columnMediaResizeHandler) {\n                    $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n                }\n            },\n            _onColumnMediaResize: function () {\n                var that = this;\n                that._setColumnsMediaVisibility(that.columns);\n                that._setContentMediaWidth();\n            },\n            _setColumnsMediaVisibility: function (columns) {\n                var cols = columns || [];\n                for (var i = 0; i < cols.length; i++) {\n                    this._setColumnMediaVisibility(cols[i]);\n                }\n            },\n            _setColumnMediaVisibility: function (column) {\n                var that = this;\n                if (isUndefined(column.media)) {\n                    that._setColumnsMediaVisibility(column.columns);\n                } else {\n                    if (columnMatchesMedia(column)) {\n                        that._showColumnByMedia(column);\n                        if (!column.hidden) {\n                            that._setColumnsMediaVisibility(column.columns);\n                        }\n                    } else {\n                        that._hideColumnByMedia(column);\n                    }\n                }\n            },\n            _showColumnByMedia: function (column) {\n                if (!column.hidden) {\n                    this.showColumn(column);\n                }\n                setColumnMatchesMedia(column);\n            },\n            _hideColumnByMedia: function (column) {\n                var initiallyHidden = column.hidden;\n                if (!initiallyHidden) {\n                    column._hideByMedia = true;\n                    this.hideColumn(column);\n                    column._hideByMedia = false;\n                    column.hidden = initiallyHidden;\n                }\n                setColumnMatchesMedia(column);\n            },\n            _setContentMediaWidth: function () {\n                var that = this;\n                var options = that.options;\n                var isLocked = that._isLocked();\n                var footer;\n                if (options.scrollable && options.resizable) {\n                    if (isLocked && that.lockedFooter) {\n                        footer = that.lockedFooter.children('table');\n                    } else if (that.footer) {\n                        footer = that.footer.find('>.k-grid-footer-wrap>table');\n                    }\n                    if (!footer || !footer[0]) {\n                        footer = $();\n                    }\n                    var header = isLocked ? that.wrapper.find('.k-grid-header-locked').find('table') : that.wrapper.find('.k-grid-header').find('table');\n                    var contentTable = isLocked ? that.lockedTable : that.table;\n                    var headerColumns = header.find('th');\n                    var headerColgroup = header.find('colgroup');\n                    var headerColumnsCount = headerColumns.length;\n                    var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                    var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n                    var totalHeaderWidth = 0;\n                    if (header[0].style.width !== '' && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                        var currentHeaderWidth = header.css('width');\n                        for (var i = 0; i < headerColumnsCount; i++) {\n                            if (isElementVisible(headerColumns[i])) {\n                                var columnWidth;\n                                var cellIndex = Math.max(i, i - hiddenHeaderColumnsCount);\n                                var colgroupChild = headerColgroup.children()[cellIndex];\n                                var columnStyleWidth = colgroupChild ? colgroupChild.style.width : '';\n                                if (columnStyleWidth !== '') {\n                                    columnWidth = parseFloat(columnStyleWidth);\n                                } else {\n                                    header.css('width', 'auto');\n                                    columnWidth = outerWidth(headerColumns.eq(i));\n                                    header.css('width', currentHeaderWidth);\n                                }\n                                totalHeaderWidth += columnWidth;\n                            }\n                        }\n                        contentTable.css('width', totalHeaderWidth - 1);\n                        header.css('width', totalHeaderWidth);\n                        footer.css('width', totalHeaderWidth);\n                    }\n                }\n            },\n            _minScreenSupport: function () {\n                var any = this.hideMinScreenCols();\n                if (any) {\n                    this.minScreenResizeHandler = proxy(this.hideMinScreenCols, this);\n                    $(window).on('resize', this.minScreenResizeHandler);\n                }\n            },\n            hideMinScreenCols: function () {\n                var cols = this.columns, screenWidth = window.innerWidth > 0 ? window.innerWidth : screen.width;\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n            _iterateMinScreenCols: function (cols, screenWidth) {\n                var any = false;\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n            _relatedRow: function (row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n                if (!lockedTable) {\n                    return row;\n                }\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find('>tbody>tr').index(row);\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n                return table.find('>tbody>tr').eq(index);\n            },\n            _relatedCell: function (cell) {\n                var lockedTable = this.lockedTable;\n                cell = $(cell);\n                if (!lockedTable) {\n                    return cell;\n                }\n                var table = cell.closest(this.table.add(this.lockedTable));\n                var index = table.find('>tbody>tr>td').index(cell);\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n                return table.find('>tbody>tr>td').index(index);\n            },\n            clearSelection: function () {\n                var that = this;\n                if (that.selectable && !that._checkBoxSelection) {\n                    that.selectable.clear();\n                }\n                if (that._checkBoxSelection) {\n                    that._deselectCheckRows(that.select());\n                    return;\n                }\n                if (that.options.persistSelection) {\n                    that._persistSelectedRows();\n                } else {\n                    that._selectedIds = {};\n                }\n                that.trigger(CHANGE);\n            },\n            select: function (items) {\n                var that = this, selectable = that.selectable, selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable), cell = selectableoptions.cell;\n                items = that.table.add(that.lockedTable).find(items);\n                if (items.length) {\n                    if (selectable && !selectable.options.multiple) {\n                        selectable.clear();\n                        items = items.first();\n                    }\n                    if (that._isLocked()) {\n                        items = items.add(items.map(function () {\n                            if (cell) {\n                                return that._relatedCell(this);\n                            } else {\n                                return that._relatedRow(this);\n                            }\n                        }));\n                    }\n                    if (selectable && !that._checkBoxSelection) {\n                        selectable.value(items);\n                    } else {\n                        that._checkRows(items);\n                        if (that.select().length === that.items().length) {\n                            that._toggleHeaderCheckState(true);\n                        }\n                        if (!cell) {\n                            that._persistSelectedRows();\n                        }\n                        that.trigger(CHANGE);\n                    }\n                    return;\n                }\n                return selectable ? selectable.value() : that.items().filter('.' + SELECTED);\n            },\n            _toggleHeaderCheckState: function (checked) {\n                var that = this;\n                if (checked) {\n                    that.thead.add(that.lockedHeader).find('tr ' + CHECKBOXINPUT).prop('checked', true).attr('aria-checked', true).attr('aria-label', 'Deselect all rows');\n                } else {\n                    that.thead.add(that.lockedHeader).find('tr ' + CHECKBOXINPUT).prop('checked', false).attr('aria-checked', false).attr('aria-label', 'Select all rows');\n                }\n            },\n            _uncheckCheckBoxes: function () {\n                var that = this;\n                var tables = that.table.add(that.lockedTable);\n                tables.find('tbody ' + CHECKBOXINPUT).attr('aria-checked', false).prop('checked', false).attr('aria-label', 'Select row');\n            },\n            _deselectCheckRows: function (items) {\n                var that = this;\n                items = that.table.add(that.lockedTable).find(items);\n                if (that._isLocked()) {\n                    items = items.add(items.map(function () {\n                        return that._relatedRow(this);\n                    }));\n                }\n                items.each(function () {\n                    $(this).removeClass(SELECTED).find(CHECKBOXINPUT).attr('aria-checked', false).prop('checked', false).attr('aria-label', 'Select row');\n                });\n                that._toggleHeaderCheckState(false);\n                that._persistSelectedRows();\n                that.trigger(CHANGE);\n            },\n            _checkRows: function (items) {\n                items.each(function () {\n                    $(this).addClass(SELECTED).find(CHECKBOXINPUT).prop('checked', true).attr('aria-label', 'Deselect row').attr('aria-checked', true);\n                });\n            },\n            _persistSelectedRows: function () {\n                var that = this, key, dataItem, allRows = that.items(), dataSourceOptions = that.dataSource.options, schema = dataSourceOptions.schema, modelId, selectedViewIds = {};\n                if (!schema || !schema.model || !that._data) {\n                    return;\n                }\n                modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n                if (!modelId) {\n                    return;\n                }\n                that.select().each(function () {\n                    dataItem = that.dataItem(this);\n                    selectedViewIds[dataItem[modelId]] = true;\n                });\n                for (var i = 0; i < allRows.length; i++) {\n                    dataItem = that.dataItem(allRows[i]);\n                    key = dataItem[modelId];\n                    if (selectedViewIds[key]) {\n                        that._selectedIds[key] = true;\n                    } else {\n                        delete that._selectedIds[key];\n                    }\n                }\n            },\n            selectedKeyNames: function () {\n                var that = this, ids = [];\n                for (var property in that._selectedIds) {\n                    ids.push(property);\n                }\n                ids.sort();\n                return ids;\n            },\n            _updateCurrentAttr: function (current, next) {\n                var headerId = $(current).data('headerId');\n                $(current).removeClass(FOCUSED).closest('table').removeAttr('aria-activedescendant');\n                if (headerId) {\n                    headerId = headerId.replace(this._cellId, '');\n                    $(current).attr('id', headerId);\n                } else {\n                    $(current).removeAttr('id');\n                }\n                next.data('headerId', next.attr('id')).attr('id', this._cellId).addClass(FOCUSED).closest('table').attr('aria-activedescendant', this._cellId);\n                this._current = next;\n            },\n            _scrollCurrent: function () {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n                if (!current || !scrollable) {\n                    return;\n                }\n                var row = current.parent();\n                var tableContainer = row.closest('table').parent();\n                var isInLockedContainer = tableContainer.is('.k-grid-content-locked,.k-grid-header-locked');\n                var isInContent = tableContainer.is('.k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap');\n                var scrollableContainer = $(this.content).find('>.k-virtual-scrollable-wrap').addBack().last()[0];\n                if (isInContent) {\n                    if (this.virtualScroll) {\n                        var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                        if (this.virtualScroll.rows) {\n                            this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                            this.virtualScrollable.scrollIntoView(row);\n                        } else {\n                            this._rowVirtualIndex = rowIndex;\n                            this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                        }\n                    } else {\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                }\n                if (this.lockedContent) {\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n            current: function (next) {\n                return this._setCurrent(next, true);\n            },\n            _setCurrent: function (next, preventTrigger, preventScroll) {\n                var current = this._current;\n                next = $(next);\n                if (next.length) {\n                    if (!current || current[0] !== next[0]) {\n                        var parent = next.parent();\n                        var siblings = parent.children(DATA_CELL);\n                        var colspan = parseInt(parent.children().first().attr('colspan'), 10);\n                        if (this._hasVirtualColumns()) {\n                            this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                        }\n                        this._updateCurrentAttr(current, next);\n                        if (!preventScroll) {\n                            this._scrollCurrent();\n                        }\n                        if (!preventTrigger) {\n                            this.trigger(NAVIGATE, { element: next });\n                        }\n                    }\n                }\n                if (next && next.length) {\n                    this._lastCellIndex = next.parent().children(DATA_CELL).index(next);\n                }\n                return this._current;\n            },\n            _removeCurrent: function () {\n                if (this._current) {\n                    this._current.removeClass(FOCUSED);\n                    this._current = null;\n                }\n            },\n            _scrollTo: function (element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === 'td' || elementToLowercase === 'th';\n                var table = $(element).closest('table')[0];\n                var elementOffsetDir = element[isHorizontal ? 'offsetWidth' : 'offsetHeight'];\n                var containerScroll = container[isHorizontal ? 'scrollLeft' : 'scrollTop'];\n                var containerOffsetDir = container[isHorizontal ? 'clientWidth' : 'clientHeight'];\n                var elementOffset = $(element).css('position') === 'relative' && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? 'offsetLeft' : 'offsetTop'];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n                if (isRtl && isHorizontal) {\n                    if (browser.msie || browser.edge) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > containerScroll + containerOffsetDir) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = bottomDistance - containerOffsetDir;\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n                container[isHorizontal ? 'scrollLeft' : 'scrollTop'] = result;\n            },\n            _navigatable: function () {\n                var that = this;\n                if (!that.options.navigatable) {\n                    return;\n                }\n                var dataTables = that.table.add(that.lockedTable);\n                var headerTables = that.thead.parent().add($('>table', that.lockedHeader));\n                var tables = dataTables;\n                if (that.options.scrollable) {\n                    tables = tables.add(headerTables);\n                    headerTables.attr(TABINDEX, -1);\n                }\n                this._navigatableTables = tables;\n                tables.off('mousedown' + NS + ' focus' + NS + ' focusout' + NS + ' keydown' + NS);\n                headerTables.on('keydown' + NS, proxy(that._openHeaderMenu, that)).find('a.k-link').attr('tabIndex', -1);\n                dataTables.attr(TABINDEX, math.max(dataTables.attr(TABINDEX) || 0, 0)).on('keydown' + NS, '.k-detail-cell', function (e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n                tables.on(kendo.support.touch ? 'touchstart' + NS : 'mousedown' + NS, NAVROW + '>' + NAVCELL, proxy(tableClick, that)).on('focus' + NS, proxy(that._tableFocus, that)).on('focusout' + NS, proxy(that._tableBlur, that)).on('keydown' + NS, that, proxy(that._tableKeyDown, that));\n            },\n            _openHeaderMenu: function (e) {\n                if (e.altKey && e.keyCode == keys.DOWN) {\n                    this.current().find('.k-grid-filter, .k-header-column-menu').click();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _setTabIndex: function (table) {\n                this._navigatableTables.attr(TABINDEX, -1);\n                table.attr(TABINDEX, 0);\n            },\n            _tableFocus: function (e) {\n                var current = this.current();\n                var table = $(e.currentTarget);\n                if (current && current.is(':visible')) {\n                    current.addClass(FOCUSED);\n                } else {\n                    if (this._virtualColScroll) {\n                        this._setCurrent(table.find(FIRSTNAVITEM), true, true);\n                    } else {\n                        this._setCurrent(table.find(FIRSTNAVITEM));\n                    }\n                }\n                this._setTabIndex(table);\n            },\n            _tableBlur: function () {\n                var current = this.current();\n                if (current) {\n                    current.removeClass(FOCUSED);\n                }\n            },\n            _findCellIndex: function (columns, startIndex, reversed) {\n                var cellIndex;\n                var i;\n                if (reversed) {\n                    for (i = startIndex; i >= 0; i--) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (i = startIndex; i < columns.length; i++) {\n                        cellIndex = i;\n                        if (!columns[i].hidden) {\n                            break;\n                        }\n                    }\n                }\n                return cellIndex;\n            },\n            _scrollToColumn: function (key, e) {\n                if (this._virtualCellIndex === undefined) {\n                    return false;\n                }\n                var that = this;\n                var cellIndex = that._virtualCellIndex;\n                var leafsCols = leafColumns(nonLockedColumns(that.columns));\n                var scrollWidth = 0;\n                if (key == (isRtl ? keys.LEFT : keys.RIGHT) && cellIndex !== leafsCols.length - 1) {\n                    cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n                } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                    cellIndex = that._findCellIndex(leafsCols, cellIndex - 1, true);\n                } else if (key == keys.HOME) {\n                    cellIndex = that._findCellIndex(leafsCols, 0);\n                } else if (key == keys.END) {\n                    cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n                }\n                for (var i = 0; i < cellIndex; i++) {\n                    scrollWidth += leafsCols[i].width;\n                }\n                that._virtualCellIndex = cellIndex;\n                if (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                that.content.scrollLeft(scrollWidth);\n                return true;\n            },\n            _tableKeyDown: function (e) {\n                var current = this.current();\n                var virtualScroll = this.virtualScroll || {};\n                var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n                var target = $(e.target);\n                var canHandle = !e.isDefaultPrevented() && !target.is(':button,a,:input,a>.k-icon');\n                if (requestInProgress) {\n                    e.preventDefault();\n                    return;\n                }\n                if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && this._scrollToColumn(e.keyCode, e)) {\n                    return;\n                }\n                if (!current) {\n                    current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(FIRSTNAVITEM);\n                }\n                if (!current.length) {\n                    return;\n                }\n                var handled = false;\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey);\n                }\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey);\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n                }\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n                if (canHandle && e.keyCode == keys.HOME) {\n                    handled = this._handleHome(current, e.ctrlKey);\n                }\n                if (canHandle && e.keyCode == keys.END) {\n                    handled = this._handleEnd(current, e.ctrlKey);\n                }\n                if (canHandle && e.keyCode == keys.SPACEBAR) {\n                    handled = this._handleSpaceKey(current, e.ctrlKey);\n                }\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, e.currentTarget, target);\n                }\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, e.currentTarget);\n                }\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, e.currentTarget, e.shiftKey);\n                }\n                if (handled) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            },\n            _moveLeft: function (current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                var container = row.parent();\n                if (altKey) {\n                    this.collapseRow(row);\n                } else if (ctrlKey && current.is('.k-header') && this.options.reorderable) {\n                    this._moveColumn(current, true);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._prevHorizontalCell(container, current, index);\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.lockedTable[0], row[0])) {\n                                    next = next.prevAll(ITEMROW + ':first');\n                                }\n                                next = next.children(DATA_CELL + ':last');\n                            } else {\n                                next = this._tabNext(current, currentTable, true);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container);\n                            next = this._prevHorizontalCell(container, current, index);\n                            if (next[0] !== current[0]) {\n                                focusTable(container.parent(), true);\n                            }\n                        }\n                    }\n                    this._setCurrent(next);\n                }\n                return true;\n            },\n            _moveRight: function (current, altKey, shiftKey, ctrlKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                var container = row.parent();\n                if (altKey) {\n                    this.expandRow(row);\n                } else if (ctrlKey && current.is('.k-header') && this.options.reorderable) {\n                    this._moveColumn(current, false);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._nextHorizontalCell(container, current, index);\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.table[0], row[0])) {\n                                    next = next.nextAll(ITEMROW + ':first');\n                                }\n                                next = next.children(DATA_CELL + ':first');\n                            } else {\n                                next = this._tabNext(current, currentTable, false);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container, true);\n                            next = this._nextHorizontalCell(container, current, index);\n                            if (next[0] !== current[0]) {\n                                focusTable(container.parent(), true);\n                            }\n                        }\n                    }\n                    this._setCurrent(next);\n                }\n                return true;\n            },\n            _moveUp: function (current, shiftKey) {\n                var container = current.parent().parent();\n                var next;\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.prevAll(ITEMROW + ':first');\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL + ':last');\n                } else {\n                    next = this._prevVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container, true);\n                        next = this._prevVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n            _moveDown: function (current, shiftKey) {\n                var container = current.parent().parent();\n                var next;\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW + ':first');\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL + ':first');\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        this._lastCellIndex = 0;\n                        container = this._verticalContainer(container);\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                var tmp = this._lastCellIndex || 0;\n                this._setCurrent(next);\n                this._lastCellIndex = tmp;\n                return true;\n            },\n            _moveColumn: function (current, isLeft) {\n                var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + ':visible');\n                var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n                var oldIndex = elements.index($(current));\n                var offset = isLeft ? -1 : 1;\n                var column = columns[oldIndex];\n                var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n                if (newIndex >= 0) {\n                    this.reorderColumn(newIndex, column, isLeft);\n                    this.trigger(COLUMNREORDER, {\n                        newIndex: newIndex,\n                        oldIndex: oldIndex,\n                        column: column\n                    });\n                }\n            },\n            _handleHome: function (current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children('tbody')[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var prev;\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(kendo.keys.HOME);\n                    return true;\n                }\n                if (ctrl) {\n                    if (this.lockedTable) {\n                        prev = this.lockedTable.find(FIRSTITEMROW + '>' + NAVCELL + ':first');\n                    } else {\n                        prev = this.table.find(FIRSTITEMROW + '>' + NAVCELL + ':first');\n                    }\n                } else if (isInBody || isInLockedTable) {\n                    if (isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    prev = row.children(DATA_CELL + ':first');\n                }\n                if (prev && prev.length) {\n                    this._setCurrent(prev);\n                    return true;\n                }\n            },\n            _handleEnd: function (current, ctrl) {\n                var row = current.parent();\n                var rowContainer = row.parent();\n                var isInLockedTable = this.lockedTable && this.lockedTable.children('tbody')[0] === rowContainer[0];\n                var isInBody = rowContainer[0] === this.tbody[0];\n                var next;\n                if (this._hasVirtualColumns()) {\n                    this._scrollToColumn(kendo.keys.END);\n                    return true;\n                }\n                if (ctrl) {\n                    next = this.table.find(LASTITEMROW + '>' + NAVCELL + ':last');\n                } else if (isInBody || isInLockedTable) {\n                    if (!isInBody && this.lockedTable) {\n                        row = this._relatedRow(row);\n                    }\n                    next = row.children(DATA_CELL + ':last');\n                }\n                if (next && next.length) {\n                    this._setCurrent(next);\n                    return true;\n                }\n            },\n            _handlePageDown: function () {\n                if (!this.options.pageable) {\n                    return false;\n                }\n                this.dataSource.page(this.dataSource.page() + 1);\n                return true;\n            },\n            _handlePageUp: function () {\n                if (!this.options.pageable) {\n                    return false;\n                }\n                this.dataSource.page(this.dataSource.page() - 1);\n                return true;\n            },\n            _handleTabKey: function (current, currentTable, shiftKey) {\n                var isInCell = this.options.editable && this._editMode() == 'incell';\n                var cell;\n                if (!isInCell || current.is('th')) {\n                    return false;\n                }\n                cell = $(activeElement()).closest('.k-edit-cell');\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n                cell = this._tabNext(current, currentTable, shiftKey);\n                if (cell[0] === current[0]) {\n                    return false;\n                }\n                if (cell.length) {\n                    this._handleEditing(current, cell, cell.closest('table'));\n                    return true;\n                }\n                return false;\n            },\n            _handleEscKey: function (current, currentTable) {\n                var active = activeElement();\n                var isInCell = this._editMode() == 'incell';\n                if (!isInEdit(current)) {\n                    if (current.has(active).length) {\n                        focusTable(currentTable, true);\n                        return true;\n                    }\n                    return false;\n                }\n                if (isInCell) {\n                    this.closeCell(true);\n                } else {\n                    var currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow(true);\n                    if (currentIndex >= 0) {\n                        this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n                if (browser.msie && browser.version < 9) {\n                    document.body.focus();\n                }\n                focusTable(currentTable, true);\n                return true;\n            },\n            _toggleCurrent: function (current, editable) {\n                var row = current.parent();\n                if (row.is('.k-grouping-row')) {\n                    row.find('.k-icon:first').click();\n                    return true;\n                }\n                if (!editable && row.is('.k-master-row')) {\n                    row.find('.k-icon:first').click();\n                    return true;\n                }\n                return false;\n            },\n            _handleSpaceKey: function (current, ctrlKey) {\n                var that = this;\n                if (!ctrlKey || !that.groupable || !current.hasClass('k-header')) {\n                    return;\n                }\n                var descriptors = that.groupable.descriptors();\n                var field = current.attr(kendo.attr('field'));\n                var aggregates = that.groupable.aggregates();\n                var label = current.attr(kendo.attr('title')) || field;\n                if (that.groupable._canDrag(current)) {\n                    descriptors.push({\n                        field: field,\n                        dir: 'asc',\n                        aggregates: aggregates || []\n                    });\n                    label += ' ' + that.options.messages.ungroupHeader;\n                } else {\n                    descriptors = $.grep(descriptors, function (item) {\n                        return item.field !== field;\n                    });\n                    label += ' ' + that.options.messages.groupHeader;\n                }\n                current.attr('aria-label', label);\n                that.dataSource.group(descriptors);\n                return true;\n            },\n            _handleEnterKey: function (current, currentTable, target) {\n                var editable = this.options.editable && this.options.editable.update !== false;\n                var container = target.closest('[role=gridcell]');\n                var link;\n                if (!target.is('table') && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n                if (current.is('th')) {\n                    link = current.find('.k-link');\n                    if (link.length) {\n                        link.click();\n                    } else {\n                        current.find(CHECKBOXINPUT).focus();\n                    }\n                    return true;\n                }\n                if (this._toggleCurrent(current, editable)) {\n                    return true;\n                }\n                var focusable = current.find(':kendoFocusable:first');\n                if (focusable[0] && !current.hasClass('k-edit-cell') && current.hasClass('k-state-focused')) {\n                    focusable.focus();\n                    return true;\n                }\n                if (editable && !target.is(':button,.k-button,textarea')) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n                    this._handleEditing(container, false, currentTable);\n                    return true;\n                }\n                return false;\n            },\n            _nextHorizontalCell: function (table, current, originalIndex) {\n                var cells = current.nextAll(DATA_CELL);\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n                    if (rowIndex == -1) {\n                        if (current.hasClass('k-header')) {\n                            var headerRows = [];\n                            mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(':visible').first()), headerRows, 0, 0);\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n                            return current;\n                        }\n                        if (current.parent().hasClass('k-filter-row')) {\n                            return rows.last().children(DATA_CELL).first();\n                        }\n                        return rows.eq(originalIndex).children(DATA_CELL).first();\n                    }\n                }\n                return cells.first();\n            },\n            _prevHorizontalCell: function (table, current, originalIndex) {\n                var cells = current.prevAll(DATA_CELL);\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n                    if (rowIndex == -1) {\n                        if (current.hasClass('k-header')) {\n                            var headerRows = [];\n                            var columns = lockedColumns(this.columns);\n                            mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n                            return current;\n                        }\n                        if (current.parent().hasClass('k-filter-row')) {\n                            return rows.last().children(DATA_CELL).last();\n                        }\n                        return rows.eq(originalIndex).children(DATA_CELL).last();\n                    }\n                }\n                return cells.first();\n            },\n            _currentDataIndex: function (table, current) {\n                var index = current.attr('data-index');\n                if (!index) {\n                    return undefined;\n                }\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest('div').hasClass('k-grid-content-locked')[0]) {\n                    return index - lockedColumnsCount;\n                }\n                return index;\n            },\n            _prevVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                if (index || current.hasClass('k-header')) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n                index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0);\n                if (row.hasClass('k-filter-row')) {\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n                if (rowIndex == -1) {\n                    if (this._hasVirtualColumns()) {\n                        index = this._virtualCellIndex;\n                    }\n                    row = container.find('tr.k-filter-row:visible');\n                    if (!row[0]) {\n                        if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                            index--;\n                        }\n                        return leafDataCells(container).filter(isCellVisible).eq(index);\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _nextVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                var virtualScroll = this.virtualScroll || {};\n                var colspan;\n                if (rowIndex != -1 && index === undefined && current.hasClass('k-header')) {\n                    return childColumnsCells(current).eq(1);\n                }\n                index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n                index = Math.max(index, this._lastCellIndex || 0);\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                    if (virtualScroll.columns) {\n                        colspan = parseInt(row.children().first().attr('colspan'), 10);\n                        index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                    }\n                    if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                        index++;\n                    }\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n                var tmpIndex = index;\n                if (this._currentDataIndex(container, current) !== undefined) {\n                    var currentRowCells = row.children(':not(.k-group-cell):not(.k-hierarchy-cell)');\n                    var hiddenColumns = currentRowCells.filter(':hidden');\n                    for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                        if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                            tmpIndex--;\n                        }\n                    }\n                }\n                index = tmpIndex;\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _verticalContainer: function (container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n                return table.find(up ? '>thead' : '>tbody');\n            },\n            _horizontalContainer: function (container, right) {\n                var length = this._navigatableTables.length;\n                if (length <= 2) {\n                    return container;\n                }\n                var table = container.parent();\n                var index = inArray(table[0], this._navigatableTables);\n                index += right ? 1 : -1;\n                if (right && (index == 2 || index == length)) {\n                    return container;\n                }\n                if (!right && (index == 1 || index < 0)) {\n                    return container;\n                }\n                return this._navigatableTables.eq(index).find('thead, tbody');\n            },\n            _tabNext: function (current, currentTable, back) {\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL + ':first') : current.nextAll(':visible:first');\n                if (!next.length) {\n                    next = current.parent();\n                    if (this.lockedTable) {\n                        switchRow = back && currentTable == this.lockedTable[0] || !back && currentTable == this.table[0];\n                        next = this._relatedRow(next);\n                    }\n                    if (switchRow) {\n                        if (this._hasVirtualColumns()) {\n                            return current;\n                        }\n                        next = next[back ? 'prevAll' : 'nextAll']('tr:not(.k-grouping-row):not(.k-detail-row):visible:first');\n                    }\n                    next = next.children(DATA_CELL + (back ? ':last' : ':first'));\n                }\n                return next;\n            },\n            _handleEditing: function (current, next, table) {\n                var that = this, active = $(activeElement()), mode = that._editMode(), isIE = browser.msie, oldIE = isIE && browser.version < 9, editContainer = that._editContainer, focusable, editable = that.options.editable && that.options.editable.update !== false, isEdited;\n                table = $(table);\n                if (mode == 'incell') {\n                    isEdited = current.hasClass('k-edit-cell');\n                } else {\n                    isEdited = current.parent().hasClass('k-grid-edit-row');\n                }\n                if (that.editable) {\n                    if ($.contains(editContainer[0], active[0])) {\n                        if (browser.opera || oldIE) {\n                            active.blur().change().triggerHandler('blur');\n                        } else {\n                            active.blur();\n                            if (isIE) {\n                                active.blur();\n                            }\n                        }\n                    }\n                    if (!that.editable) {\n                        focusTable(table);\n                        return;\n                    }\n                    if (that.editable.end()) {\n                        if (mode == 'incell') {\n                            that.closeCell();\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (mode == 'incell') {\n                            that._setCurrent(editContainer);\n                        } else {\n                            that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                        }\n                        focusable = editContainer.find(':kendoFocusable:first')[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n                if (next) {\n                    that._setCurrent(next);\n                }\n                if (oldIE) {\n                    document.body.focus();\n                }\n                focusTable(table, true);\n                if (!editable) {\n                    return;\n                }\n                if (!isEdited && !next || next) {\n                    if (mode === INCELL) {\n                        if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                            that.editCell(that.current());\n                        }\n                    } else {\n                        that.editRow(that.current().parent());\n                    }\n                }\n            },\n            _wrapper: function () {\n                var that = this, table = that.table, height = that.options.height, width = that.options.width, wrapper = that.element;\n                if (!wrapper.is('div')) {\n                    wrapper = wrapper.wrap('<div/>').parent();\n                }\n                that.wrapper = wrapper.addClass('k-grid k-widget k-grid-display-block');\n                if (height) {\n                    that.wrapper.css(HEIGHT, height);\n                    table.css(HEIGHT, 'auto');\n                }\n                if (width) {\n                    that.wrapper.css('width', width);\n                }\n                that._initMobile();\n            },\n            _initMobile: function () {\n                var options = this.options;\n                var that = this;\n                this._isMobile = options.mobile === true && kendo.support.mobileOS || options.mobile === 'phone' || options.mobile === 'tablet';\n                if (this._isMobile) {\n                    var html = this.wrapper.addClass('k-grid-mobile').wrap('<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' + 'data-' + kendo.ns + 'init-widgets=\"false\"></div>').parent();\n                    this.pane = this._createPane(html);\n                    this.view = this.pane.view();\n                    if (options.height) {\n                        this.pane.element.parent().css(HEIGHT, options.height);\n                    } else {\n                        this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                    }\n                    this._editAnimation = 'slide';\n                    that.wrapper.on('transitionend' + NS, function (e) {\n                        e.stopPropagation();\n                    });\n                    that.wrapper.on('contextmenu' + NS, 'th a', function (e) {\n                        e.preventDefault();\n                        return false;\n                    });\n                    this.view.bind('showStart', function () {\n                        if (that._isLocked()) {\n                            that._updateTablesWidth();\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._syncLockedFooterHeight();\n                        }\n                    });\n                }\n            },\n            _createPane: function (html) {\n                var pane = kendo.Pane.wrap(html, {\n                    viewEngine: {\n                        viewOptions: {\n                            renderOnInit: true,\n                            wrap: false,\n                            wrapInSections: true,\n                            detachOnHide: false,\n                            detachOnDestroy: false\n                        }\n                    }\n                });\n                return pane;\n            },\n            _tbody: function () {\n                var that = this, table = that.table, tbody;\n                tbody = table.find('>tbody');\n                if (!tbody.length) {\n                    tbody = $('<tbody/>').appendTo(table);\n                }\n                that.tbody = tbody.attr('role', 'rowgroup');\n            },\n            _scrollable: function () {\n                var that = this, header, table, options = that.options, scrollable = options.scrollable, hasVirtualScroll = scrollable !== true && scrollable.virtual && !that.virtualScrollable, virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : {}, scrollbar = !kendo.support.kineticScrollNeeded || virtualScroll.rows ? kendo.support.scrollbar() : 0, headerWrap;\n                if (scrollable) {\n                    header = that.wrapper.children('.k-grid-header');\n                    if (!header[0]) {\n                        header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                    }\n                    header.css(isRtl ? 'padding-left' : 'padding-right', scrollable.virtual ? scrollbar + 1 : scrollbar);\n                    table = $('<table role=\"grid\" />');\n                    if (isIE7) {\n                        table.attr('cellspacing', 0);\n                    }\n                    table.width(that.table[0].style.width);\n                    table.append(that.thead);\n                    header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n                    that.content = that.table.parent();\n                    that.virtualScroll = virtualScroll;\n                    if (that.content.is('.k-virtual-scrollable-wrap, ' + DOT + classNames.scrollContainer)) {\n                        that.content = that.content.parent();\n                    }\n                    if (!that.content.is('.k-grid-content, .k-virtual-scrollable-wrap')) {\n                        that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                    }\n                    if (virtualScroll.rows) {\n                        that._createVirtualScrollable();\n                    }\n                    if (virtualScroll.columns) {\n                        that.table.css({ width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns))) });\n                    }\n                    headerWrap = header.children('.k-grid-header-wrap');\n                    that.scrollables = headerWrap.add(that.content);\n                    var footer = that.wrapper.find('.k-grid-footer');\n                    if (footer.length) {\n                        that.scrollables = that.scrollables.add(footer.children('.k-grid-footer-wrap'));\n                    }\n                    headerWrap.unbind('scroll' + NS).bind('scroll' + NS, function (e) {\n                        if (that._scrollLeft !== this.scrollLeft) {\n                            that.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft);\n                        }\n                    });\n                    if (virtualScroll.rows) {\n                        that.content.find('>.k-virtual-scrollable-wrap').unbind('scroll' + NS).bind('scroll' + NS, function () {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            that.scrollables.scrollLeft(this.scrollLeft);\n                            if (that.lockedContent) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (virtualScroll.columns && isScrollingLeft) {\n                                that.refresh();\n                            }\n                        });\n                    } else {\n                        var endless = scrollable.endless;\n                        var originalPageSize = that.dataSource.options.pageSize;\n                        if (endless) {\n                            that._endlessPageSize = originalPageSize;\n                        }\n                        that.content.unbind('scroll' + NS).bind('scroll' + NS, function (e) {\n                            var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                            that._scrollLeft = this.scrollLeft;\n                            that.scrollables.not(e.currentTarget).scrollLeft(that._scrollLeft);\n                            if (that.lockedContent && e.currentTarget == that.content[0]) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                            if (endless) {\n                                if (this.scrollTop + this.clientHeight - this.scrollHeight >= -10 && !that._endlessFetchInProgress && that._endlessPageSize < that.dataSource.total()) {\n                                    that._skipRerenderItemsCount = that._endlessPageSize;\n                                    that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                    that.dataSource.options.endless = true;\n                                    that._endlessFetchInProgress = true;\n                                    that.dataSource.pageSize(that._endlessPageSize);\n                                }\n                            }\n                            if (virtualScroll.columns && isScrollingLeft) {\n                                that._virtualColScroll = true;\n                                that._cacheEditableState();\n                                that.refresh();\n                                that._restoreEditableState();\n                                that._virtualColScroll = false;\n                            }\n                        });\n                        var touchScroller = that.content.data('kendoTouchScroller');\n                        if (touchScroller) {\n                            touchScroller.destroy();\n                        }\n                        touchScroller = kendo.touchScroller(that.content);\n                        if (touchScroller && touchScroller.movable) {\n                            that.touchScroller = touchScroller;\n                            touchScroller.movable.bind('change', function (e) {\n                                that.scrollables.scrollLeft(-e.sender.x);\n                                if (that.lockedContent) {\n                                    that.lockedContent.scrollTop(-e.sender.y);\n                                }\n                            });\n                            that.one(DATABOUND, function (e) {\n                                e.sender.wrapper.addClass('k-grid-backface');\n                            });\n                        }\n                    }\n                }\n            },\n            _createVirtualScrollable: function () {\n                var that = this;\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.destroy();\n                }\n                that.virtualScrollable = new VirtualScrollable(that.content, {\n                    dataSource: that.dataSource,\n                    itemHeight: function () {\n                        return that._averageRowHeight();\n                    },\n                    page: function () {\n                        that._restoreEditableState();\n                    },\n                    scroll: function () {\n                        that._focusEditable();\n                    }\n                });\n                that.virtualScrollable.bind(PAGING, proxy(that._onVirtualPaging, that));\n            },\n            _onVirtualPaging: function () {\n                var that = this;\n                that._cacheEditableState();\n                if (that._isVirtualIncellEditable()) {\n                    that._shouldClearEditableState = false;\n                    that.closeCell();\n                    that._shouldClearEditableState = true;\n                }\n            },\n            _isVirtualEditable: function () {\n                return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n            },\n            _isVirtualInlineEditable: function () {\n                return this.virtualScrollable && this._editMode() === INLINE;\n            },\n            _isVirtualIncellEditable: function () {\n                return this.virtualScrollable && this._editMode() === INCELL;\n            },\n            _isVirtualPopupEditable: function () {\n                return this.virtualScrollable && this._editMode() === 'popup';\n            },\n            _hasVirtualColumns: function () {\n                return (this.virtualScroll || {}).columns ? true : false;\n            },\n            _scrollVirtualWrapper: function () {\n                var that = this;\n                var scrollable = that.virtualScrollable;\n                if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                    if (scrollable._isScrolledToBottom()) {\n                        scrollable._scrollWrapperToBottom();\n                    } else if (scrollable._isScrolledToTop()) {\n                        scrollable._scrollWrapperToTop();\n                    }\n                }\n            },\n            _scrollVirtualWrapperOnColumnResize: function () {\n                var virtualScrollable = this.virtualScrollable;\n                if (virtualScrollable) {\n                    virtualScrollable._scrollWrapperOnColumnResize();\n                }\n            },\n            _restoreEditableState: function () {\n                var that = this;\n                var editableState = that._editableState || {};\n                var editedModel = editableState.model;\n                var dataSource = that.dataSource;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var row;\n                var cell;\n                if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                    if (that._editMode() === INLINE) {\n                        that._shouldClearEditableState = false;\n                        that.editRow(editedModel);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    } else if (that._editMode() === INCELL) {\n                        row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                        cell = $(row).children(attrEquals(FIELD, editableState.field));\n                        if (cell[0]) {\n                            that._shouldClearEditableState = false;\n                            that.editCell(cell);\n                            if (!virtualColumns) {\n                                that._focusEditable();\n                            }\n                        }\n                    }\n                }\n                that._shouldClearEditableState = true;\n            },\n            _focusEditable: function () {\n                var that = this;\n                var editedField = (that._editableState || {}).field;\n                var editContainer = that._editContainer;\n                if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                    if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).focus();\n                    } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                        editContainer.find(FOCUSABLE).eq(0).focus();\n                    }\n                }\n            },\n            _canFocusEditable: function () {\n                var that = this;\n                var result = (that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) && (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer));\n                return result;\n            },\n            _cacheEditableState: function () {\n                var that = this;\n                var editContainer = that._editContainer;\n                var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n                var inlineMode = that._isVirtualInlineEditable();\n                var incellMode = that._isVirtualIncellEditable();\n                var virtualColumns = that._hasVirtualColumns();\n                var active;\n                var widget;\n                if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                    that._clearEditableState();\n                    active = $(activeElement());\n                    if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                        active.change();\n                        widget = kendo.widgetInstance(active, kendo.ui);\n                        if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                            widget.value(active.val());\n                            widget.trigger(CHANGE);\n                        }\n                    }\n                    if (that._editMode() === INLINE) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: active.closest('[' + kendo.attr(CONTAINER_FOR) + ']').attr(kendo.attr(CONTAINER_FOR))\n                        };\n                    } else if (that._editMode() === INCELL) {\n                        that._editableState = {\n                            model: editedModel,\n                            field: editContainer.attr(kendo.attr(FIELD))\n                        };\n                    }\n                }\n            },\n            _clearSortClasses: function () {\n                var that = this;\n                if (that.content) {\n                    that.content.find('col:not(.k-group-col):not(.k-hierarchy-col)').removeClass('k-sorted');\n                }\n                if (that.lockedContent) {\n                    that.lockedContent.find('col:not(.k-group-col):not(.k-hierarchy-col)').removeClass('k-sorted');\n                }\n            },\n            _clearEditableState: function () {\n                var that = this;\n                if (that.virtualScrollable || that.virtualScroll && that._hasVirtualColumns()) {\n                    that._editableState = null;\n                }\n            },\n            _destroyVirtualScrollable: function () {\n                var that = this;\n                that._clearEditableState();\n                if (that.virtualScrollable && that.virtualScrollable.element) {\n                    that.virtualScrollable.destroy();\n                }\n                that.virtualScrollable = null;\n            },\n            _renderNoRecordsContent: function () {\n                var that = this;\n                if (that.options.noRecords) {\n                    var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n                    if (noRecordsElement.length) {\n                        that.angular('cleanup', function () {\n                            return { elements: noRecordsElement.get() };\n                        });\n                        noRecordsElement.remove();\n                    }\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        noRecordsElement = $(that.noRecordsTemplate({})).insertAfter(that.table);\n                        that.angular('compile', function () {\n                            return {\n                                elements: noRecordsElement.get(),\n                                data: [{}]\n                            };\n                        });\n                    }\n                }\n            },\n            _setContentWidth: function (scrollLeft) {\n                var that = this, hiddenDivClass = 'k-grid-content-expander', hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>', resizable = that.resizable, expander;\n                if (that.options.scrollable && that.wrapper.is(':visible')) {\n                    expander = that.table.parent().children('.' + hiddenDivClass);\n                    that._setContentWidthHandler = proxy(that._setContentWidth, that);\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        if (!expander[0]) {\n                            expander = $(hiddenDiv).appendTo(that.table.parent());\n                            if (resizable) {\n                                resizable.bind('resize', that._setContentWidthHandler);\n                            }\n                        }\n                        if (that.thead) {\n                            expander.width(that.thead.width());\n                            if (!isNaN(parseFloat(scrollLeft, 10))) {\n                                that.content.scrollLeft(scrollLeft);\n                            }\n                        }\n                    } else if (expander[0]) {\n                        expander.remove();\n                        if (resizable) {\n                            resizable.unbind('resize', that._setContentWidthHandler);\n                        }\n                    }\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                        that.table[0].style.width = '1px';\n                    }\n                }\n            },\n            _applyLockedContainersWidth: function () {\n                if (this.options.scrollable && this.lockedHeader) {\n                    var headerTable = this.thead.parent(), headerWrap = headerTable.parent(), contentWidth = this.wrapper[0].clientWidth, groups = this._groups(), scrollbar = kendo.support.scrollbar(), cols = this.lockedHeader.find('>table>colgroup>col:not(.k-group-col, .k-hierarchy-col)'), nonLockedCols = headerTable.find('>colgroup>col:not(.k-group-col, .k-hierarchy-col)'), width = columnsWidth(cols), nonLockedColsWidth = columnsWidth(nonLockedCols), footerWrap;\n                    if (groups > 0) {\n                        width += outerWidth(this.lockedHeader.find('.k-group-cell:first')) * groups;\n                    }\n                    if (width >= contentWidth) {\n                        width = contentWidth - 3 * scrollbar;\n                    }\n                    this.lockedHeader.add(this.lockedContent).width(width);\n                    headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + 'px';\n                    headerTable.add(this.table).width(nonLockedColsWidth);\n                    if (this.virtualScrollable && !isIE11) {\n                        contentWidth -= scrollbar;\n                    }\n                    this.content[0].style.width = contentWidth - width - 1 + 'px';\n                    if (this.lockedFooter && this.lockedFooter.length) {\n                        this.lockedFooter.width(width);\n                        footerWrap = this.footer.find('.k-grid-footer-wrap');\n                        footerWrap[0].style.width = headerWrap[0].clientWidth + 'px';\n                        footerWrap.children().first().width(nonLockedColsWidth);\n                    }\n                }\n            },\n            _setContentHeight: function () {\n                var that = this, options = that.options, height, header = that.wrapper.children('.k-grid-header'), scrollbar = kendo.support.scrollbar();\n                var scrollableHeight = (options.scrollable || {}).height;\n                if (options.scrollable && that.wrapper.is(':visible')) {\n                    if (scrollableHeight && that.content[0].style.height === '') {\n                        that.content[0].style.height = scrollableHeight;\n                    }\n                    height = that.wrapper.innerHeight();\n                    height -= outerHeight(header);\n                    if (that.pager && that.pager.element.is(':visible')) {\n                        height -= outerHeight(that.pager.element);\n                    }\n                    if (options.groupable) {\n                        height -= outerHeight(that.wrapper.children('.k-grouping-header'));\n                    }\n                    if (options.toolbar) {\n                        height -= outerHeight(that.wrapper.children('.k-grid-toolbar'));\n                    }\n                    if (that.footerTemplate) {\n                        height -= outerHeight(that.wrapper.children('.k-grid-footer'));\n                    }\n                    var isGridHeightSet = function (el) {\n                        var initialHeight, newHeight;\n                        if (el[0].style.height) {\n                            return true;\n                        } else {\n                            initialHeight = el.height();\n                        }\n                        el.height('auto');\n                        newHeight = el.height();\n                        if (initialHeight != newHeight) {\n                            el.height('');\n                            return true;\n                        }\n                        el.height('');\n                        return false;\n                    };\n                    if (isGridHeightSet(that.wrapper)) {\n                        if (height > scrollbar * 2) {\n                            if (that.lockedContent) {\n                                scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                                that.lockedContent.height(height - scrollbar);\n                            }\n                            that.content.height(height);\n                        } else {\n                            that.content.height(scrollbar * 2 + 1);\n                        }\n                    }\n                }\n            },\n            _averageRowHeight: function () {\n                var that = this, itemsCount = that._items(that.tbody).length, rowHeight = that._rowHeight;\n                if (itemsCount === 0) {\n                    return rowHeight;\n                }\n                if (!that._rowHeight) {\n                    that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                    that._sum = rowHeight;\n                    that._measures = 1;\n                }\n                var currentRowHeight = outerHeight(that.table) / itemsCount;\n                if (rowHeight !== currentRowHeight) {\n                    that._measures++;\n                    that._sum += currentRowHeight;\n                    that._rowHeight = that._sum / that._measures;\n                }\n                return rowHeight;\n            },\n            _dataSource: function () {\n                var that = this, options = that.options, pageable, dataSource = options.dataSource;\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, {\n                        table: that.table,\n                        fields: that.columns\n                    });\n                    pageable = options.pageable;\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler).unbind(SORT, that._sortHandler);\n                } else {\n                    that._refreshHandler = proxy(that.refresh, that);\n                    that._progressHandler = proxy(that._requestStart, that);\n                    that._errorHandler = proxy(that._error, that);\n                    that._sortHandler = proxy(that._clearSortClasses, that);\n                }\n                that.dataSource = DataSource.create(dataSource).bind(CHANGE, that._refreshHandler).bind(PROGRESS, that._progressHandler).bind(ERROR, that._errorHandler).bind(SORT, that._sortHandler);\n            },\n            _error: function () {\n                this._progress(false);\n            },\n            _requestStart: function () {\n                this._progress(true);\n            },\n            _modelChange: function (e) {\n                var that = this, tbody = that.tbody, model = e.model, row = that.tbody.find('tr[' + kendo.attr('uid') + '=' + model.uid + ']'), relatedRow, cell, column, isAlt = row.hasClass('k-alt'), tmp, idx = that._items(tbody).index(row), isLocked = that.lockedContent, selectable, selectableRow, childCells, originalCells, length;\n                if (isLocked) {\n                    relatedRow = that._relatedRow(row);\n                }\n                if (row.add(relatedRow).children('.k-edit-cell').length && !that.options.rowTemplate) {\n                    row.add(relatedRow).children(':not(.k-group-cell,.k-hierarchy-cell)').each(function () {\n                        cell = $(this);\n                        column = that._hasVirtualColumns() ? that.virtualCols[that.cellIndex(cell)] : leafColumns(that.columns)[that.cellIndex(cell)];\n                        if (column.field === e.field) {\n                            if (!cell.hasClass('k-edit-cell')) {\n                                that._displayCell(cell, column, model);\n                            } else {\n                                cell.addClass('k-dirty-cell');\n                            }\n                        }\n                    });\n                } else if (!row.hasClass('k-grid-edit-row')) {\n                    selectableRow = $().add(row);\n                    if (isLocked) {\n                        tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n                        selectableRow = selectableRow.add(relatedRow);\n                        relatedRow.replaceWith(tmp);\n                    }\n                    that.angular('cleanup', function () {\n                        return { elements: selectableRow.get() };\n                    });\n                    tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n                    row.replaceWith(tmp);\n                    tmp = that._items(tbody).eq(idx);\n                    var angularData = [{ dataItem: model }];\n                    if (isLocked) {\n                        row = row.add(relatedRow);\n                        relatedRow = that._relatedRow(tmp)[0];\n                        adjustRowHeight(tmp[0], relatedRow);\n                        tmp = tmp.add(relatedRow);\n                        angularData.push({ dataItem: model });\n                    }\n                    that.angular('compile', function () {\n                        return {\n                            elements: tmp.get(),\n                            data: angularData\n                        };\n                    });\n                    selectable = that.options.selectable;\n                    if ((selectable || that._checkBoxSelection) && row.hasClass('k-state-selected')) {\n                        that.select(tmp);\n                    }\n                    originalCells = selectableRow.children(':not(.k-group-cell,.k-hierarchy-cell)');\n                    childCells = tmp.children(':not(.k-group-cell,.k-hierarchy-cell)');\n                    for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                        column = that.columns[idx];\n                        cell = childCells.eq(idx);\n                        if (selectable && originalCells.eq(idx).hasClass('k-state-selected')) {\n                            cell.addClass('k-state-selected');\n                        }\n                    }\n                    that.trigger('itemChange', {\n                        item: tmp,\n                        data: model,\n                        ns: ui\n                    });\n                }\n            },\n            _pageable: function () {\n                var that = this, pagerWrap, pageable = that.options.pageable;\n                if (pageable) {\n                    pagerWrap = that.wrapper.children('div.k-grid-pager');\n                    if (!pagerWrap.length) {\n                        pagerWrap = $('<div class=\"k-pager-wrap k-grid-pager\"/>');\n                    }\n                    if (pageable.position === 'top') {\n                        pagerWrap.prependTo(that.wrapper).addClass('k-grid-pager-top');\n                    } else {\n                        pagerWrap.appendTo(that.wrapper);\n                    }\n                    if (that.pager) {\n                        that.pager.destroy();\n                    }\n                    if (typeof pageable === 'object' && pageable instanceof kendo.ui.Pager) {\n                        that.pager = pageable;\n                    } else {\n                        if (that.dataSource._groupPaging) {\n                            that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource }));\n                        } else {\n                            that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource }));\n                        }\n                    }\n                    that.pager.bind('pageChange', function (e) {\n                        if (that.trigger('page', { page: e.index })) {\n                            e.preventDefault();\n                        }\n                    });\n                    that._togglePagerVisibility();\n                }\n            },\n            _footer: function () {\n                var that = this, aggregates = that.dataSource.aggregates(), html = '', footerTemplate = that.footerTemplate, options = that.options, footerWrap, footer = that.footer || that.wrapper.find('.k-grid-footer');\n                if (footerTemplate) {\n                    html = $(that._wrapFooter(footerTemplate(aggregates)));\n                    if (footer.length) {\n                        var tmp = html;\n                        that.angular('cleanup', function () {\n                            return { elements: footer.get() };\n                        });\n                        footer.replaceWith(tmp);\n                        footer = that.footer = tmp;\n                    } else {\n                        if (options.scrollable) {\n                            footer = that.footer = options.pageable ? html.insertBefore(that.wrapper.children('div.k-grid-pager')) : html.appendTo(that.wrapper);\n                        } else {\n                            footer = that.footer = html.insertBefore(that.tbody);\n                        }\n                    }\n                    that.angular('compile', function () {\n                        return {\n                            elements: footer.find('td:not(.k-group-cell, .k-hierarchy-cell)').get(),\n                            data: map(that.columns, function (col) {\n                                return {\n                                    column: col,\n                                    aggregate: aggregates[col.field]\n                                };\n                            })\n                        };\n                    });\n                } else if (footer && !that.footer) {\n                    that.footer = footer;\n                }\n                if (footer.length) {\n                    if (options.scrollable) {\n                        footerWrap = footer.attr('tabindex', -1).children('.k-grid-footer-wrap');\n                        that.scrollables = $(that.scrollables.filter(function () {\n                            return !$(this).is('.k-grid-footer-wrap');\n                        }).toArray()).add(footerWrap);\n                    }\n                    if (that._footerWidth) {\n                        footer.find('table').css('width', that._footerWidth);\n                    }\n                    if (footerWrap) {\n                        var offset = that.content.scrollLeft();\n                        if (options.scrollable !== true && that.virtualScroll.rows) {\n                            offset = that.wrapper.find('.k-virtual-scrollable-wrap').scrollLeft();\n                        }\n                        footerWrap.scrollLeft(offset);\n                    }\n                }\n                if (that.lockedContent) {\n                    that._appendLockedColumnFooter();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedFooterHeight();\n                }\n            },\n            _wrapFooter: function (footerRow) {\n                var that = this, html = '', scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n                if (that.options.scrollable) {\n                    html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table' + (isIE7 ? ' cellspacing=\"0\"' : '') + '><tbody>' + footerRow + '</tbody></table></div></div>');\n                    that._appendCols(html.find('table'));\n                    html.css(isRtl ? 'padding-left' : 'padding-right', scrollbar);\n                    return html;\n                }\n                return '<tfoot class=\"k-grid-footer\">' + footerRow + '</tfoot>';\n            },\n            _columnMenu: function () {\n                var that = this, menu, columns = leafColumns(that.columns), column, options = that.options, columnMenu = options.columnMenu, menuOptions, sortable, filterable, cells, hasMultiColumnHeaders = grep(that.columns, function (item) {\n                        return item.columns !== undefined;\n                    }).length > 0, isMobile = this._isMobile, initCallback = function (e) {\n                        that.trigger(COLUMNMENUINIT, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, openCallback = function (e) {\n                        that.trigger(COLUMNMENUOPEN, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, closeCallback = function (element) {\n                        focusTable(element.closest('table'), true);\n                    }, sortHandler = function (e) {\n                        if (that.trigger('sort', { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                                that.dataSource.pageSize(that.dataSource.options.pageSize);\n                            }\n                        }\n                    }, filterHandler = function (e) {\n                        if (that.trigger('filter', {\n                                filter: e.filter,\n                                field: e.field\n                            })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                                that.dataSource.pageSize(that.dataSource.options.pageSize);\n                            }\n                        }\n                    }, $angular = options.$angular;\n                if (columnMenu) {\n                    if (typeof columnMenu == 'boolean') {\n                        columnMenu = {};\n                    }\n                    that._setColumnsMediaVisibility(columns);\n                    cells = leafDataCells(that.thead);\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        var cell = cells.eq(idx);\n                        if (!column.command && (column.field || cell.attr('data-' + kendo.ns + 'field'))) {\n                            menu = cell.data('kendoColumnMenu');\n                            if (menu) {\n                                menu.destroy();\n                            }\n                            sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, { compare: (column.sortable || {}).compare }) : false;\n                            filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n                            if (column.filterable && column.filterable.dataSource) {\n                                filterable.forceUnique = false;\n                                filterable.checkSource = column.filterable.dataSource;\n                            }\n                            if (filterable) {\n                                filterable.format = column.format;\n                            }\n                            menuOptions = {\n                                dataSource: that.dataSource,\n                                values: column.values,\n                                columns: columnMenu.columns,\n                                sortable: sortable,\n                                filterable: filterable,\n                                messages: columnMenu.messages,\n                                owner: that,\n                                closeCallback: closeCallback,\n                                init: initCallback,\n                                open: openCallback,\n                                pane: that.pane,\n                                sort: sortHandler,\n                                filtering: filterHandler,\n                                filter: isMobile ? ':not(.k-column-active)' : '',\n                                lockedColumns: !hasMultiColumnHeaders && column.lockable !== false && lockedColumns(columns).length > 0\n                            };\n                            if ($angular) {\n                                menuOptions.$angular = $angular;\n                            }\n                            cell.kendoColumnMenu(menuOptions);\n                        }\n                    }\n                }\n            },\n            _headerCells: function () {\n                return $(this.thead).find('th').filter(function () {\n                    var th = $(this);\n                    return !th.hasClass('k-group-cell') && !th.hasClass('k-hierarchy-cell');\n                });\n            },\n            _filterable: function () {\n                var that = this, columns = leafColumns(that.columns), filterMenu, cells, cell, filterInit = function (e) {\n                        that.trigger(FILTERMENUINIT, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, closeCallback = function (element) {\n                        focusTable(element.closest('table'), true);\n                    }, filterHandler = function (e) {\n                        if (that.trigger('filter', {\n                                filter: e.filter,\n                                field: e.field\n                            })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                                that.dataSource.pageSize(that.dataSource.options.pageSize);\n                            }\n                        }\n                    }, filterOpen = function (e) {\n                        that.trigger(FILTERMENUOPEN, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, filterable = that.options.filterable;\n                if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf('menu') == -1) {\n                    filterable = false;\n                }\n                if (filterable && !that.options.columnMenu) {\n                    cells = leafDataCells(that.thead);\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        cell = cells.eq(idx);\n                        if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr('data-' + kendo.ns + 'field'))) {\n                            filterMenu = cell.data('kendoFilterMenu');\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n                            filterMenu = cell.data('kendoFilterMultiCheck');\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n                            var columnFilterable = columns[idx].filterable;\n                            var options = extend({}, filterable, columnFilterable, {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler\n                            });\n                            if (columnFilterable && columnFilterable.messages) {\n                                options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                            }\n                            if (columnFilterable && columnFilterable.dataSource) {\n                                options.forceUnique = false;\n                                options.checkSource = columnFilterable.dataSource;\n                            }\n                            if (columnFilterable && columnFilterable.multi) {\n                                cell.kendoFilterMultiCheck(options);\n                            } else {\n                                cell.kendoFilterMenu(options);\n                            }\n                        }\n                    }\n                }\n            },\n            _filterRow: function () {\n                var that = this;\n                if (!that._hasFilterRow()) {\n                    return;\n                }\n                var settings;\n                var $angular = that.options.$angular;\n                var columns = leafColumns(that.columns), filterable = that.options.filterable, rowheader = that.thead.find('.k-filter-row'), filterHandler = function (e) {\n                        if (that.trigger('filter', {\n                                filter: e.filter,\n                                field: e.field\n                            })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            if (that.dataSource.options.endless) {\n                                that.dataSource.options.endless = null;\n                                that._endlessPageSize = that.dataSource.options.pageSize;\n                                that.dataSource.pageSize(that.dataSource.options.pageSize);\n                            }\n                        }\n                    };\n                this._updateHeader(this.dataSource.group().length);\n                for (var i = 0; i < columns.length; i++) {\n                    var suggestDataSource, col = columns[i], operators = that.options.filterable.operators, customDataSource = false, th = $('<th/>'), field = col.field;\n                    if (col.hidden) {\n                        th.hide();\n                    }\n                    rowheader.append(th);\n                    if (field && col.filterable !== false) {\n                        var cellOptions = col.filterable && col.filterable.cell || {};\n                        suggestDataSource = that.options.dataSource;\n                        if (suggestDataSource instanceof DataSource) {\n                            suggestDataSource = that.options.dataSource.options;\n                        }\n                        var messages = extend(true, {}, filterable.messages);\n                        if (col.filterable) {\n                            extend(true, messages, col.filterable.messages);\n                        }\n                        if (cellOptions.enabled === false) {\n                            th.html('&nbsp;');\n                            continue;\n                        }\n                        if (cellOptions.dataSource) {\n                            suggestDataSource = cellOptions.dataSource;\n                            customDataSource = true;\n                        }\n                        if (col.filterable && col.filterable.operators) {\n                            operators = col.filterable.operators;\n                        }\n                        settings = {\n                            column: col,\n                            dataSource: that.dataSource,\n                            suggestDataSource: suggestDataSource,\n                            customDataSource: customDataSource,\n                            field: field,\n                            messages: messages,\n                            values: col.values,\n                            template: cellOptions.template,\n                            delay: cellOptions.delay,\n                            inputWidth: cellOptions.inputWidth,\n                            suggestionOperator: cellOptions.suggestionOperator,\n                            minLength: cellOptions.minLength,\n                            dataTextField: cellOptions.dataTextField,\n                            operator: cellOptions.operator,\n                            operators: operators,\n                            showOperators: cellOptions.showOperators,\n                            change: filterHandler\n                        };\n                        if ($angular) {\n                            settings.$angular = $angular;\n                        }\n                        $('<span/>').attr(kendo.attr('field'), field).appendTo(th).kendoFilterCell(settings);\n                    } else {\n                        th.html('&nbsp;');\n                    }\n                }\n            },\n            _sortable: function () {\n                var that = this, columns = leafColumns(that.columns), column, sorterInstance, cell, sortable = that.options.sortable, sortHandler = function (e) {\n                        if (that.trigger('sort', { sort: e.sort })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                        }\n                    };\n                if (sortable) {\n                    var cells = leafDataCells(that.thead);\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.sortable !== false && !column.command && column.field) {\n                            cell = cells.eq(idx);\n                            sorterInstance = cell.data('kendoColumnSorter');\n                            if (sorterInstance) {\n                                sorterInstance.destroy();\n                            }\n                            cell.attr('data-' + kendo.ns + 'field', column.field).kendoColumnSorter(extend({}, sortable, column.sortable, {\n                                dataSource: that.dataSource,\n                                aria: true,\n                                filter: ':not(.k-column-active)',\n                                change: sortHandler\n                            }));\n                        }\n                    }\n                    cells = null;\n                }\n            },\n            _columns: function (columns) {\n                var that = this, table = that.table, encoded, cols = table.find('col'), lockedCols, headerRows = that.element.find('thead tr'), dataSource = that.options.dataSource;\n                columns = columns.length ? columns : map(table.find('th'), function (th, idx) {\n                    th = $(th);\n                    var sortable = th.attr(kendo.attr('sortable')), filterable = th.attr(kendo.attr('filterable')), type = th.attr(kendo.attr('type')), groupable = th.attr(kendo.attr('groupable')), field = th.attr(kendo.attr('field')), title = th.attr(kendo.attr('title')), menu = th.attr(kendo.attr('menu'));\n                    if (!field) {\n                        field = th.text().replace(/\\s|[^A-z0-9]/g, '');\n                    }\n                    return {\n                        field: field,\n                        type: type,\n                        title: title,\n                        sortable: sortable !== 'false',\n                        filterable: filterable !== 'false',\n                        groupable: groupable !== 'false',\n                        menu: menu,\n                        template: th.attr(kendo.attr('template')),\n                        width: cols.eq(idx).css('width')\n                    };\n                });\n                encoded = !(that.table.find('tbody tr').length > 0 && (!dataSource || !dataSource.transport));\n                if (that.options.scrollable) {\n                    var initialColumns = columns;\n                    lockedCols = lockedColumns(columns);\n                    columns = nonLockedColumns(columns);\n                    if (lockedCols.length > 0 && columns.length === 0) {\n                        throw new Error('There should be at least one non locked column');\n                    }\n                    normalizeHeaderCells(that.element.find('tr:has(th):first'), initialColumns);\n                    columns = lockedCols.concat(columns);\n                }\n                if (headerRows.length && columns.length) {\n                    that._updateColumnIDs(columns, headerRows.first());\n                }\n                that.columns = normalizeColumns(columns, encoded);\n                if ($.grep(leafColumns(that.columns), function (col) {\n                        return col.selectable;\n                    }).length) {\n                    that._selectedIds = {};\n                    that._checkBoxSelection = true;\n                    that.wrapper.on(CLICK + NS, 'tbody > tr ' + CHECKBOXINPUT, proxy(that._checkboxClick, that));\n                    that.wrapper.on(CLICK + NS, 'thead > tr ' + CHECKBOXINPUT, proxy(that._headerCheckboxClick, that));\n                }\n            },\n            _updateColumnIDs: function (columns, tr) {\n                if (!columns.length) {\n                    return;\n                }\n                var ths = tr.find('th');\n                var id;\n                for (var i = 0; i < columns.length; i++) {\n                    id = ths.eq(i).attr('id');\n                    if (id) {\n                        columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                    }\n                }\n                this._updateColumnIDs(childColumns(columns), tr.next());\n            },\n            _headerCheckboxClick: function (e) {\n                var that = this, checkBox = $(e.target), checked = checkBox.prop('checked'), parentGrid = checkBox.closest('.k-grid.k-widget').getKendoGrid();\n                if (that !== parentGrid) {\n                    return;\n                }\n                if (checked) {\n                    that.select(parentGrid.items());\n                } else {\n                    that.clearSelection();\n                }\n            },\n            _checkboxClick: function (e) {\n                var that = this, row = $(e.target).closest('tr'), isSelecting = !row.hasClass(SELECTED);\n                if (that !== row.closest('.k-grid.k-widget').getKendoGrid()) {\n                    return;\n                }\n                if (isSelecting) {\n                    that.select(row);\n                } else {\n                    that._deselectCheckRows(row);\n                }\n            },\n            _groups: function () {\n                var group = this.dataSource.group();\n                return group ? group.length : 0;\n            },\n            _tmpl: function (rowTemplate, columns, alt, skipGroupCells) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, idx, length = columns.length, template, state = {\n                        storage: {},\n                        count: 0\n                    }, column, type, hasDetails = that._hasDetails(), className = [], groups = that._groups(), navigatable = that.options.navigatable;\n                var fieldAttr = kendo.attr('field');\n                var field;\n                var dirtyCellTemplate = '';\n                if (!rowTemplate) {\n                    rowTemplate = '<tr';\n                    if (alt) {\n                        className.push('k-alt');\n                    }\n                    if (hasDetails) {\n                        className.push('k-master-row');\n                    }\n                    if (className.length) {\n                        rowTemplate += ' class=\"' + className.join(' ') + '\"';\n                    }\n                    if (length) {\n                        rowTemplate += ' ' + kendo.attr('uid') + '=\"#=' + kendo.expr('uid', settings.paramName) + '#\"';\n                    }\n                    rowTemplate += ' role=\\'row\\'>';\n                    if (groups > 0 && !skipGroupCells) {\n                        rowTemplate += groupCells(groups);\n                    }\n                    if (hasDetails) {\n                        rowTemplate += '<td class=\"k-hierarchy-cell\" aria-expanded=\"false\"><a class=\"k-icon k-i-expand\" href=\"\\\\#\" ' + ARIALABEL + '=\"' + EXPAND + '\" tabindex=\"-1\"></a></td>';\n                    }\n                    for (idx = 0; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column.template;\n                        type = typeof template;\n                        field = column.field;\n                        if (that._editMode() === INCELL && field) {\n                            column.attributes = column.attributes || {};\n                            if (that.virtualScroll) {\n                                column.attributes[fieldAttr] = field;\n                            }\n                            dirtyCellTemplate = that._dirtyCellTemplate(field, paramName);\n                            column.attributes['class'] = column.attributes['class'] || '';\n                            if (column.attributes['class'].indexOf(dirtyCellTemplate) < 0) {\n                                column.attributes['class'] += dirtyCellTemplate;\n                            }\n                        }\n                        if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) {\n                            column.attributes = removeHiddenStyle(column.attributes);\n                        } else if (!column.colSpan && column.hidden) {\n                            column.attributes = addHiddenStyle(column.attributes);\n                        }\n                        if (column.command) {\n                            column.attributes = column.attributes || {};\n                            if (typeof column.attributes['class'] !== 'undefined') {\n                                column.attributes['class'] += ' k-command-cell';\n                            } else {\n                                column.attributes['class'] = 'k-command-cell';\n                            }\n                        }\n                        rowTemplate += '<td' + stringifyAttributes(column.attributes);\n                        if (navigatable) {\n                            rowTemplate += ' aria-describedby=\\'' + column.headerAttributes.id + '\\'';\n                        }\n                        if (column.colSpan) {\n                            if (column.colSpan > 1) {\n                                rowTemplate += ' ' + kendo.attr('virtual');\n                            }\n                            rowTemplate += ' colSpan=\\'' + column.colSpan + '\\'';\n                        }\n                        rowTemplate += ' role=\\'gridcell\\'>';\n                        rowTemplate += that._cellTmpl(column, state);\n                        rowTemplate += '</td>';\n                    }\n                    rowTemplate += '</tr>';\n                }\n                rowTemplate = kendo.template(rowTemplate, settings);\n                if (state.count > 0) {\n                    return proxy(rowTemplate, state.storage);\n                }\n                return rowTemplate;\n            },\n            _dirtyCellTemplate: function (field, paramName) {\n                var dirtyField;\n                if (field && paramName) {\n                    dirtyField = field.charAt(0) === '[' ? kendo.expr(field, paramName + '.dirtyFields') : paramName + '.dirtyFields[\\'' + field + '\\']';\n                    return '#= ' + paramName + ' && ' + paramName + '.dirty && ' + paramName + '.dirtyFields && ' + dirtyField + ' ? \\' k-dirty-cell\\' : \\'\\' #';\n                }\n                return '';\n            },\n            _headerCellText: function (column) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), template = column.headerTemplate, type = typeof template, text = column.title || column.field || '';\n                if (type === FUNCTION) {\n                    text = kendo.template(template, settings)({});\n                } else if (type === STRING) {\n                    text = template;\n                }\n                return text;\n            },\n            _cellTmpl: function (column, state) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), template = column.template, paramName = settings.paramName, field = column.field, html = '', idx, length, format = column.format, type = typeof template, columnValues = column.values;\n                if (column.command) {\n                    if (isArray(column.command)) {\n                        for (idx = 0, length = column.command.length; idx < length; idx++) {\n                            if (column.command[idx].visible) {\n                                html += kendo.format('#= {0}(data)? \\'{1}\\':\\'\\' #', column.command[idx].visible, that._createButton(column.command[idx]).replace(templateHashRegExp, '\\\\#').replace(/'/gi, '\\\\\\''));\n                            } else {\n                                html += that._createButton(column.command[idx]).replace(templateHashRegExp, '\\\\#');\n                            }\n                        }\n                        return html;\n                    }\n                    return that._createButton(column.command).replace(templateHashRegExp, '\\\\#');\n                }\n                if (column.selectable) {\n                    return SELECTCOLUMNTMPL;\n                }\n                html += that._dirtyIndicatorTemplate(field, paramName);\n                if (type === FUNCTION) {\n                    state.storage['tmpl' + state.count] = template;\n                    html += '#=this.tmpl' + state.count + '(' + paramName + ')#';\n                    state.count++;\n                } else if (type === STRING) {\n                    html += template;\n                } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && 'value' in columnValues[0] && field) {\n                    html += '#var v =' + kendo.stringify(convertToObject(columnValues)).replace(templateHashRegExp, '\\\\#') + '#';\n                    html += '#var f = v[';\n                    if (!settings.useWithBlock) {\n                        html += paramName + '.';\n                    }\n                    html += field + ']#';\n                    html += '${f != null ? f : \\'\\'}';\n                } else {\n                    html += column.encoded ? '#:' : '#=';\n                    if (format) {\n                        html += 'kendo.format(\"' + format.replace(formatRegExp, '\\\\$1') + '\",';\n                    }\n                    if (field) {\n                        field = kendo.expr(field, paramName);\n                        html += field + '==null?\\'\\':' + field;\n                    } else {\n                        html += '\\'\\'';\n                    }\n                    if (format) {\n                        html += ')';\n                    }\n                    html += '#';\n                }\n                return html;\n            },\n            _dirtyIndicatorTemplate: function (field, paramName) {\n                var dirtyField;\n                if (field && paramName) {\n                    dirtyField = field.charAt(0) === '[' ? kendo.expr(field, paramName + '.dirtyFields') : paramName + '.dirtyFields[\\'' + field + '\\']';\n                    return '#= ' + paramName + ' && ' + paramName + '.dirty && ' + paramName + '.dirtyFields && ' + dirtyField + ' ? \\'<span class=\"k-dirty\"></span>\\' : \\'\\' #';\n                }\n                return '';\n            },\n            _virtualCols: function (columns) {\n                var that = this;\n                var widths = $.map(columns, function (c) {\n                    return c.hidden ? 0 : parseInt(c.width, 10);\n                });\n                var scrollLeft = that.virtualScrollable ? that.content.find('>.k-virtual-scrollable-wrap').scrollLeft() : that.content.scrollLeft();\n                var tableWidth = outerWidth(that.content);\n                var sumOfWidths = sumWidths(columns);\n                var colsToRender = [];\n                var firstColspan = 0;\n                var lastColspan = 0;\n                var hiddenColumns = 0;\n                var idx = 0;\n                var widthOfHiddenColumns = 0;\n                var considerNext;\n                for (idx = 0; idx < columns.length; idx++) {\n                    considerNext = idx < widths.length - 1 ? widths[idx + 1] : 0;\n                    if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                        if (widths[idx]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[idx];\n                    } else {\n                        firstColspan = 1 + hiddenColumns;\n                        break;\n                    }\n                }\n                hiddenColumns = 0;\n                widthOfHiddenColumns = 0;\n                for (var i = columns.length - 1; i >= 0; i--) {\n                    if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                        if (widths[i]) {\n                            hiddenColumns++;\n                        }\n                        widthOfHiddenColumns += widths[i];\n                    } else {\n                        lastColspan = 1 + hiddenColumns;\n                        for (var j = idx; j <= i; j++) {\n                            if (columns[j].locked) {\n                                continue;\n                            }\n                            colsToRender.push(columns[j]);\n                            if (columns[j].colSpan) {\n                                delete columns[j].colSpan;\n                            }\n                        }\n                        colsToRender[0].colSpan = firstColspan;\n                        colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                        break;\n                    }\n                }\n                if (colsToRender[0].hidden) {\n                    colsToRender[0].colSpan--;\n                }\n                that.virtualCols = colsToRender;\n                return colsToRender;\n            },\n            _templates: function () {\n                var that = this, options = that.options, dataSource = that.dataSource, groups = dataSource.group(), footer = that.footer || that.wrapper.find('.k-grid-footer'), aggregates = dataSource.aggregate(), columnLeafs = leafColumns(that.columns), columnsLocked = leafColumns(lockedColumns(that.columns)), leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs, columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols, groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function (column, index) {\n                        return column.groupHeaderColumnTemplate && index !== 0;\n                    }), groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function (column) {\n                        return column.groupHeaderColumnTemplate;\n                    });\n                if (options.scrollable && columnsLocked.length) {\n                    if (options.rowTemplate || options.altRowTemplate) {\n                        throw new Error('Having both row template and locked columns is not supported');\n                    }\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n                    that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                    that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n                } else {\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n                }\n                if (that._hasDetails()) {\n                    that.detailTemplate = that._detailTmpl(options.detailTemplate || '');\n                }\n                if (that._group && !isEmptyObject(aggregates) || !isEmptyObject(aggregates) && !footer.length || grep(columnLeafs, function (column) {\n                        return column.footerTemplate;\n                    }).length) {\n                    that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, 'footerTemplate', 'k-footer-template');\n                }\n                if (groups && grep(columnLeafs, function (column) {\n                        return column.groupFooterTemplate;\n                    }).length) {\n                    aggregates = $.map(groups, function (g) {\n                        return g.aggregates;\n                    });\n                    that.groupFooterTemplate = that._footerTmpl(columns, aggregates, 'groupFooterTemplate', 'k-group-footer', columnsLocked.length);\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, 'groupFooterTemplate', 'k-group-footer');\n                    }\n                }\n                if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                    aggregates = $.map(groups, function (g) {\n                        return g.aggregates;\n                    });\n                    that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, 'groupHeaderColumnTemplate', 'k-grouping-row', columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, 'groupHeaderColumnTemplate', 'k-grouping-row', 0, groupHeaderColumnTemplateLockedColumns);\n                    }\n                } else {\n                    that.groupHeaderColumnTemplate = null;\n                    that.lockedGroupHeaderColumnTemplate = null;\n                }\n                if (that.options.noRecords) {\n                    that.noRecordsTemplate = that._noRecordsTmpl();\n                }\n            },\n            _noRecordsTmpl: function () {\n                var wrapper = '<div class=\"{0}\">{1}</div>';\n                var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n                var scrollableNoGridHeightStyles = this.options.scrollable && !this.wrapper[0].style.height ? ' style=\"margin:0 auto;position:static;\"' : '';\n                var state = {\n                    storage: {},\n                    count: 0\n                };\n                var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var template;\n                var html = '';\n                var type;\n                var tmpl;\n                if (this.options.noRecords.template) {\n                    template = this.options.noRecords.template;\n                } else {\n                    template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n                }\n                type = typeof template;\n                if (type === 'function') {\n                    state.storage['tmpl' + state.count] = template;\n                    html += '#=this.tmpl' + state.count + '(' + paramName + ')#';\n                    state.count++;\n                } else if (type === 'string') {\n                    html += template;\n                }\n                tmpl = kendo.template(kendo.format(wrapper, NORECORDSCLASS, html), settings);\n                if (state.count > 0) {\n                    tmpl = $.proxy(tmpl, state.storage);\n                }\n                return tmpl;\n            },\n            _footerTmpl: function (columns, aggregates, templateName, rowClass, skipGroupCells) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, html = '', idx, length, template, type, storage = {}, count = 0, scope = {}, groups = that._groups(), fieldsMap = that.dataSource._emptyAggregates(aggregates), column;\n                html += '<tr class=\"' + rowClass + '\">';\n                if (groups > 0 && !skipGroupCells) {\n                    html += groupCells(groups);\n                }\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n                }\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n                    html += '<td' + stringifyAttributes(column.footerAttributes) + '>';\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + '[\\'' + column.field + '\\']' }) : {};\n                            template = kendo.template(template, scope);\n                        }\n                        storage['tmpl' + count] = template;\n                        html += '#=this.tmpl' + count + '(' + paramName + ')#';\n                        count++;\n                    } else {\n                        html += '&nbsp;';\n                    }\n                    html += '</td>';\n                }\n                html += '</tr>';\n                html = kendo.template(html, settings);\n                if (count > 0) {\n                    return proxy(html, storage);\n                }\n                return html;\n            },\n            _groupHeaderTmpl: function (columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, html = '', idx, length, template, type, storage = {}, count = 0, scope = {}, fieldsMap = that.dataSource._emptyAggregates(aggregates), column, headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1;\n                html += '<tr role=\"row\" class=\"' + rowClass + '\">';\n                if (!skipGroupCells) {\n                    html += '# for (var i = 0; i < data.groupCells; i++) { #' + '<td class=\"k-group-cell\">' + '&nbsp;' + '</td>' + '# } #';\n                }\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n                }\n                if (headerTemplateIndex < 0) {\n                    html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                    return;\n                }\n                if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                    html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                    return kendo.template(html, settings);\n                }\n                if (headerTemplateIndex < MINCOLSPANVALUE) {\n                    headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                    html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : '';\n                } else {\n                    html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : groupCellLockedContentBuilder(headerTemplateIndex);\n                }\n                for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n                    html += '<td>';\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + '[\\'' + column.field + '\\']' }) : {};\n                            template = kendo.template(template, scope);\n                        }\n                        storage['tmpl' + count] = template;\n                        html += '#=this.tmpl' + count + '(' + paramName + ')#';\n                        count++;\n                    } else {\n                        html += '&nbsp;';\n                    }\n                    html += '</td>';\n                }\n                html += '</tr>';\n                html = kendo.template(html, settings);\n                if (count > 0) {\n                    return proxy(html, storage);\n                }\n                return html;\n            },\n            _detailTmpl: function (template) {\n                var that = this, html = '', settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, templateFunctionStorage = {}, templateFunctionCount = 0, groups = that._groups(), colspan = visibleColumns(leafColumns(that.columns)).length, type = typeof template;\n                html += '<tr class=\"k-detail-row\">';\n                if (groups > 0) {\n                    html += groupCells(groups);\n                }\n                html += '<td class=\"k-hierarchy-cell\"></td><td class=\"k-detail-cell\"' + (colspan ? ' colspan=\"' + colspan + '\"' : '') + '>';\n                if (type === FUNCTION) {\n                    templateFunctionStorage['tmpl' + templateFunctionCount] = template;\n                    html += '#=this.tmpl' + templateFunctionCount + '(' + paramName + ')#';\n                    templateFunctionCount++;\n                } else {\n                    html += template;\n                }\n                html += '</td></tr>';\n                html = kendo.template(html, settings);\n                if (templateFunctionCount > 0) {\n                    return proxy(html, templateFunctionStorage);\n                }\n                return html;\n            },\n            _hasDetails: function () {\n                var that = this;\n                return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n            },\n            _hasFilterRow: function () {\n                var filterable = this.options.filterable;\n                var hasFiltering = filterable && typeof filterable.mode == STRING && filterable.mode.indexOf('row') != -1;\n                var columns = this.columns;\n                var columnsWithoutFiltering = $.grep(columns, function (col) {\n                    return col.filterable === false;\n                });\n                if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                    hasFiltering = false;\n                }\n                return hasFiltering;\n            },\n            _details: function () {\n                var that = this;\n                if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                    throw new Error('Having both detail template and locked columns is not supported');\n                }\n                that.table.on(CLICK + NS, '.k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse', function (e) {\n                    var button = $(this), cell = button.closest('td.k-hierarchy-cell'), expanding = button.hasClass('k-i-expand'), masterRow = button.closest('tr.k-master-row'), detailRow, detailTemplate = that.detailTemplate, data, hasDetails = that._hasDetails(), ariaLabelText = expanding ? COLLAPSE : EXPAND, ariaExpandText = expanding ? true : false;\n                    button.toggleClass('k-i-expand', !expanding).toggleClass('k-i-collapse', expanding).attr(ARIALABEL, ariaLabelText);\n                    cell.attr('aria-expanded', ariaExpandText);\n                    detailRow = masterRow.next();\n                    if (hasDetails && !detailRow.hasClass('k-detail-row')) {\n                        data = that.dataItem(masterRow);\n                        detailRow = $(detailTemplate(data)).addClass(masterRow.hasClass('k-alt') ? 'k-alt' : '').insertAfter(masterRow);\n                        that.angular('compile', function () {\n                            return {\n                                elements: detailRow.get(),\n                                data: [{ dataItem: data }]\n                            };\n                        });\n                        that.trigger(DETAILINIT, {\n                            masterRow: masterRow,\n                            detailRow: detailRow,\n                            data: data,\n                            detailCell: detailRow.find('.k-detail-cell')\n                        });\n                    }\n                    that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, {\n                        masterRow: masterRow,\n                        detailRow: detailRow\n                    });\n                    detailRow.toggle(expanding);\n                    e.preventDefault();\n                    return false;\n                });\n            },\n            dataItem: function (tr) {\n                tr = $(tr)[0];\n                if (!tr) {\n                    return null;\n                }\n                var rows = this.tbody.children(), classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/, idx = tr.sectionRowIndex, j, correctIdx;\n                correctIdx = idx;\n                for (j = 0; j < idx; j++) {\n                    if (classesRegEx.test(rows[j].className)) {\n                        correctIdx--;\n                    }\n                }\n                return this._data[correctIdx];\n            },\n            expandRow: function (tr) {\n                $(tr).find('> td .k-i-expand').click();\n            },\n            collapseRow: function (tr) {\n                $(tr).find('> td .k-i-collapse').click();\n            },\n            _createHeaderCells: function (columns, rowSpan) {\n                var that = this, idx, th, text, html = '', length, title, messages = that.options.messages, leafs = leafColumns(that.columns), groups = that.dataSource.group(), field;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    th = columns[idx].column || columns[idx];\n                    text = that._headerCellText(th);\n                    field = '';\n                    var index = inArray(th, leafs);\n                    if (th.selectable) {\n                        html += '<th scope=\\'col\\'' + stringifyAttributes(th.headerAttributes);\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({});\n                        html += '>' + text + '</th>';\n                    } else if (th.command) {\n                        html += '<th scope=\\'col\\'' + stringifyAttributes(th.headerAttributes);\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        html += '>' + text + '</th>';\n                    } else {\n                        if (th.field) {\n                            field = kendo.attr('field') + '=\\'' + th.field + '\\' ';\n                        }\n                        html += '<th scope=\\'col\\' role=\\'columnheader\\' ' + field;\n                        html += ' aria-haspopup=\\'true\\'';\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (columns[idx].colSpan > 1) {\n                            html += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                            html += kendo.attr('colspan') + '=\\'' + columns[idx].colSpan + '\\'';\n                        } else if (columns[idx].colSpan === 1) {\n                            html += kendo.attr('colspan') + '=\\'' + columns[idx].colSpan + '\\'';\n                        }\n                        if (th.title) {\n                            title = th.title.replace('\"', '&quot;').replace(/'/g, '\\'');\n                            html += kendo.attr('title') + '=\"' + title + '\" ';\n                        }\n                        if (th.groupable !== undefined) {\n                            html += kendo.attr('groupable') + '=\\'' + th.groupable + '\\' ';\n                        }\n                        if (isColumnGroupable(that, th)) {\n                            html += 'aria-label=\\'' + (title || th.field) + ' ';\n                            html += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                            html += '\\' ';\n                        }\n                        if (th.aggregates && th.aggregates.length) {\n                            html += kendo.attr('aggregates') + '=\\'' + th.aggregates + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        html += stringifyAttributes(th.headerAttributes);\n                        html += '>' + text + '</th>';\n                    }\n                }\n                return html;\n            },\n            _appendLockedColumnContent: function () {\n                var columns = this.columns, idx, colgroup = this.table.find('colgroup'), cols = colgroup.find('col:not(.k-group-col,.k-hierarchy-col)'), length, lockedCols = $(), skipHiddenCount = 0, container, colSpan, spanIdx, colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        if (isVisible(columns[idx])) {\n                            colSpan = 1;\n                            if (columns[idx].columns) {\n                                colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n                            colSpan = colSpan || 1;\n                            for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        } else {\n                            skipHiddenCount++;\n                        }\n                    }\n                }\n                container = $('<div class=\"k-grid-content-locked\"><table' + (isIE7 ? ' cellspacing=\"0\"' : '') + '><colgroup></colgroup><tbody></tbody></table></div>');\n                colgroup.detach();\n                container.find('colgroup').append(lockedCols);\n                colgroup.insertBefore(this.table.find('tbody'));\n                this.lockedContent = container.insertBefore(this.content);\n                this.lockedTable = container.children('table');\n            },\n            _appendLockedColumnFooter: function () {\n                var that = this;\n                var footer = that.footer;\n                var cells = footer.find('.k-footer-template>td');\n                var cols = footer.find('.k-grid-footer-wrap>table>colgroup>col');\n                var html = $('<div class=\"k-grid-footer-locked\"><table><colgroup></colgroup><tbody><tr class=\"k-footer-template\"></tr></tbody></table></div>');\n                var idx, length;\n                var groups = that._groups();\n                var lockedCells = $(), lockedCols = $();\n                lockedCells = lockedCells.add(cells.filter('.k-group-cell'));\n                for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                    lockedCells = lockedCells.add(cells.eq(idx + groups));\n                }\n                lockedCols = lockedCols.add(cols.filter('.k-group-col'));\n                for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                    lockedCols = lockedCols.add(cols.eq(idx + groups));\n                }\n                lockedCells.appendTo(html.find('tr'));\n                lockedCols.appendTo(html.find('colgroup'));\n                that.lockedFooter = html.prependTo(footer);\n            },\n            _appendLockedColumnHeader: function (container) {\n                var that = this, columns = this.columns, idx, html, length, colgroup, tr, trFilter, table, header, filtercellCells, rows = [], skipHiddenCount = 0, cols = $(), hasFilterRow = that._hasFilterRow(), filterCellOffset = 0, filterCells = $(), cell, leafColumnsCount = 0, cells = $();\n                colgroup = that.thead.prev().find('col:not(.k-group-col,.k-hierarchy-col)');\n                header = that.thead.find('tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)');\n                filtercellCells = that.thead.find('.k-filter-row').find('th:not(.k-group-cell,.k-hierarchy-cell)');\n                var colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        cell = header.eq(idx);\n                        leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n                        if (isVisible(columns[idx])) {\n                            var colSpan = null;\n                            if (columns[idx].columns) {\n                                colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n                            colSpan = colSpan || 1;\n                            for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        }\n                        mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n                        leafColumnsCount = leafColumnsCount || 1;\n                        for (var j = 0; j < leafColumnsCount; j++) {\n                            filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                        }\n                        filterCellOffset += leafColumnsCount;\n                    }\n                    if (columns[idx].columns) {\n                        skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                    }\n                    if (!isVisible(columns[idx])) {\n                        skipHiddenCount++;\n                    }\n                }\n                if (rows.length) {\n                    html = '<div class=\"k-grid-header-locked\" style=\"width:1px\"><table' + (isIE7 ? ' cellspacing=\"0\"' : '') + '><colgroup></colgroup><thead>';\n                    html += new Array(rows.length + 1).join('<tr></tr>');\n                    html += (hasFilterRow ? '<tr class=\"k-filter-row\"></tr>' : '') + '</thead></table></div>';\n                    table = $(html);\n                    colgroup = table.find('colgroup');\n                    colgroup.append(that.thead.prev().find('col.k-group-col').add(cols));\n                    tr = table.find('thead tr:not(.k-filter-row)');\n                    for (idx = 0, length = rows.length; idx < length; idx++) {\n                        cells = toJQuery(rows[idx]);\n                        tr.eq(idx).append(that.thead.find('tr:eq(' + idx + ') .k-group-cell').add(cells));\n                    }\n                    var count = removeEmptyRows(this.thead);\n                    if (rows.length < count) {\n                        removeRowSpanValue(table, count - rows.length);\n                    }\n                    trFilter = table.find('.k-filter-row');\n                    trFilter.append(that.thead.find('.k-filter-row .k-group-cell').add(filterCells));\n                    this.lockedHeader = table.prependTo(container);\n                    this.thead.find('.k-group-cell').remove();\n                    return true;\n                }\n                return false;\n            },\n            _removeLockedContainers: function () {\n                var elements = this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);\n                kendo.destroy(elements);\n                elements.off(NS).remove();\n                this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n                this.selectable = null;\n            },\n            _thead: function () {\n                var that = this, columns = that.columns, hasDetails = that._hasDetails() && columns.length, hasFilterRow = that._hasFilterRow(), idx, html = '', thead = that.table.find('>thead'), hasTHead = that.element.find('thead:first').length > 0, headerContent = that.options.messages.expandCollapseColumnHeader, tr;\n                if (!thead.length) {\n                    thead = $('<thead/>').insertBefore(that.tbody);\n                }\n                if (that.lockedHeader && that.thead) {\n                    tr = that.thead.find('tr:has(th):not(.k-filter-row)').html('');\n                    tr.remove();\n                    tr = $();\n                    that._removeLockedContainers();\n                } else if (hasTHead) {\n                    tr = that.element.find('thead:first tr:has(th):not(.k-filter-row)');\n                } else {\n                    tr = that.element.find('tr:has(th):first');\n                }\n                if (!tr.length) {\n                    tr = thead.children().first();\n                    if (!tr.length) {\n                        var rows = [{\n                                rowSpan: 1,\n                                cells: [],\n                                index: 0\n                            }];\n                        that._prepareColumns(rows, columns);\n                        for (idx = 0; idx < rows.length; idx++) {\n                            html += '<tr>';\n                            if (hasDetails) {\n                                html += '<th class=\"k-hierarchy-cell\" scope=\"col\">' + headerContent + '</th>';\n                            }\n                            html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                            html += '</tr>';\n                        }\n                        tr = $(html);\n                    }\n                } else {\n                    for (idx = 0; idx < columns.length; idx++) {\n                        var columnIndex = inArray(columns[idx], leafColumns(columns));\n                        var cell = leafDataCells(tr.parent()).filter('th:not(.k-group-cell):not(.k-hierarchy-cell)').eq(columnIndex);\n                        if (columns[idx].hidden && columnIndex >= 0) {\n                            cell[0].style.display = 'none';\n                        }\n                    }\n                    that._updateHeadersAttr(childColumns(columns));\n                }\n                if (hasFilterRow) {\n                    var filterRow = $('<tr/>');\n                    filterRow.addClass('k-filter-row');\n                    if (hasDetails || tr.find('.k-hierarchy-cell').length) {\n                        filterRow.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>');\n                    }\n                    var existingFilterRow = (that.thead || thead).find('.k-filter-row');\n                    if (existingFilterRow.length) {\n                        kendo.destroy(existingFilterRow);\n                        existingFilterRow.remove();\n                    }\n                    thead.append(filterRow);\n                }\n                if (!tr.children().length) {\n                    html = '';\n                    if (hasDetails) {\n                        html += '<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>';\n                    }\n                    html += that._createHeaderCells(columns);\n                    tr.html(html);\n                } else if (hasDetails && !tr.find('.k-hierarchy-cell')[0]) {\n                    tr.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n                }\n                tr.attr('role', 'row').find('th').addClass('k-header');\n                if (!that.options.scrollable) {\n                    thead.addClass('k-grid-header');\n                }\n                tr.find('script').remove().end().prependTo(thead);\n                if (that.thead) {\n                    that._destroyColumnAttachments();\n                }\n                this.angular('cleanup', function () {\n                    return { elements: thead.find('th' + NAVCELL).get() };\n                });\n                this.angular('compile', function () {\n                    return {\n                        elements: thead.find(HEADERCELLS).get(),\n                        data: map(columns, function (col) {\n                            return { column: col };\n                        })\n                    };\n                });\n                that.thead = thead.attr('role', 'rowgroup');\n                that._sortable();\n                that._filterable();\n                that._filterRow();\n                that._scrollable();\n                that._columnMenu();\n                var syncHeight;\n                var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n                if (hasLockedColumns) {\n                    syncHeight = that._appendLockedColumnHeader(that.thead.closest('.k-grid-header'));\n                    that._appendLockedColumnContent();\n                    that.lockedContent.bind('DOMMouseScroll' + NS + ' mousewheel' + NS, proxy(that._wheelScroll, that));\n                    if (kendo.support.touch) {\n                        that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                            move: function (e) {\n                                that.content.scrollTop(that.content.scrollTop() + -e.y.delta);\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                    that._updateLockedCols();\n                }\n                that._updateCols();\n                that._updateColumnCellIndex();\n                that._updateFirstColumnClass();\n                that._resizable();\n                that._draggable();\n                that._reorderable();\n                that._updateHeader(that._groups());\n                if (hasLockedColumns) {\n                    if (syncHeight) {\n                        that._syncLockedHeaderHeight();\n                    }\n                    that._applyLockedContainersWidth();\n                }\n                if (that.groupable) {\n                    that._attachGroupable();\n                }\n            },\n            _retrieveFirstColumn: function (columns, rows) {\n                var result = $();\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(':not(:first())');\n                    }\n                    result = result.add(rows);\n                }\n                return result;\n            },\n            _updateFirstColumnClass: function () {\n                var that = this, columns = that.columns || [], hasDetails = that._hasDetails() && columns.length;\n                if (!hasDetails && !that._groups()) {\n                    var tr = that.thead.find('>tr:not(.k-filter-row):not(:first)');\n                    columns = nonLockedColumns(columns);\n                    var rows = that._retrieveFirstColumn(columns, tr);\n                    if (that._isLocked()) {\n                        tr = that.lockedHeader.find('thead>tr:not(.k-filter-row):not(:first)');\n                        columns = lockedColumns(that.columns);\n                        rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                    }\n                    rows.each(function () {\n                        var ths = $(this).find('th');\n                        ths.removeClass('k-first');\n                        ths.eq(0).addClass('k-first');\n                    });\n                }\n            },\n            _prepareColumns: function (rows, columns, parentCell, parentRow) {\n                var row = parentRow || rows[rows.length - 1];\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = {\n                        column: columns[idx],\n                        colSpan: 0\n                    };\n                    row.cells.push(cell);\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = {\n                                rowSpan: 0,\n                                cells: [],\n                                index: rows.length\n                            };\n                            rows.push(childRow);\n                        }\n                        cell.colSpan = columns[idx].columns.length;\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                        totalColSpan += cell.colSpan - 1;\n                        row.rowSpan = rows.length - row.index;\n                    }\n                }\n                if (parentCell) {\n                    parentCell.colSpan += totalColSpan;\n                }\n            },\n            _wheelScroll: function (e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n                var content = this.content;\n                if (this.virtualScroll.rows) {\n                    content = this.virtualScrollable.verticalScrollbar;\n                }\n                var scrollTop = content.scrollTop(), delta = kendo.wheelDeltaY(e);\n                if (delta) {\n                    if (content[0].scrollHeight > content[0].clientHeight && (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 || content[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n                    content.scrollTop(scrollTop + -delta);\n                }\n            },\n            _isLocked: function () {\n                return this.lockedHeader != null;\n            },\n            _updateHeaderCols: function () {\n                var table = this.thead.parent().add(this.table);\n                if (this._isLocked()) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n                }\n            },\n            _updateColumnSorters: function () {\n                var that = this;\n                var cells = leafDataCells(that.thead);\n                var columns = leafColumns(that.columns);\n                var column;\n                var cell;\n                var sorterInstance;\n                if (!that.options.sortable) {\n                    return;\n                }\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n                        sorterInstance = cell.data('kendoColumnSorter');\n                        if (sorterInstance) {\n                            sorterInstance.refresh();\n                        }\n                    }\n                }\n            },\n            _updateHeadersAttr: function (columns) {\n                if (!columns.length) {\n                    return;\n                }\n                var that = this;\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].headerAttributes) {\n                        var th = that.element.find('[id=\\'' + columns[i].headerAttributes.id + '\\']');\n                        th.attr('headers', columns[i].headerAttributes.headers);\n                    }\n                }\n                that._updateHeadersAttr(childColumns(columns));\n            },\n            _updateCols: function (table) {\n                table = table || this.thead.parent().add(this.table);\n                this._appendCols(table, this._isLocked());\n            },\n            _updateLockedCols: function (table) {\n                if (this._isLocked()) {\n                    table = table || this.lockedHeader.find('table').add(this.lockedTable);\n                    normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n            _appendCols: function (table, locked) {\n                if (locked) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n            _autoColumns: function (schema) {\n                if (schema && schema.toJSON) {\n                    var that = this, field, encoded;\n                    schema = schema.toJSON();\n                    encoded = !(that.table.find('tbody tr').length > 0 && (!that.dataSource || !that.dataSource.transport));\n                    for (field in schema) {\n                        that.columns.push({\n                            field: field,\n                            encoded: encoded,\n                            headerAttributes: { id: kendo.guid() }\n                        });\n                    }\n                    that._thead();\n                    that._templates();\n                }\n            },\n            _rowsHtml: function (data, templates) {\n                var that = this, html = '', idx, rowTemplate = templates.rowTemplate, altRowTemplate = templates.altRowTemplate, length;\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (that._skipRerenderItemsCount > 0) {\n                        that._skipRerenderItemsCount--;\n                    } else {\n                        if (idx % 2) {\n                            html += altRowTemplate(data[idx]);\n                        } else {\n                            html += rowTemplate(data[idx]);\n                        }\n                    }\n                    that._data.push(data[idx]);\n                }\n                return html;\n            },\n            _groupData: function (group, skipFooter, firstColumn) {\n                var that = this, footerDefaults = that._groupAggregatesDefaultObject || {}, groupItems = group.items, aggregates = extend({}, footerDefaults, group.aggregates), headerData = extend({}, {\n                        field: group.field,\n                        value: group.value,\n                        items: groupItems,\n                        aggregates: aggregates\n                    }, group.aggregates[firstColumn ? firstColumn.field : group.field]), footerData = {};\n                if (!skipFooter) {\n                    for (var aggregate in aggregates) {\n                        footerData[aggregate] = extend({}, aggregates[aggregate], {\n                            group: {\n                                field: group.field,\n                                value: group.value,\n                                items: groupItems\n                            }\n                        });\n                    }\n                }\n                return extend({}, footerData, headerData);\n            },\n            _removeGroupIfEmpty: function (row) {\n                var that = this, itemsCount, subgroupsCount, length = that.dataSource._group.length;\n                for (var i = 0; i < length; i++) {\n                    row = row.prev();\n                    itemsCount = +row.attr('data-group-item-count');\n                    subgroupsCount = +row.attr('data-sub-group-count');\n                    if (itemsCount == 1 || subgroupsCount == 1) {\n                        row.hide();\n                    }\n                }\n            },\n            _groupRowHtml: function (group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup) {\n                var that = this, html = '', idx, length, field = group.field, column = grep(leafColumns(that.columns), function (column) {\n                        return column.field == field;\n                    })[0] || {}, firstColumn = visibleColumns(that.columns)[0], firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null, template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate, text = (column.title || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded), groupItems = group.currentItems || group.items, groups = that._groups(), groupFooterTemplate = templates.groupFooterTemplate, groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate, groupData, expanded = that.dataSource._isGroupPaged() ? that.dataSource._groupsState[group.uid] : true;\n                if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                    expanded = true;\n                }\n                if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                    groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n                }\n                if (template && !skipColspan) {\n                    text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n                }\n                if (!that._skipRerenderItemsCount) {\n                    if (groupHeaderColumnTemplate) {\n                        if (!group.excludeHeader) {\n                            html += groupHeaderColumnTemplate(extend({}, groupData, {\n                                groupCells: level,\n                                colspan: groups - level,\n                                text: text\n                            }));\n                        } else {\n                            group.excludeHeader = false;\n                        }\n                    } else {\n                        if (!group.excludeHeader) {\n                            html += groupHeaderBuilder(colspan, level, text, expanded, group.uid, that.dataSource._isGroupPaged());\n                        } else {\n                            group.excludeHeader = false;\n                        }\n                    }\n                } else {\n                    groupHeaderBuilder(colspan, level, text, expanded, group.uid, that.dataSource._isGroupPaged());\n                }\n                if (expanded) {\n                    if (group.hasSubgroups) {\n                        for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                            html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1);\n                        }\n                    } else {\n                        html += that._rowsHtml(groupItems, templates);\n                    }\n                }\n                if (groupFooterTemplate) {\n                    if (skipLastGroup) {\n                        if (!inArray(group.value, that._skippedGroups)) {\n                            that._skippedGroups.push(group.value);\n                        }\n                    } else {\n                        if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                            that._skippedGroups.shift();\n                        }\n                        if (!that._skipRerenderItemsCount) {\n                            html += groupFooterTemplate(groupData);\n                        }\n                    }\n                }\n                return html;\n            },\n            collapseGroup: function (group) {\n                var level, that = this, groupToCollapse = group, groupable = this.options.groupable, showFooter = groupable.showFooter, footerCount = showFooter ? 0 : 1, offset, relatedGroup = $(), idx, length, tr;\n                group = $(group);\n                level = group.find('.k-group-cell').length;\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr('data-group-uid');\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterCollapse;\n                    that.dataSource._groupsState[groupUid] = false;\n                    groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function () {\n                        that._progress(false);\n                    }, 'collapseGroup');\n                    return;\n                }\n                if (this._isLocked()) {\n                    if (!group.closest('div').hasClass('k-grid-content-locked')) {\n                        relatedGroup = group.nextAll('tr');\n                        group = this.lockedTable.find('>tbody>tr:eq(' + group.index() + ')');\n                    } else {\n                        relatedGroup = this.tbody.children('tr:eq(' + group.index() + ')').nextAll('tr');\n                    }\n                }\n                group.find('.k-i-collapse').addClass('k-i-expand').removeClass('k-i-collapse');\n                group.find('td[aria-expanded=\\'true\\']:first').attr('aria-expanded', false).find('a').attr(ARIALABEL, EXPAND);\n                group = group.nextAll('tr');\n                var toHide = [];\n                for (idx = 0, length = group.length; idx < length; idx++) {\n                    tr = group.eq(idx);\n                    offset = tr.find('.k-group-cell').length;\n                    if (tr.hasClass('k-grouping-row')) {\n                        footerCount++;\n                    } else if (tr.hasClass('k-group-footer')) {\n                        footerCount--;\n                    }\n                    if (offset <= level || tr.hasClass('k-group-footer') && footerCount < 0) {\n                        break;\n                    }\n                    if (relatedGroup.length) {\n                        toHide.push(relatedGroup[idx]);\n                    }\n                    toHide.push(tr[0]);\n                }\n                $(toHide).hide();\n                if (this.options.scrollable.endless && this.content) {\n                    clearTimeout(that._collapseGroupsTimeOut);\n                    that._collapseGroupsTimeOut = setTimeout(function () {\n                        that.content.scroll();\n                        that._groupToCollapse = groupToCollapse;\n                    });\n                }\n            },\n            expandGroup: function (group) {\n                group = $(group);\n                var that = this, showFooter = that.options.groupable.showFooter, level, tr, offset, relatedGroup = $(), idx, length, footersVisibility = [], groupsCount = 1;\n                level = group.find('.k-group-cell').length;\n                if (this.dataSource._isGroupPaged()) {\n                    var groupUid = group.attr('data-group-uid');\n                    var groupObject = that.dataSource._getGroupByUid(groupUid);\n                    var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    var groupCountAfterExpand;\n                    that.dataSource._groupsState[groupUid] = true;\n                    if (groupObject.items && groupObject.items.length) {\n                        groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                        that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                    }\n                    that._progress(true);\n                    that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function () {\n                        that._progress(false);\n                    }, 'expandGroup');\n                    return;\n                }\n                if (this._isLocked()) {\n                    if (!group.closest('div').hasClass('k-grid-content-locked')) {\n                        relatedGroup = group.nextAll('tr');\n                        group = this.lockedTable.find('>tbody>tr:eq(' + group.index() + ')');\n                    } else {\n                        relatedGroup = this.tbody.children('tr:eq(' + group.index() + ')').nextAll('tr');\n                    }\n                }\n                group.find('.k-i-expand').addClass('k-i-collapse').removeClass('k-i-expand');\n                group.find('td[aria-expanded=\\'false\\']:first').attr('aria-expanded', true).find('a').attr(ARIALABEL, COLLAPSE);\n                group = group.nextAll('tr');\n                for (idx = 0, length = group.length; idx < length; idx++) {\n                    tr = group.eq(idx);\n                    offset = tr.find('.k-group-cell').length;\n                    if (offset <= level) {\n                        break;\n                    }\n                    if (offset == level + 1 && !tr.hasClass('k-detail-row')) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                        if (tr.hasClass('k-grouping-row') && tr.find('.k-icon').hasClass('k-i-collapse')) {\n                            that.expandGroup(tr);\n                        }\n                        if (tr.hasClass('k-master-row') && tr.find('.k-icon').hasClass('k-i-collapse')) {\n                            tr.next().show();\n                            relatedGroup.eq(idx + 1).show();\n                        }\n                    }\n                    if (tr.hasClass('k-grouping-row')) {\n                        if (showFooter) {\n                            footersVisibility.push(tr.is(':visible'));\n                        }\n                        groupsCount++;\n                    }\n                    if (tr.hasClass('k-group-footer')) {\n                        if (showFooter) {\n                            var toggleVisibility = footersVisibility.pop();\n                            tr.toggle(toggleVisibility);\n                            relatedGroup.eq(idx).toggle(toggleVisibility);\n                        }\n                        if (groupsCount == 1) {\n                            tr.show();\n                            relatedGroup.eq(idx).show();\n                        } else {\n                            groupsCount--;\n                        }\n                    }\n                }\n                if (level === 0 && that.options.scrollable.endless && this._isLocked()) {\n                    that._syncLockedContentHeight();\n                }\n            },\n            _updateHeader: function (groups) {\n                var that = this, container = that._isLocked() ? that.lockedHeader.find('thead') : that.thead, filterCells = container.find('tr.k-filter-row').find('th.k-group-cell').length, length = container.find('tr:first').find('th.k-group-cell').length, rows = container.children('tr:not(:first)').filter(function () {\n                        return !$(this).children(':visible').length;\n                    });\n                if (groups > length) {\n                    $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">' + that.options.messages.expandCollapseColumnHeader + '</th>')).prependTo(container.children('tr:not(.k-filter-row)'));\n                    if (that.element.is(':visible')) {\n                        rows.find('th.k-group-cell').hide();\n                    }\n                } else if (groups < length) {\n                    container.find('tr').each(function () {\n                        $(this).find('th.k-group-cell').filter(':eq(' + groups + '),' + ':gt(' + groups + ')').remove();\n                    });\n                }\n                if (groups > filterCells) {\n                    $(new Array(groups - filterCells + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>')).prependTo(container.find('.k-filter-row'));\n                }\n            },\n            _firstDataItem: function (data, grouped) {\n                if (data && grouped) {\n                    if (data.hasSubgroups) {\n                        data = this._firstDataItem(data.items[0], grouped);\n                    } else {\n                        data = data.items[0];\n                    }\n                }\n                return data;\n            },\n            _updateTablesWidth: function () {\n                var that = this, tables;\n                if (!that._isLocked()) {\n                    return;\n                }\n                tables = $('>.k-grid-footer>.k-grid-footer-wrap>table', that.wrapper).add(that.thead.parent()).add(that.table);\n                that._footerWidth = tableWidth(tables.eq(0));\n                tables.width(that._footerWidth);\n                tables = $('>.k-grid-footer>.k-grid-footer-locked>table', that.wrapper).add(that.lockedHeader.find('>table')).add(that.lockedTable);\n                tables.width(tableWidth(tables.eq(0)));\n            },\n            hideColumn: function (column) {\n                var that = this, cell, tables, idx, cols, colWidth, position, width = 0, headerCellIndex, length, footer = that.footer || that.wrapper.find('.k-grid-footer'), virtualScroll = that.virtualScroll || {}, columns = that.columns, visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).filter(isCellVisible).length : 0, columnIndex, groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                        return column.groupHeaderColumnTemplate;\n                    });\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n                if (column.columns && column.columns.length) {\n                    position = columnVisiblePosition(column, columns);\n                    setColumnVisibility(column, false);\n                    setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr:eq(' + position.row + ')>th'), position.cell, false);\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                        this.hideColumn(column.columns[idx]);\n                    }\n                    that.trigger(COLUMNHIDE, { column: column });\n                    return;\n                }\n                columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n                setColumnVisibility(column, false);\n                that._setParentsVisibility(column, false);\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                var container = that.thead;\n                headerCellIndex = columnIndex;\n                if (that.lockedHeader && visibleLocked > columnIndex) {\n                    container = that.lockedHeader.find('>table>thead');\n                } else {\n                    headerCellIndex -= visibleLocked;\n                }\n                cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n                cell[0].style.display = 'none';\n                setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr.k-filter-row>th'), columnIndex, false);\n                if (footer[0]) {\n                    that._updateCols(footer.find('>.k-grid-footer-wrap>table'));\n                    that._updateLockedCols(footer.find('>.k-grid-footer-locked>table'));\n                    setCellVisibility(footer.find('.k-footer-template>td'), columnIndex, false);\n                }\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNHIDE, { column: column });\n                    return;\n                }\n                if (that.lockedTable && visibleLocked > columnIndex) {\n                    hideColumnCells(that.lockedTable.find('>tbody>tr'), columnIndex);\n                } else {\n                    hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n                }\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                    that._syncLockedFooterHeight();\n                } else {\n                    cols = that.thead.prev().find('col');\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (cols[idx].className.indexOf('k-hierarchy-col') > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n                        if (cols[idx].className.indexOf('k-group-col') > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n                        if (colWidth && colWidth.indexOf('%') == -1) {\n                            width += parseInt(colWidth, 10);\n                        } else {\n                            width = 0;\n                            break;\n                        }\n                    }\n                    tables = $('>.k-grid-header table:first,>.k-grid-footer table:first', that.wrapper).add(that.table);\n                    that._footerWidth = null;\n                    if (width) {\n                        tables.each(function () {\n                            this.style.width = width + 'px';\n                        });\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                    if (browser.msie && browser.version == 8) {\n                        tables.css('display', 'inline-table');\n                        setTimeout(function () {\n                            tables.css('display', 'table');\n                        }, 1);\n                    }\n                }\n                that._updateFirstColumnClass();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that.trigger(COLUMNHIDE, { column: column });\n            },\n            _setParentsVisibility: function (column, visible) {\n                var that = this;\n                var columns = that.columns;\n                var idx;\n                var parents = [];\n                var parent;\n                var position;\n                var cell;\n                var colSpan;\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n                var predicate = visible ? function (p) {\n                    return visibleColumns(p.columns).length && p.hidden;\n                } : function (p) {\n                    return !visibleColumns(p.columns).length && !p.hidden;\n                };\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n                        position = columnPosition(parent, columns);\n                        cell = elements($('>table>thead', this.lockedHeader), this.thead, '>tr:eq(' + position.row + ')>th:not(.k-group-cell):not(.k-hierarchy-cell)').eq(position.cell);\n                        if (predicate(parent)) {\n                            setColumnVisibility(parent, visible);\n                            cell[0].style.display = visible ? '' : 'none';\n                        }\n                        if (cell.filter('[' + kendo.attr('colspan') + ']').length) {\n                            colSpan = parseInt(cell.attr(kendo.attr('colspan')), 10);\n                            cell[0].colSpan = colSpan - hiddenLeafColumnsCount(parent.columns) || 1;\n                        }\n                    }\n                }\n            },\n            _updateContentWidth: function () {\n                var that = this;\n                var tables = that.table.add(that.thead.parent());\n                tables.css({ width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns))) });\n                that.refresh();\n            },\n            showColumn: function (column) {\n                var that = this, idx, length, cell, tables, width, headerCellIndex, position, colWidth, cols, columns = that.columns, virtualScroll = that.virtualScroll || {}, footer = that.footer || that.wrapper.find('.k-grid-footer'), lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).length : 0, columnIndex, originalColumn, columnLeafIndex, groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function (column) {\n                        return column.groupHeaderColumnTemplate;\n                    });\n                if (typeof column == 'number') {\n                    columnIndex = column;\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    $.each(flatColumns(columns), function (index, item) {\n                        if (item === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                } else {\n                    $.each(flatColumns(columns), function (index, item) {\n                        if (item.field === column) {\n                            column = item;\n                            columnIndex = index;\n                            return false;\n                        }\n                    });\n                }\n                if (!column || isVisible(column)) {\n                    return;\n                }\n                var setColumnVisibility = that._columnVisibilitySetter(column);\n                if (column.columns && column.columns.length) {\n                    position = columnPosition(column, columns);\n                    originalColumn = flatColumns(that.options.columns)[columnIndex];\n                    setColumnVisibility(column, true);\n                    setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr:eq(' + position.row + ')>th'), position.cell, true);\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                        if (!originalColumn.columns[idx].hidden) {\n                            this.showColumn(column.columns[idx]);\n                        }\n                    }\n                    that.trigger(COLUMNSHOW, { column: column });\n                    return;\n                }\n                columnLeafIndex = inArray(column, leafColumns(columns));\n                setColumnVisibility(column, true);\n                that._setParentsVisibility(column, true);\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                var container = that.thead;\n                headerCellIndex = columnLeafIndex;\n                if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                    container = that.lockedHeader.find('>table>thead');\n                } else {\n                    headerCellIndex -= lockedColumnsCount;\n                }\n                cell = leafDataCells(container).eq(headerCellIndex);\n                cell[0].style.display = '';\n                setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr.k-filter-row>th'), columnLeafIndex, true);\n                if (footer[0]) {\n                    that._updateCols(footer.find('>.k-grid-footer-wrap>table'));\n                    that._updateLockedCols(footer.find('>.k-grid-footer-locked>table'));\n                    setCellVisibility(footer.find('.k-footer-template>td'), columnLeafIndex, true);\n                }\n                if (virtualScroll.columns && !column.locked) {\n                    that._updateContentWidth();\n                    that.trigger(COLUMNSHOW, { column: column });\n                    return;\n                }\n                if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                    showColumnCells(that.lockedTable.find('>tbody>tr'), columnLeafIndex);\n                } else {\n                    showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n                }\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                } else {\n                    tables = $('>.k-grid-header table:first,>.k-grid-footer table:first', that.wrapper).add(that.table);\n                    if (!column.width) {\n                        tables.width('');\n                    } else {\n                        width = 0;\n                        cols = that.thead.prev().find('col');\n                        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                            colWidth = cols[idx].style.width;\n                            if (cols[idx].className.indexOf('k-hierarchy-col') > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n                            if (cols[idx].className.indexOf('k-group-col') > -1) {\n                                width += outerWidth(cols[idx]);\n                                continue;\n                            }\n                            if (colWidth.indexOf('%') > -1) {\n                                width = 0;\n                                break;\n                            }\n                            width += parseInt(colWidth, 10);\n                        }\n                        that._footerWidth = null;\n                        if (width) {\n                            tables.each(function () {\n                                this.style.width = width + 'px';\n                            });\n                            that._footerWidth = width;\n                            that._setContentWidth();\n                        }\n                    }\n                }\n                that._updateFirstColumnClass();\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n                that.trigger(COLUMNSHOW, { column: column });\n            },\n            _columnVisibilitySetter: function (column) {\n                var col = column || {};\n                if (isUndefined(col.media)) {\n                    return setColumnVisibility;\n                } else {\n                    return setColumnMediaVisibility;\n                }\n            },\n            _progress: function (toggle) {\n                var element = this.element;\n                var endless = this.options.scrollable && this.options.scrollable.endless;\n                if (this._editContainer && this._editMode() === 'popup') {\n                    element = this._editContainer;\n                } else if (this.lockedContent || endless) {\n                    element = this.wrapper;\n                } else if (this.element.is('table')) {\n                    element = this.element.parent();\n                } else if (this.content && this.content.length) {\n                    element = this.content;\n                }\n                if (endless && toggle) {\n                    kendo.ui.progress(element, toggle, {\n                        height: this.content.height(),\n                        top: this.content[0].offsetTop,\n                        opacity: true\n                    });\n                } else {\n                    kendo.ui.progress(element, toggle);\n                }\n            },\n            _resize: function (size, force) {\n                this._syncLockedContentHeight();\n                this._syncLockedHeaderHeight();\n                if (this.content) {\n                    this._setContentWidth();\n                    this._setContentHeight();\n                }\n                if (this.lockedTable) {\n                    this._syncLockedScroll();\n                }\n                if (this.virtualScrollable && (force || this._rowHeight)) {\n                    if (force) {\n                        this._rowHeight = null;\n                    }\n                    this.virtualScrollable.repaintScrollbar();\n                }\n                if (this.pager && this.pager.element) {\n                    this.pager.resize(force);\n                }\n            },\n            _isActiveInTable: function () {\n                var active = activeElement();\n                if (!active) {\n                    return false;\n                }\n                return this.table[0] === active || $.contains(this.table[0], active) || this._isLocked() && (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active));\n            },\n            refresh: function (e) {\n                var that = this, data = that.dataSource.view(), navigatable = that.options.navigatable, virtualScroll = that.virtualScroll || {}, currentIndex, current = $(that.current()), isCurrentInHeader = false, groups = (that.dataSource.group() || []).length, colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length, contentScrollLeft, cachedItemsToSkip;\n                if (e && e.action === 'itemchange' && (that.editable || that.options.scrollable.endless)) {\n                    if (this._editMode() != 'popup' || this._editMode() === 'popup' && !that._editableIsClosing) {\n                        return;\n                    }\n                }\n                if (virtualScroll.columns) {\n                    that._templates();\n                }\n                if (e && e.action === 'remove' && that.editable && that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                    that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n                }\n                e = e || {};\n                if (that.trigger('dataBinding', {\n                        action: e.action || 'rebind',\n                        index: e.index,\n                        items: e.items\n                    })) {\n                    return;\n                }\n                if (e.action === SYNC && that._isVirtualEditable()) {\n                    that._destroyEditable();\n                    that._clearEditableState();\n                }\n                that._angularItems('cleanup');\n                if (!that._endlessFetchInProgress) {\n                    if (navigatable && (that._isActiveInTable() || that._editContainer && that._editContainer.data('kendoWindow'))) {\n                        isCurrentInHeader = current.is('th');\n                        currentIndex = isCurrentInHeader ? current.parent().children(':not(.k-group-cell)').index(current[0]) : Math.max(that.cellIndex(current), 0);\n                    }\n                    that._destroyEditable();\n                }\n                if (that.options.scrollable && that.options.scrollable.endless) {\n                    clearTimeout(that._progressTimeOut);\n                    that._progressTimeOut = setTimeout(function () {\n                        if (!that._endlessFetchInProgress) {\n                            that._progress(false);\n                        }\n                    }, 100);\n                } else {\n                    that._progress(false);\n                }\n                that._hideResizeHandle();\n                that._data = [];\n                if (!that.columns.length) {\n                    that._autoColumns(that._firstDataItem(data[0], groups));\n                    colspan = groups + that.columns.length;\n                }\n                that._group = groups > 0 || that._group;\n                if (that._group) {\n                    that._templates();\n                    that._updateCols();\n                    that._updateLockedCols();\n                    if (!that._virtualColScroll) {\n                        that._updateHeader(groups);\n                    }\n                    that._group = groups > 0;\n                    that._groupRows = groupRows(data);\n                }\n                if (that.content) {\n                    contentScrollLeft = that.content.scrollLeft();\n                }\n                cachedItemsToSkip = that._skipRerenderItemsCount;\n                that._renderContent(data, colspan, groups);\n                if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                    that._skipRerenderItemsCount = cachedItemsToSkip;\n                }\n                that._renderLockedContent(data, colspan, groups);\n                if (!that._virtualColScroll) {\n                    that._footer();\n                    that._renderNoRecordsContent();\n                    that._togglePagerVisibility();\n                    that._setContentHeight();\n                    that._setContentWidth(that.content && contentScrollLeft);\n                }\n                if (that.lockedTable) {\n                    if (virtualScroll.rows) {\n                        that.content.find('>.k-virtual-scrollable-wrap').trigger('scroll');\n                    } else if (that.touchScroller) {\n                        that.touchScroller.movable.trigger('change');\n                    } else {\n                        that.wrapper.one('scroll', function (e) {\n                            e.stopPropagation();\n                        });\n                        that.content.trigger('scroll');\n                    }\n                }\n                if (!that._endlessFetchInProgress) {\n                    that._restoreCurrent(currentIndex, isCurrentInHeader);\n                }\n                if (that.touchScroller) {\n                    that.touchScroller.contentResized();\n                }\n                if (that.selectable) {\n                    that.selectable.resetTouchEvents();\n                }\n                that._muteAngularRebind(function () {\n                    that._angularItems('compile');\n                });\n                if (that._checkBoxSelection) {\n                    that._toggleHeaderCheckState(false);\n                }\n                if (that.options.persistSelection && (that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell || that._checkBoxSelection) && that.items().length) {\n                    that._restoreSelection();\n                } else {\n                    that._selectedIds = {};\n                }\n                that.trigger(DATABOUND);\n            },\n            _restoreCurrent: function (currentIndex, isCurrentInHeader) {\n                if (currentIndex === undefined || currentIndex < 0) {\n                    return;\n                }\n                this._removeCurrent();\n                if (isCurrentInHeader) {\n                    this._setCurrent(this.thead.find('th:not(.k-group-cell)').eq(currentIndex));\n                } else {\n                    var rowIndex = 0;\n                    var virtualScroll = this.virtualScroll || {};\n                    if (this._rowVirtualIndex) {\n                        if (virtualScroll.rows) {\n                            rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                        } else {\n                            rowIndex = this._rowVirtualIndex;\n                        }\n                    } else {\n                        currentIndex = 0;\n                    }\n                    var row = $();\n                    var colspan;\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find('>tbody>tr').eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n                    if (this._hasVirtualColumns()) {\n                        colspan = parseInt(row.find('td:first').attr('colspan'), 10);\n                        currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                    }\n                    var td = row.find('>td:not(.k-group-cell):not(.k-hierarchy-cell)').eq(currentIndex);\n                    if (!td.length || currentIndex < 0) {\n                        return;\n                    }\n                    if (this._hasVirtualColumns()) {\n                        this._setCurrent(td, true, true);\n                    } else {\n                        this._setCurrent(td);\n                    }\n                }\n                if (this._current) {\n                    focusTable(this._current.closest('table')[0], true);\n                }\n            },\n            _restoreSelection: function () {\n                var that = this, allRows = that.items(), selectedRows, id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                selectedRows = grep(allRows, function (row) {\n                    var dataItemKey = that.dataItem(row)[id];\n                    if (that._selectedIds[dataItemKey]) {\n                        return row;\n                    }\n                });\n                that.select(selectedRows);\n            },\n            _angularItems: function (cmd) {\n                kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n                if (cmd === 'cleanup' && (!this.dataSource || !this.dataSource.options.endless)) {\n                    this._cleanupDetailItems();\n                }\n                this._angularGroupItems(cmd);\n                this._angularGroupFooterItems(cmd);\n            },\n            _cleanupDetailItems: function () {\n                var that = this;\n                if (that._hasDetails()) {\n                    that.angular('cleanup', function () {\n                        return { elements: that.tbody.children('.k-detail-row') };\n                    });\n                    that.tbody.find('.k-detail-cell').empty();\n                }\n            },\n            _angularGroupItems: function (cmd) {\n                var that = this, container = that.tbody;\n                if (that.lockedContent) {\n                    container = that.lockedTable.find('tbody');\n                }\n                if (that._group) {\n                    that.angular(cmd, function () {\n                        return {\n                            elements: container.children('.k-grouping-row'),\n                            data: $.map(groupRows(that.dataSource.view()), function (dataItem) {\n                                return { dataItem: dataItem };\n                            })\n                        };\n                    });\n                }\n            },\n            _angularGroupFooterItems: function (cmd) {\n                var that = this, container = that.tbody;\n                if (that.lockedContent) {\n                    container = that.element;\n                }\n                if (that._group && that.groupFooterTemplate) {\n                    that.angular(cmd, function () {\n                        return {\n                            elements: container.find('.k-group-footer'),\n                            data: $.map(groupFooters(that.dataSource.view()), function (dataItem) {\n                                return { dataItem: dataItem };\n                            })\n                        };\n                    });\n                }\n            },\n            _renderContent: function (data, colspan, groups) {\n                var that = this, idx, length, html = '', isLocked = that.lockedContent != null, endlessAppend = null, skipLastGroup, flatViewLength, scrollable = that.options.scrollable, templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate,\n                        groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                    };\n                if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                    that._skipRerenderItemsCount = 0;\n                    if (that.content) {\n                        that.content[0].scrollTop = 0;\n                    }\n                }\n                endlessAppend = that._skipRerenderItemsCount > 0;\n                colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n                if (groups > 0) {\n                    colspan = isLocked ? colspan - groups : colspan;\n                    if (that.detailTemplate) {\n                        colspan++;\n                    }\n                    if (that.groupFooterTemplate) {\n                        that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                    }\n                    if (that.options.scrollable.endless) {\n                        flatViewLength = that.dataSource.flatView().length;\n                    }\n                    for (idx = 0, length = data.length; idx < length; idx++) {\n                        if (!that._skippedGroups) {\n                            that._skippedGroups = [];\n                        }\n                        skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                        html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup);\n                    }\n                } else {\n                    html += that._rowsHtml(data, templates);\n                }\n                if (endlessAppend) {\n                    that.tbody.append(html);\n                    clearTimeout(that._endlessFetchTimeOut);\n                    that._endlessFetchTimeOut = setTimeout(function () {\n                        if (that._groupToCollapse) {\n                            that.collapseGroup(that._groupToCollapse);\n                            that._groupToCollapse = null;\n                        }\n                    });\n                    that._endlessFetchInProgress = null;\n                } else {\n                    that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular);\n                }\n            },\n            _renderGroupRows: function () {\n                var that = this, data = that._groupRows, groupRows = that.wrapper.find('.k-grouping-row'), groups = that._groups(), groupRowBuilderFunc, isLocked = that.lockedContent != null, columns, colspan, group, field, column, template, text, groupHeaderData, tableContainer, isInLockedContainer, prevElement, newGroupRowElement, currentRow, level, groupHeaderColumnTemplate, firstColumnGroupData;\n                groupRows.each(function (index, row) {\n                    currentRow = $(row);\n                    tableContainer = currentRow.closest('table').parent();\n                    isInLockedContainer = tableContainer.is('.' + CONTENTRLOCKEDCONTAINER);\n                    columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n                    level = currentRow.find('.' + GROUPCELLCLASS).length;\n                    if (isLocked) {\n                        groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                        colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n                    } else {\n                        groupRowBuilderFunc = groupRowBuilder;\n                        colspan = columns.length + groups - level;\n                    }\n                    group = index >= data.length ? data[index - data.length] : data[index];\n                    field = group.field;\n                    column = grep(leafColumns(that.columns), function (column) {\n                        return column.field == field;\n                    })[0] || {};\n                    firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n                    template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n                    text = (column.title || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n                    groups = groups;\n                    groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n                    groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n                    if (template) {\n                        text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n                    }\n                    prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n                    newGroupRowElement = $(groupHeaderColumnTemplate ? groupHeaderColumnTemplate(extend({}, groupHeaderData, {\n                        groupCells: level,\n                        colspan: groups - level,\n                        text: text\n                    })) : groupRowBuilderFunc(colspan, level, text));\n                    if (prevElement.is('tbody')) {\n                        prevElement.prepend(newGroupRowElement);\n                    } else {\n                        prevElement.after(newGroupRowElement);\n                    }\n                    currentRow.remove();\n                });\n            },\n            _renderLockedContent: function (data, colspan, groups) {\n                var html = '', idx, length, endlessAppend = null, templates = {\n                        rowTemplate: this.lockedRowTemplate,\n                        altRowTemplate: this.lockedAltRowTemplate,\n                        groupFooterTemplate: this.lockedGroupFooterTemplate,\n                        groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n                    };\n                if (this.lockedContent) {\n                    var table = this.lockedTable;\n                    endlessAppend = this._skipRerenderItemsCount > 0;\n                    if (groups > 0) {\n                        colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                        for (idx = 0, length = data.length; idx < length; idx++) {\n                            html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, this.options.scrollable.endless && idx === data.length - 1);\n                        }\n                    } else {\n                        html = this._rowsHtml(data, templates);\n                    }\n                    if (endlessAppend) {\n                        table.children('tbody').append(html);\n                    } else {\n                        appendContent(table.children('tbody'), table, html, this.options.$angular);\n                    }\n                    this._syncLockedContentHeight();\n                }\n            },\n            _togglePagerVisibility: function () {\n                if (this.options.pageable.alwaysVisible === false) {\n                    this.wrapper.find('.k-grid-pager').toggle(this.dataSource.total() >= this.dataSource.pageSize());\n                }\n            },\n            _adjustRowsHeight: function (table1, table2) {\n                var rows = table1[0].rows, length = rows.length, idx, rows2 = table2[0].rows, containers = table1.add(table2), containersLength = containers.length, heights = [];\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    if (rows[idx].style.height) {\n                        rows[idx].style.height = rows2[idx].style.height = '';\n                    }\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    var offsetHeight1 = rows[idx].offsetHeight;\n                    var offsetHeight2 = rows2[idx].offsetHeight;\n                    var height = 0;\n                    if (offsetHeight1 > offsetHeight2) {\n                        height = offsetHeight1;\n                    } else if (offsetHeight1 < offsetHeight2) {\n                        height = offsetHeight2;\n                    }\n                    heights.push(height);\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = 'none';\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (heights[idx]) {\n                        rows[idx].style.height = rows2[idx].style.height = heights[idx] + 1 + 'px';\n                    }\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = '';\n                }\n            }\n        });\n        if (kendo.ExcelMixin) {\n            kendo.ExcelMixin.extend(Grid.prototype);\n        }\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Grid.prototype);\n            Grid.prototype._drawPDF_autoPageBreak = function (progress) {\n                var grid = this;\n                var result = new $.Deferred();\n                var dataSource = grid.dataSource;\n                var allPages = grid.options.pdf.allPages;\n                var origBody = grid.wrapper.find('table[role$=\"grid\"] > tbody');\n                var cont = $('<div>').css({\n                    position: 'absolute',\n                    left: -10000,\n                    top: -10000\n                });\n                var clone = grid.wrapper.clone().css({\n                    height: 'auto',\n                    width: 'auto'\n                }).appendTo(cont);\n                clone.find('.k-grid-content').css({\n                    height: 'auto',\n                    width: 'auto',\n                    overflow: 'visible'\n                });\n                clone.find('table[role$=\"grid\"], .k-grid-footer table').css({\n                    height: 'auto',\n                    width: '100%',\n                    overflow: 'visible'\n                });\n                clone.find('.k-grid-pager, .k-grid-toolbar, .k-grouping-header').remove();\n                clone.find('.k-grid-header, .k-grid-footer, .k-auto-scrollable').css({ paddingRight: 0 });\n                this._initPDFProgress(progress);\n                var body = clone.find('table[role$=\"grid\"] > tbody').empty();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.one('change', draw);\n                        dataSource.page(startingPage);\n                    } else {\n                        grid.refresh();\n                        draw();\n                    }\n                }\n                function draw() {\n                    cont.appendTo(document.body);\n                    var options = $.extend({}, grid.options.pdf, {\n                        _destructive: true,\n                        progress: function (p) {\n                            progress.notify({\n                                page: p.page,\n                                pageNumber: p.pageNum,\n                                progress: 0.5 + p.pageNum / p.totalPages / 2,\n                                totalPages: p.totalPages\n                            });\n                        }\n                    });\n                    kendo.drawing.drawDOM(clone, options).always(function () {\n                        cont.remove();\n                    }).then(function (group) {\n                        result.resolve(group);\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                function renderPage() {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n                    body.append(origBody.find('tr'));\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        dataSource.unbind('change', renderPage);\n                        resolve();\n                    }\n                }\n                if (allPages) {\n                    dataSource.bind('change', renderPage);\n                    dataSource.page(1);\n                } else {\n                    renderPage();\n                }\n                return result.promise();\n            };\n            Grid.prototype._drawPDF = function (progress) {\n                var grid = this;\n                if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != 'auto') {\n                    return grid._drawPDF_autoPageBreak(progress);\n                }\n                var result = new $.Deferred();\n                var dataSource = grid.dataSource;\n                var allPages = grid.options.pdf.allPages;\n                this._initPDFProgress(progress);\n                var doc = new kendo.drawing.Group();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.unbind('change', exportPage);\n                        dataSource.one('change', function () {\n                            result.resolve(doc);\n                        });\n                        dataSource.page(startingPage);\n                    } else {\n                        result.resolve(doc);\n                    }\n                }\n                function exportPage() {\n                    grid._drawPDFShadow({ width: grid.wrapper.width() }, { avoidLinks: grid.options.pdf.avoidLinks }).done(function (group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n                        progress.notify(args);\n                        doc.append(args.page);\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                if (allPages) {\n                    dataSource.bind('change', exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n                return result.promise();\n            };\n            Grid.prototype._initPDFProgress = function (deferred) {\n                var loading = $('<div class=\\'k-loading-pdf-mask\\'><div class=\\'k-loading-color\\'></div></div>');\n                loading.prepend(this.wrapper.clone().css({\n                    position: 'absolute',\n                    top: 0,\n                    left: 0\n                }));\n                this.wrapper.append(loading);\n                var pb = $('<div class=\\'k-loading-pdf-progress\\'>').appendTo(loading).kendoProgressBar({\n                    type: 'chunk',\n                    chunkCount: 10,\n                    min: 0,\n                    max: 1,\n                    value: 0\n                }).data('kendoProgressBar');\n                deferred.progress(function (e) {\n                    pb.value(e.progress);\n                }).always(function () {\n                    kendo.destroy(loading);\n                    loading.remove();\n                });\n            };\n        }\n        function syncTableHeight(table1, table2) {\n            table1 = table1[0];\n            table2 = table2[0];\n            if (table1.rows.length !== table2.rows.length) {\n                var lockedHeigth = table1.offsetHeight;\n                var tableHeigth = table2.offsetHeight;\n                var row;\n                var diff;\n                if (lockedHeigth > tableHeigth) {\n                    row = table2.rows[table2.rows.length - 1];\n                    if (filterRowRegExp.test(row.className)) {\n                        row = table2.rows[table2.rows.length - 2];\n                    }\n                    diff = lockedHeigth - tableHeigth;\n                } else {\n                    row = table1.rows[table1.rows.length - 1];\n                    if (filterRowRegExp.test(row.className)) {\n                        row = table1.rows[table1.rows.length - 2];\n                    }\n                    diff = tableHeigth - lockedHeigth;\n                }\n                row.style.height = row.offsetHeight + diff + 'px';\n            }\n        }\n        function adjustRowHeight(row1, row2) {\n            var height;\n            var offsetHeight1 = row1.offsetHeight;\n            var offsetHeight2 = row2.offsetHeight;\n            if (offsetHeight1 > offsetHeight2) {\n                height = offsetHeight1 + 'px';\n            } else if (offsetHeight1 < offsetHeight2) {\n                height = offsetHeight2 + 'px';\n            }\n            if (height) {\n                row1.style.height = row2.style.height = height;\n            }\n        }\n        function getCommand(commands, name) {\n            var idx, length, command;\n            if (typeof commands === STRING && commands === name) {\n                return commands;\n            }\n            if (isPlainObject(commands) && commands.name === name) {\n                return commands;\n            }\n            if (isArray(commands)) {\n                for (idx = 0, length = commands.length; idx < length; idx++) {\n                    command = commands[idx];\n                    if (typeof command === STRING && command === name || command.name === name) {\n                        return command;\n                    }\n                }\n            }\n            return null;\n        }\n        function focusTable(table, direct) {\n            if (direct === true) {\n                table = $(table);\n                var scrollLeft = table.parent().scrollLeft();\n                kendo.focusElement(table);\n                table.parent().scrollLeft(scrollLeft);\n            } else {\n                $(table).one('focusin', function (e) {\n                    e.preventDefault();\n                }).focus();\n            }\n        }\n        function isColumnGroupable(grid, column) {\n            return grid.options.groupable && (column.groupable || column.groupable === undefined);\n        }\n        function isGroupedBy(groups, field) {\n            return !!$.grep(groups, function (item) {\n                return item.field === field;\n            }).length;\n        }\n        function isColumnEditable(column, model) {\n            if (!column.field || column.selectable) {\n                return false;\n            }\n            if (model.editable && !model.editable(column.field)) {\n                return false;\n            }\n            if (column.editable && !column.editable(model)) {\n                return false;\n            }\n            return true;\n        }\n        function isInputElement(element) {\n            return $(element).is(':button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown');\n        }\n        function tableClick(e) {\n            var currentTarget = $(e.currentTarget), isHeader = currentTarget.is('th'), table = this.table.add(this.lockedTable), headerTable = this.thead.parent().add($('>table', this.lockedHeader)), isInput = isInputElement(e.target), preventScroll = $(e.target).is('.k-checkbox'), target = $(e.target), currentTable = currentTarget.closest('table')[0];\n            if (isInput && currentTarget.find(kendo.roleSelector('filtercell')).length) {\n                this._setCurrent(currentTarget);\n                return;\n            }\n            if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                return;\n            }\n            if (target.is('a.k-i-expand, a.k-i-collapse')) {\n                return;\n            }\n            if (this.options.navigatable) {\n                this._setCurrent(currentTarget, false, preventScroll);\n            }\n            if (isHeader || !isInput) {\n                setTimeout(function () {\n                    if (!(isIE8 && $(kendo._activeElement()).hasClass('k-widget'))) {\n                        if ($(kendo._activeElement()).is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement())) {\n                            focusTable(currentTable, true);\n                        }\n                    }\n                });\n            }\n            if (isHeader && !kendo.support.touch) {\n                e.preventDefault();\n            }\n        }\n        function leftMostPosition(element, rtl) {\n            if (!rtl) {\n                return 0;\n            }\n            var result = 0;\n            if (kendo.support.browser.webkit) {\n                result = element.width();\n            }\n            return result;\n        }\n        function parseVirtualSettings(options) {\n            var asLowerString;\n            if (typeof options === 'string') {\n                asLowerString = options.toLowerCase();\n                if (asLowerString === 'true') {\n                    return { rows: true };\n                } else {\n                    return {\n                        rows: asLowerString.indexOf('rows') > -1,\n                        columns: asLowerString.indexOf('columns') > -1\n                    };\n                }\n            } else if (options === true) {\n                return { rows: true };\n            }\n        }\n        function isElementVisibleInWrapper(wrapper, element) {\n            var offsetTop;\n            var halfHeight;\n            if (!wrapper) {\n                return false;\n            }\n            element = $(element);\n            if (element[0] && contains(wrapper[0], element[0])) {\n                offsetTop = element.offset().top - wrapper.offset().top;\n                halfHeight = element.outerHeight() / 2;\n                if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && math.floor(offsetTop + halfHeight) <= wrapper.height()) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        function isInEdit(cell) {\n            return cell && (cell.hasClass('k-edit-cell') || cell.parent().hasClass('k-grid-edit-row'));\n        }\n        function groupCellBuilder(headerTemplateIndex) {\n            return '<td colspan=\"#=data.colspan +' + headerTemplateIndex + '#\">' + '<p class=\"k-reset\">' + '<a class=\"k-icon k-i-collapse\" href=\"\\\\#\" tabindex=\"-1\" ' + ARIALABEL + '=\"' + COLLAPSE + '\"></a>#=data.text#' + '</p></td>';\n        }\n        function groupCellLockedContentBuilder(headerTemplateIndex) {\n            return '<td colspan=\"' + headerTemplateIndex + '\">' + '<p class=\"k-reset\">&nbsp;</p></td>';\n        }\n        function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData) {\n            return '<tr role=\"row\"' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-grouping-row\">' + groupCells(level) + '<td colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' + '<p class=\"k-reset\">' + '<a class=\"k-icon ' + (expanded ? 'k-i-collapse' : 'k-i-expand') + '\" href=\"#\" tabindex=\"-1\" ' + ARIALABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>' + text + '</p></td></tr>';\n        }\n        function groupRowLockedContentBuilder(colspan) {\n            return '<tr role=\"row\" class=\"k-grouping-row\">' + '<td colspan=\"' + colspan + '\" aria-expanded=\"true\">' + '<p class=\"k-reset\">&nbsp;</p></td></tr>';\n        }\n        ui.plugin(Grid);\n        ui.plugin(VirtualScrollable);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}
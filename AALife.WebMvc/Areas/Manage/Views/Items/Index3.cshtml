@using System.Configuration;

@{
    ViewBag.Title = "消费列表 3";
}

<div class="row">
    <div class="col-xs-12">
        <div id="products"></div>
        <div id="products2"></div>
        <input id="products3" />
        <div id="products4"></div>
    </div><!-- /.col -->
</div><!-- /.row -->

@section scripts {
    <script src="~/Scripts/kendoui/js/kendo.combobox.js"></script>
    <script>
        $(document).ready(function () {
            $("#products").kendoComboBox({
                placeholder: "Select product",
                dataTextField: "ProductName",
                dataValueField: "ProductID",
                filter: "contains",
                autoBind: false,
                minLength: 3,
                dataSource: {
                    type: "odata",
                    serverFiltering: true,
                    transport: {
                        read: {
                            url: "https://demos.telerik.com/kendo-ui/service/Northwind.svc/Products",
                        }
                    }
                }
            });

            var filter0 = "";
            $("#products2").kendoComboBox({
                dataSource: {
                    serverFiltering: true,
                    transport: {
                        read: {
                            url: "/api/v1/categorytypenamesapi",
                            dataType: "json"
                        },
                        parameterMap: function (options, operation) {
                            return { term: options.filter.filters[0].value };
                        }
                    },
                    //requestStart: function (e) {
                    //    if (e.sender.filter() == undefined || e.sender.filter().filters.length == 0) {
                    //        e.preventDefault();
                    //    }
                    //}
                },
                filtering: function (e) {
                    if (e.filter == undefined) {
                        e.filter = filter0;
                        e.sender.dataSource.filter(filter0);
                        e.preventDefault();
                    } else {
                        filter0 = e.filter;
                    }
                    if ($.trim(e.filter.value) == "") {
                        e.preventDefault();
                    }
                },
                valuePrimitive: true,
                autoBind: false,
                minLength: 2,
                filter: "contains",
                placeholder: "请输入",
                dataTextField: "text",
                dataValueField: "value"
            });

            $("#products3").kendoAutoComplete({
                dataSource: {
                    serverFiltering: true,
                    transport: {
                        read: {
                            url: "/api/v1/categorytypenamesapi",
                            dataType: "json"
                        },
                        parameterMap: function (options, operation) {
                            return { term: options.filter.filters[0].value };
                        }
                    },
                    //requestStart: function (e) {
                    //    if (e.sender.filter() == undefined || e.sender.filter().filters.length == 0) {
                    //        e.preventDefault();
                    //    }
                    //}
                },
                filtering: function (e) {
                    if (e.filter == undefined || $.trim(e.filter.value) == "") {
                        e.preventDefault();
                    }
                },
                autoBind: false,
                minLength: 2,
                filter: "contains",
                dataTextField: "text"
            });

            $("#products4").kendoDropDownList({
                dataSource: {
                    serverFiltering: true,
                    transport: {
                        read: {
                            url: "/api/v1/categorytypenamesapi",
                            dataType: "json"
                        },
                        parameterMap: function (options, operation) {
                            return { term: options.filter.filters[0].value };
                        }
                    },
                    //requestStart: function (e) {
                    //    if (e.sender.filter() == undefined || e.sender.filter().filters.length == 0) {
                    //        e.preventDefault();
                    //    }
                    //}
                },
                filtering: function (e) {
                    if (e.filter == undefined || $.trim(e.filter.value) == "") {
                        e.preventDefault();
                    }
                },
                autoBind: false,
                minLength: 2,
                filter: "contains",
                optionLabel: "请输入",
                dataTextField: "text",
                dataValueField: "value"
            });
        });
    </script>
}